; Listing generated by Microsoft (R) Optimizing Compiler Version 19.27.29112.0 

	TITLE	C:\DS Project\DS Files\Source\ClientSource\Client\GameLib\MapOutdoorWater.cpp
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB LIBCMT
INCLUDELIB OLDNAMES

PUBLIC	??_H@YGXPAXIIP6EPAX0@Z@Z			; `vector constructor iterator'
PUBLIC	___local_stdio_printf_options
PUBLIC	_sprintf
PUBLIC	??0D3DXMATRIX@@QAE@XZ				; D3DXMATRIX::D3DXMATRIX
PUBLIC	?RenderWater@CMapOutdoor@@QAEXXZ		; CMapOutdoor::RenderWater
PUBLIC	?DrawWater@CMapOutdoor@@IAEXJ@Z			; CMapOutdoor::DrawWater
PUBLIC	?LoadWaterTexture@CMapOutdoor@@IAEXXZ		; CMapOutdoor::LoadWaterTexture
PUBLIC	?UnloadWaterTexture@CMapOutdoor@@IAEXXZ		; CMapOutdoor::UnloadWaterTexture
PUBLIC	??$_Const_cast@$$CBU?$pair@MJ@std@@@std@@YAPAU?$pair@MJ@0@PBU10@@Z ; std::_Const_cast<std::pair<float,long> const >
PUBLIC	?_OptionsStorage@?1??__local_stdio_printf_options@@9@4_KA ; `__local_stdio_printf_options'::`2'::_OptionsStorage
PUBLIC	?ms_singleton@?$CSingleton@VCTimer@@@@0PAVCTimer@@A ; CSingleton<CTimer>::ms_singleton
PUBLIC	?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
PUBLIC	?ms_singleton@?$CSingleton@VCResourceManager@@@@0PAVCResourceManager@@A ; CSingleton<CResourceManager>::ms_singleton
PUBLIC	??_C@_0CE@FMFHOAGL@d?3?1ymir?5Work?1special?1water?1?$CF02d@ ; `string'
PUBLIC	__real@00000000
PUBLIC	__xmm@41f00000000000000000000000000000
PUBLIC	__xmm@80000000800000008000000080000000
EXTRN	__Init_thread_header:PROC
EXTRN	__Init_thread_abort:PROC
EXTRN	__Init_thread_footer:PROC
EXTRN	___stdio_common_vsprintf:PROC
EXTRN	?random_range@@YAJJJ@Z:PROC			; random_range
EXTRN	_D3DXMatrixMultiply@12:PROC
EXTRN	_D3DXMatrixScaling@16:PROC
EXTRN	?GetCurrentMillisecond@CTimer@@QAEKXZ:PROC	; CTimer::GetCurrentMillisecond
EXTRN	?ELTimer_GetMSec@@YAKXZ:PROC			; ELTimer_GetMSec
EXTRN	?GetD3DTexture@CGraphicTexture@@QBEPAUIDirect3DTexture8@@XZ:PROC ; CGraphicTexture::GetD3DTexture
EXTRN	?Destroy@CGraphicImageInstance@@QAEXXZ:PROC	; CGraphicImageInstance::Destroy
EXTRN	?SetImagePointer@CGraphicImageInstance@@QAEXPAVCGraphicImage@@@Z:PROC ; CGraphicImageInstance::SetImagePointer
EXTRN	?GetTexturePointer@CGraphicImageInstance@@QAEPAVCGraphicTexture@@XZ:PROC ; CGraphicImageInstance::GetTexturePointer
EXTRN	?SaveRenderState@CStateManager@@QAEXW4_D3DRENDERSTATETYPE@@K@Z:PROC ; CStateManager::SaveRenderState
EXTRN	?RestoreRenderState@CStateManager@@QAEXW4_D3DRENDERSTATETYPE@@@Z:PROC ; CStateManager::RestoreRenderState
EXTRN	?SetRenderState@CStateManager@@QAEXW4_D3DRENDERSTATETYPE@@K@Z:PROC ; CStateManager::SetRenderState
EXTRN	?SetTexture@CStateManager@@QAEXKPAUIDirect3DBaseTexture8@@@Z:PROC ; CStateManager::SetTexture
EXTRN	?SaveTextureStageState@CStateManager@@QAEXKW4_D3DTEXTURESTAGESTATETYPE@@K@Z:PROC ; CStateManager::SaveTextureStageState
EXTRN	?RestoreTextureStageState@CStateManager@@QAEXKW4_D3DTEXTURESTAGESTATETYPE@@@Z:PROC ; CStateManager::RestoreTextureStageState
EXTRN	?SetTextureStageState@CStateManager@@QAEXKW4_D3DTEXTURESTAGESTATETYPE@@K@Z:PROC ; CStateManager::SetTextureStageState
EXTRN	?SaveVertexShader@CStateManager@@QAEXK@Z:PROC	; CStateManager::SaveVertexShader
EXTRN	?RestoreVertexShader@CStateManager@@QAEXXZ:PROC	; CStateManager::RestoreVertexShader
EXTRN	?SaveTransform@CStateManager@@QAEXW4_D3DTRANSFORMSTATETYPE@@PBU_D3DMATRIX@@@Z:PROC ; CStateManager::SaveTransform
EXTRN	?RestoreTransform@CStateManager@@QAEXW4_D3DTRANSFORMSTATETYPE@@@Z:PROC ; CStateManager::RestoreTransform
EXTRN	?SetTransform@CStateManager@@QAEXW4_D3DTRANSFORMSTATETYPE@@PBU_D3DMATRIX@@@Z:PROC ; CStateManager::SetTransform
EXTRN	?SetStreamSource@CStateManager@@QAEXIPAUIDirect3DVertexBuffer8@@I@Z:PROC ; CStateManager::SetStreamSource
EXTRN	?DrawPrimitive@CStateManager@@QAEJW4_D3DPRIMITIVETYPE@@II@Z:PROC ; CStateManager::DrawPrimitive
EXTRN	?GetResourcePointer@CResourceManager@@QAEPAVCResource@@PBD@Z:PROC ; CResourceManager::GetResourcePointer
EXTRN	?GetWaterFaceCount@CTerrainPatchProxy@@QAEIXZ:PROC ; CTerrainPatchProxy::GetWaterFaceCount
EXTRN	?IsVisiblePart@CMapOutdoor@@IAE_NH@Z:PROC	; CMapOutdoor::IsVisiblePart
EXTRN	?__GetFogDistance@CMapOutdoor@@IAEMXZ:PROC	; CMapOutdoor::__GetFogDistance
EXTRN	@__security_check_cookie@4:PROC
EXTRN	___CxxFrameHandler3:PROC
EXTRN	__Init_thread_epoch:DWORD
EXTRN	?ms_faceCount@CGraphicBase@@1KA:DWORD		; CGraphicBase::ms_faceCount
EXTRN	___security_cookie:DWORD
EXTRN	__fltused:DWORD
EXTRN	__tls_array:DWORD
EXTRN	__tls_index:DWORD
;	COMDAT ?_OptionsStorage@?1??__local_stdio_printf_options@@9@4_KA
_BSS	SEGMENT
?_OptionsStorage@?1??__local_stdio_printf_options@@9@4_KA DQ 01H DUP (?) ; `__local_stdio_printf_options'::`2'::_OptionsStorage
_BSS	ENDS
;	COMDAT ?ms_singleton@?$CSingleton@VCTimer@@@@0PAVCTimer@@A
_BSS	SEGMENT
?ms_singleton@?$CSingleton@VCTimer@@@@0PAVCTimer@@A DD 01H DUP (?) ; CSingleton<CTimer>::ms_singleton
_BSS	ENDS
;	COMDAT ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A
_BSS	SEGMENT
?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A DD 01H DUP (?) ; CSingleton<CStateManager>::ms_singleton
_BSS	ENDS
;	COMDAT ?ms_singleton@?$CSingleton@VCResourceManager@@@@0PAVCResourceManager@@A
_BSS	SEGMENT
?ms_singleton@?$CSingleton@VCResourceManager@@@@0PAVCResourceManager@@A DD 01H DUP (?) ; CSingleton<CResourceManager>::ms_singleton
_BSS	ENDS
;	COMDAT ?s_fWaterHeightCurrent@?1??RenderWater@CMapOutdoor@@QAEXXZ@4MA
_BSS	SEGMENT
?s_fWaterHeightCurrent@?1??RenderWater@CMapOutdoor@@QAEXXZ@4MA DD 01H DUP (?) ; `CMapOutdoor::RenderWater'::`2'::s_fWaterHeightCurrent
_BSS	ENDS
;	COMDAT ?s_fWaterHeightBegin@?1??RenderWater@CMapOutdoor@@QAEXXZ@4MA
_BSS	SEGMENT
?s_fWaterHeightBegin@?1??RenderWater@CMapOutdoor@@QAEXXZ@4MA DD 01H DUP (?) ; `CMapOutdoor::RenderWater'::`2'::s_fWaterHeightBegin
_BSS	ENDS
;	COMDAT ?s_fWaterHeightEnd@?1??RenderWater@CMapOutdoor@@QAEXXZ@4MA
_BSS	SEGMENT
?s_fWaterHeightEnd@?1??RenderWater@CMapOutdoor@@QAEXXZ@4MA DD 01H DUP (?) ; `CMapOutdoor::RenderWater'::`2'::s_fWaterHeightEnd
_BSS	ENDS
;	COMDAT ?s_dwLastHeightChangeTime@?1??RenderWater@CMapOutdoor@@QAEXXZ@4KA
_BSS	SEGMENT
?s_dwLastHeightChangeTime@?1??RenderWater@CMapOutdoor@@QAEXXZ@4KA DD 01H DUP (?) ; `CMapOutdoor::RenderWater'::`2'::s_dwLastHeightChangeTime
_BSS	ENDS
;	COMDAT ?$TSS0@?1??RenderWater@CMapOutdoor@@QAEXXZ@4HA
_BSS	SEGMENT
?$TSS0@?1??RenderWater@CMapOutdoor@@QAEXXZ@4HA DD 01H DUP (?) ; `CMapOutdoor::RenderWater'::`2'::$TSS0
_BSS	ENDS
;	COMDAT __xmm@80000000800000008000000080000000
CONST	SEGMENT
__xmm@80000000800000008000000080000000 DB 00H, 00H, 00H, 080H, 00H, 00H, 00H
	DB	080H, 00H, 00H, 00H, 080H, 00H, 00H, 00H, 080H
CONST	ENDS
;	COMDAT __xmm@41f00000000000000000000000000000
CONST	SEGMENT
__xmm@41f00000000000000000000000000000 DB 00H, 00H, 00H, 00H, 00H, 00H, 00H
	DB	00H, 00H, 00H, 00H, 00H, 00H, 00H, 0f0H, 'A'
CONST	ENDS
;	COMDAT __real@00000000
CONST	SEGMENT
__real@00000000 DD 000000000r			; 0
CONST	ENDS
;	COMDAT ?s_dwBlendtime@?1??RenderWater@CMapOutdoor@@QAEXXZ@4KA
_DATA	SEGMENT
?s_dwBlendtime@?1??RenderWater@CMapOutdoor@@QAEXXZ@4KA DD 012cH ; `CMapOutdoor::RenderWater'::`2'::s_dwBlendtime
_DATA	ENDS
;	COMDAT ??_C@_0CE@FMFHOAGL@d?3?1ymir?5Work?1special?1water?1?$CF02d@
CONST	SEGMENT
??_C@_0CE@FMFHOAGL@d?3?1ymir?5Work?1special?1water?1?$CF02d@ DB 'd:/ymir '
	DB	'Work/special/water/%02d.dds', 00H		; `string'
CONST	ENDS
;	COMDAT xdata$x
xdata$x	SEGMENT
__unwindtable$?RenderWater@CMapOutdoor@@QAEXXZ DD 0ffffffffH
	DD	FLAT:__unwindfunclet$?RenderWater@CMapOutdoor@@QAEXXZ$0
__ehfuncinfo$?RenderWater@CMapOutdoor@@QAEXXZ DD 019930522H
	DD	01H
	DD	FLAT:__unwindtable$?RenderWater@CMapOutdoor@@QAEXXZ
	DD	2 DUP(00H)
	DD	2 DUP(00H)
	DD	00H
	DD	01H
xdata$x	ENDS
; Function compile flags: /Ogtp
; File C:\Program Files (x86)\Microsoft Visual Studio\2019\Community\VC\Tools\MSVC\14.27.29110\include\xmemory
;	COMDAT ??$_Const_cast@$$CBU?$pair@MJ@std@@@std@@YAPAU?$pair@MJ@0@PBU10@@Z
_TEXT	SEGMENT
__Ptr$ = 8						; size = 4
??$_Const_cast@$$CBU?$pair@MJ@std@@@std@@YAPAU?$pair@MJ@0@PBU10@@Z PROC ; std::_Const_cast<std::pair<float,long> const >, COMDAT

; 282  : auto _Const_cast(_Ty* _Ptr) noexcept {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 283  :     return const_cast<remove_const_t<_Ty>*>(_Ptr);

  00003	8b 45 08	 mov	 eax, DWORD PTR __Ptr$[ebp]

; 284  : }

  00006	5d		 pop	 ebp
  00007	c3		 ret	 0
??$_Const_cast@$$CBU?$pair@MJ@std@@@std@@YAPAU?$pair@MJ@0@PBU10@@Z ENDP ; std::_Const_cast<std::pair<float,long> const >
_TEXT	ENDS
; Function compile flags: /Ogtp
; File C:\DS Project\DS Files\Source\ClientSource\Client\GameLib\MapOutdoorWater.cpp
;	COMDAT ?UnloadWaterTexture@CMapOutdoor@@IAEXXZ
_TEXT	SEGMENT
?UnloadWaterTexture@CMapOutdoor@@IAEXXZ PROC		; CMapOutdoor::UnloadWaterTexture, COMDAT
; _this$ = ecx

; 20   : {

  00000	56		 push	 esi
  00001	57		 push	 edi

; 21   : 	for (int i = 0; i < 30; ++i)

  00002	8d b1 28 0a 00
	00		 lea	 esi, DWORD PTR [ecx+2600]
  00008	bf 1e 00 00 00	 mov	 edi, 30			; 0000001eH
  0000d	0f 1f 00	 npad	 3
$LL4@UnloadWate:

; 22   : 		m_WaterInstances[i].Destroy();

  00010	8b ce		 mov	 ecx, esi
  00012	e8 00 00 00 00	 call	 ?Destroy@CGraphicImageInstance@@QAEXXZ ; CGraphicImageInstance::Destroy
  00017	83 c6 20	 add	 esi, 32			; 00000020H
  0001a	83 ef 01	 sub	 edi, 1
  0001d	75 f1		 jne	 SHORT $LL4@UnloadWate

; 23   : }

  0001f	5f		 pop	 edi
  00020	5e		 pop	 esi
  00021	c3		 ret	 0
?UnloadWaterTexture@CMapOutdoor@@IAEXXZ ENDP		; CMapOutdoor::UnloadWaterTexture
_TEXT	ENDS
; Function compile flags: /Ogtp
; File C:\DS Project\DS Files\Source\ClientSource\Client\GameLib\MapOutdoorWater.cpp
;	COMDAT ?LoadWaterTexture@CMapOutdoor@@IAEXXZ
_TEXT	SEGMENT
_buf$ = -260						; size = 256
__$ArrayPad$ = -4					; size = 4
?LoadWaterTexture@CMapOutdoor@@IAEXXZ PROC		; CMapOutdoor::LoadWaterTexture, COMDAT
; _this$ = ecx

; 9    : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec 04 01 00
	00		 sub	 esp, 260		; 00000104H
  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000e	33 c5		 xor	 eax, ebp
  00010	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00013	56		 push	 esi
  00014	57		 push	 edi
  00015	8b f9		 mov	 edi, ecx

; 10   : 	UnloadWaterTexture();

  00017	e8 00 00 00 00	 call	 ?UnloadWaterTexture@CMapOutdoor@@IAEXXZ ; CMapOutdoor::UnloadWaterTexture
  0001c	33 f6		 xor	 esi, esi
  0001e	81 c7 28 0a 00
	00		 add	 edi, 2600		; 00000a28H
$LL4@LoadWaterT:

; 11   : 	char buf[256];
; 12   : 	for (int i = 0; i < 30; ++i)
; 13   : 	{
; 14   : 		sprintf(buf, "d:/ymir Work/special/water/%02d.dds", i+1);

  00024	46		 inc	 esi
  00025	8d 85 fc fe ff
	ff		 lea	 eax, DWORD PTR _buf$[ebp]
  0002b	56		 push	 esi
  0002c	68 00 00 00 00	 push	 OFFSET ??_C@_0CE@FMFHOAGL@d?3?1ymir?5Work?1special?1water?1?$CF02d@
  00031	50		 push	 eax
  00032	e8 00 00 00 00	 call	 _sprintf

; 15   : 		m_WaterInstances[i].SetImagePointer((CGraphicImage *) CResourceManager::Instance().GetResourcePointer(buf));

  00037	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCResourceManager@@@@0PAVCResourceManager@@A ; CSingleton<CResourceManager>::ms_singleton
  0003d	8d 85 fc fe ff
	ff		 lea	 eax, DWORD PTR _buf$[ebp]
  00043	83 c4 0c	 add	 esp, 12			; 0000000cH
  00046	50		 push	 eax
  00047	e8 00 00 00 00	 call	 ?GetResourcePointer@CResourceManager@@QAEPAVCResource@@PBD@Z ; CResourceManager::GetResourcePointer
  0004c	50		 push	 eax
  0004d	8b cf		 mov	 ecx, edi
  0004f	e8 00 00 00 00	 call	 ?SetImagePointer@CGraphicImageInstance@@QAEXPAVCGraphicImage@@@Z ; CGraphicImageInstance::SetImagePointer
  00054	83 c7 20	 add	 edi, 32			; 00000020H
  00057	83 fe 1e	 cmp	 esi, 30			; 0000001eH
  0005a	7c c8		 jl	 SHORT $LL4@LoadWaterT

; 16   : 	}
; 17   : }

  0005c	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0005f	5f		 pop	 edi
  00060	33 cd		 xor	 ecx, ebp
  00062	5e		 pop	 esi
  00063	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00068	8b e5		 mov	 esp, ebp
  0006a	5d		 pop	 ebp
  0006b	c3		 ret	 0
?LoadWaterTexture@CMapOutdoor@@IAEXXZ ENDP		; CMapOutdoor::LoadWaterTexture
_TEXT	ENDS
; Function compile flags: /Ogtp
; File C:\DS Project\DS Files\Source\ClientSource\Client\GameLib\MapOutdoorWater.cpp
; File C:\DS Project\DS Files\Source\ClientSource\Client\GameLib\TerrainPatch.h
; File C:\DS Project\DS Files\Source\ClientSource\Client\GameLib\MapOutdoorWater.cpp
; File C:\DS Project\DS Files\Source\ClientSource\Client\GameLib\TerrainPatch.h
; File C:\DS Project\DS Files\Source\ClientSource\Client\GameLib\MapOutdoorWater.cpp
;	COMDAT ?DrawWater@CMapOutdoor@@IAEXJ@Z
_TEXT	SEGMENT
_patchnum$ = 8						; size = 4
?DrawWater@CMapOutdoor@@IAEXJ@Z PROC			; CMapOutdoor::DrawWater, COMDAT
; _this$ = ecx

; 139  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 140  : 	assert(NULL!=m_pTerrainPatchProxyList);
; 141  : 	if (!m_pTerrainPatchProxyList)

  00003	8b 51 64	 mov	 edx, DWORD PTR [ecx+100]
  00006	85 d2		 test	 edx, edx
  00008	74 61		 je	 SHORT $LN1@DrawWater

; 142  : 		return;
; 143  : 
; 144  : 	CTerrainPatchProxy& rkTerrainPatchProxy = m_pTerrainPatchProxyList[patchnum];

  0000a	8b 45 08	 mov	 eax, DWORD PTR _patchnum$[ebp]
  0000d	8d 0c c5 00 00
	00 00		 lea	 ecx, DWORD PTR [eax*8]
  00014	2b c8		 sub	 ecx, eax

; 145  : 
; 146  : 	if (!rkTerrainPatchProxy.isUsed())

  00016	80 7c 8a 04 00	 cmp	 BYTE PTR [edx+ecx*4+4], 0
  0001b	8d 0c 8a	 lea	 ecx, DWORD PTR [edx+ecx*4]
  0001e	74 4b		 je	 SHORT $LN1@DrawWater
; File C:\DS Project\DS Files\Source\ClientSource\Client\GameLib\TerrainPatch.h

; 212  : 	return m_pTerrainPatch->IsWaterExist();

  00020	56		 push	 esi
  00021	8b 71 0c	 mov	 esi, DWORD PTR [ecx+12]
; File C:\DS Project\DS Files\Source\ClientSource\Client\GameLib\MapOutdoorWater.cpp

; 149  : 	if (!rkTerrainPatchProxy.isWaterExists())

  00024	80 7e 19 00	 cmp	 BYTE PTR [esi+25], 0
  00028	74 40		 je	 SHORT $LN13@DrawWater
; File C:\DS Project\DS Files\Source\ClientSource\Client\GameLib\TerrainPatch.h

; 247  : 	return m_pTerrainPatch->GetWaterVertexBufferPointer();

  0002a	83 c6 24	 add	 esi, 36			; 00000024H
; File C:\DS Project\DS Files\Source\ClientSource\Client\GameLib\MapOutdoorWater.cpp

; 153  : 	if (!pkVB)

  0002d	74 3b		 je	 SHORT $LN13@DrawWater

; 154  : 		return;
; 155  : 
; 156  : 	if (!pkVB->GetD3DVertexBuffer())

  0002f	83 7e 04 00	 cmp	 DWORD PTR [esi+4], 0
  00033	74 35		 je	 SHORT $LN13@DrawWater

; 157  : 		return;
; 158  : 
; 159  : 	UINT uPriCount=rkTerrainPatchProxy.GetWaterFaceCount();

  00035	57		 push	 edi
  00036	e8 00 00 00 00	 call	 ?GetWaterFaceCount@CTerrainPatchProxy@@QAEIXZ ; CTerrainPatchProxy::GetWaterFaceCount
  0003b	8b f8		 mov	 edi, eax

; 160  : 	if (!uPriCount)

  0003d	85 ff		 test	 edi, edi
  0003f	74 28		 je	 SHORT $LN14@DrawWater

; 161  : 		return;
; 162  : 
; 163  : 	STATEMANAGER.SetStreamSource(0, pkVB->GetD3DVertexBuffer(), sizeof(SWaterVertex));

  00041	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  00047	6a 10		 push	 16			; 00000010H
  00049	ff 76 04	 push	 DWORD PTR [esi+4]
  0004c	6a 00		 push	 0
  0004e	e8 00 00 00 00	 call	 ?SetStreamSource@CStateManager@@QAEXIPAUIDirect3DVertexBuffer8@@I@Z ; CStateManager::SetStreamSource

; 164  : 	STATEMANAGER.DrawPrimitive(D3DPT_TRIANGLELIST, 0, uPriCount);

  00053	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  00059	57		 push	 edi
  0005a	6a 00		 push	 0
  0005c	6a 04		 push	 4
  0005e	e8 00 00 00 00	 call	 ?DrawPrimitive@CStateManager@@QAEJW4_D3DPRIMITIVETYPE@@II@Z ; CStateManager::DrawPrimitive

; 165  : 
; 166  : 	ms_faceCount += uPriCount;

  00063	01 3d 00 00 00
	00		 add	 DWORD PTR ?ms_faceCount@CGraphicBase@@1KA, edi ; CGraphicBase::ms_faceCount
$LN14@DrawWater:
  00069	5f		 pop	 edi
$LN13@DrawWater:
  0006a	5e		 pop	 esi
$LN1@DrawWater:

; 167  : }

  0006b	5d		 pop	 ebp
  0006c	c2 04 00	 ret	 4
?DrawWater@CMapOutdoor@@IAEXJ@Z ENDP			; CMapOutdoor::DrawWater
_TEXT	ENDS
; Function compile flags: /Ogtp
; File C:\DS Project\DS Files\Source\ClientSource\Client\GameLib\MapOutdoorWater.cpp
; File C:\Program Files (x86)\Microsoft Visual Studio\2019\Community\VC\Tools\MSVC\14.27.29110\include\vector
; File C:\DS Project\DS Files\Source\ClientSource\Client\GameLib\MapOutdoorWater.cpp
; File C:\Program Files (x86)\Microsoft Visual Studio\2019\Community\VC\Tools\MSVC\14.27.29110\include\vector
; File C:\DS Project\DS Files\Source\ClientSource\Client\GameLib\MapOutdoorWater.cpp
; File C:\Program Files (x86)\Microsoft Visual Studio\2019\Community\VC\Tools\MSVC\14.27.29110\include\vector
; File C:\DS Project\DS Files\Source\ClientSource\Client\GameLib\MapOutdoorWater.cpp
; File C:\Program Files (x86)\Microsoft Visual Studio\2019\Community\VC\Tools\MSVC\14.27.29110\include\vector
; File C:\DS Project\DS Files\Source\ClientSource\Client\GameLib\MapOutdoorWater.cpp
; File C:\Program Files (x86)\Microsoft Visual Studio\2019\Community\VC\Tools\MSVC\14.27.29110\include\vector
; File C:\DS Project\DS Files\Source\ClientSource\Client\GameLib\MapOutdoorWater.cpp
; File C:\Program Files (x86)\Microsoft Visual Studio\2019\Community\VC\Tools\MSVC\14.27.29110\include\vector
; File C:\DS Project\DS Files\Source\ClientSource\Client\GameLib\MapOutdoorWater.cpp
; File C:\Program Files (x86)\Microsoft Visual Studio\2019\Community\VC\Tools\MSVC\14.27.29110\include\vector
; File C:\DS Project\DS Files\Source\ClientSource\Client\GameLib\MapOutdoorWater.cpp
; File C:\Program Files (x86)\Microsoft Visual Studio\2019\Community\VC\Tools\MSVC\14.27.29110\include\vector
; File C:\DS Project\DS Files\Source\ClientSource\Client\GameLib\MapOutdoorWater.cpp
;	COMDAT ?RenderWater@CMapOutdoor@@QAEXXZ
_TEXT	SEGMENT
_fFogDistance$ = -84					; size = 4
_matTexTransformWater$ = -80				; size = 64
__$ArrayPad$ = -16					; size = 4
__$EHRec$ = -12						; size = 12
?RenderWater@CMapOutdoor@@QAEXXZ PROC			; CMapOutdoor::RenderWater, COMDAT
; _this$ = ecx

; 26   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	6a ff		 push	 -1
  00005	68 00 00 00 00	 push	 __ehhandler$?RenderWater@CMapOutdoor@@QAEXXZ
  0000a	64 a1 00 00 00
	00		 mov	 eax, DWORD PTR fs:0
  00010	50		 push	 eax
  00011	83 ec 48	 sub	 esp, 72			; 00000048H
  00014	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  00019	33 c5		 xor	 eax, ebp
  0001b	89 45 f0	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  0001e	56		 push	 esi
  0001f	57		 push	 edi
  00020	50		 push	 eax
  00021	8d 45 f4	 lea	 eax, DWORD PTR __$EHRec$[ebp]
  00024	64 a3 00 00 00
	00		 mov	 DWORD PTR fs:0, eax
  0002a	8b f9		 mov	 edi, ecx

; 27   : 	if (m_PatchVector.empty())

  0002c	8b 87 18 01 00
	00		 mov	 eax, DWORD PTR [edi+280]
  00032	3b 87 1c 01 00
	00		 cmp	 eax, DWORD PTR [edi+284]
  00038	0f 84 ac 04 00
	00		 je	 $LN1@RenderWate

; 28   : 		return;
; 29   : 
; 30   : 	if (!IsVisiblePart(PART_WATER))

  0003e	6a 03		 push	 3
  00040	e8 00 00 00 00	 call	 ?IsVisiblePart@CMapOutdoor@@IAE_NH@Z ; CMapOutdoor::IsVisiblePart
  00045	84 c0		 test	 al, al
  00047	0f 84 9d 04 00
	00		 je	 $LN1@RenderWate

; 31   : 		return;
; 32   : 
; 33   : 	//////////////////////////////////////////////////////////////////////////
; 34   : 	// RenderState
; 35   : 	D3DXMATRIX matTexTransformWater;
; 36   : 
; 37   : 	STATEMANAGER.SaveRenderState(D3DRS_ZWRITEENABLE, FALSE);

  0004d	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  00053	6a 00		 push	 0
  00055	6a 0e		 push	 14			; 0000000eH
  00057	e8 00 00 00 00	 call	 ?SaveRenderState@CStateManager@@QAEXW4_D3DRENDERSTATETYPE@@K@Z ; CStateManager::SaveRenderState

; 38   : 	STATEMANAGER.SaveRenderState(D3DRS_ALPHABLENDENABLE, TRUE);

  0005c	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  00062	6a 01		 push	 1
  00064	6a 1b		 push	 27			; 0000001bH
  00066	e8 00 00 00 00	 call	 ?SaveRenderState@CStateManager@@QAEXW4_D3DRENDERSTATETYPE@@K@Z ; CStateManager::SaveRenderState

; 39   : 	STATEMANAGER.SaveRenderState(D3DRS_CULLMODE, D3DCULL_NONE);

  0006b	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  00071	6a 01		 push	 1
  00073	6a 16		 push	 22			; 00000016H
  00075	e8 00 00 00 00	 call	 ?SaveRenderState@CStateManager@@QAEXW4_D3DRENDERSTATETYPE@@K@Z ; CStateManager::SaveRenderState

; 40   : 	STATEMANAGER.SaveRenderState(D3DRS_DIFFUSEMATERIALSOURCE, D3DMCS_COLOR1);

  0007a	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  00080	6a 01		 push	 1
  00082	68 91 00 00 00	 push	 145			; 00000091H
  00087	e8 00 00 00 00	 call	 ?SaveRenderState@CStateManager@@QAEXW4_D3DRENDERSTATETYPE@@K@Z ; CStateManager::SaveRenderState

; 41   : 	STATEMANAGER.SaveRenderState(D3DRS_COLORVERTEX, TRUE);

  0008c	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  00092	6a 01		 push	 1
  00094	68 8d 00 00 00	 push	 141			; 0000008dH
  00099	e8 00 00 00 00	 call	 ?SaveRenderState@CStateManager@@QAEXW4_D3DRENDERSTATETYPE@@K@Z ; CStateManager::SaveRenderState

; 42   : 
; 43   : 	STATEMANAGER.SetTexture(0, m_WaterInstances[((ELTimer_GetMSec() / 70) % 30)].GetTexturePointer()->GetD3DTexture());

  0009e	e8 00 00 00 00	 call	 ?ELTimer_GetMSec@@YAKXZ	; ELTimer_GetMSec
  000a3	8b c8		 mov	 ecx, eax
  000a5	b8 d5 41 1d d4	 mov	 eax, -736280107		; d41d41d5H
  000aa	f7 e1		 mul	 ecx
  000ac	2b ca		 sub	 ecx, edx
  000ae	d1 e9		 shr	 ecx, 1
  000b0	8d 04 0a	 lea	 eax, DWORD PTR [edx+ecx]
  000b3	33 d2		 xor	 edx, edx
  000b5	c1 e8 06	 shr	 eax, 6
  000b8	b9 1e 00 00 00	 mov	 ecx, 30			; 0000001eH
  000bd	f7 f1		 div	 ecx
  000bf	8d 8f 28 0a 00
	00		 lea	 ecx, DWORD PTR [edi+2600]
  000c5	c1 e2 05	 shl	 edx, 5
  000c8	03 ca		 add	 ecx, edx
  000ca	e8 00 00 00 00	 call	 ?GetTexturePointer@CGraphicImageInstance@@QAEPAVCGraphicTexture@@XZ ; CGraphicImageInstance::GetTexturePointer
  000cf	8b c8		 mov	 ecx, eax
  000d1	e8 00 00 00 00	 call	 ?GetD3DTexture@CGraphicTexture@@QBEPAUIDirect3DTexture8@@XZ ; CGraphicTexture::GetD3DTexture
  000d6	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  000dc	50		 push	 eax
  000dd	6a 00		 push	 0
  000df	e8 00 00 00 00	 call	 ?SetTexture@CStateManager@@QAEXKPAUIDirect3DBaseTexture8@@@Z ; CStateManager::SetTexture

; 44   : 
; 45   : 	D3DXMatrixScaling(&matTexTransformWater, m_fWaterTexCoordBase, -m_fWaterTexCoordBase, 0.0f);

  000e4	f3 0f 10 8f 0c
	09 00 00	 movss	 xmm1, DWORD PTR [edi+2316]
  000ec	8d 45 b0	 lea	 eax, DWORD PTR _matTexTransformWater$[ebp]
  000ef	83 ec 0c	 sub	 esp, 12			; 0000000cH
  000f2	0f 28 c1	 movaps	 xmm0, xmm1
  000f5	0f 57 05 00 00
	00 00		 xorps	 xmm0, DWORD PTR __xmm@80000000800000008000000080000000
  000fc	c7 44 24 08 00
	00 00 00	 mov	 DWORD PTR [esp+8], 0
  00104	f3 0f 11 44 24
	04		 movss	 DWORD PTR [esp+4], xmm0
  0010a	f3 0f 11 0c 24	 movss	 DWORD PTR [esp], xmm1
  0010f	50		 push	 eax
  00110	e8 00 00 00 00	 call	 _D3DXMatrixScaling@16

; 46   : 	D3DXMatrixMultiply(&matTexTransformWater, &m_matViewInverse, &matTexTransformWater);

  00115	8d 45 b0	 lea	 eax, DWORD PTR _matTexTransformWater$[ebp]
  00118	50		 push	 eax
  00119	8d 87 88 07 00
	00		 lea	 eax, DWORD PTR [edi+1928]
  0011f	50		 push	 eax
  00120	8d 45 b0	 lea	 eax, DWORD PTR _matTexTransformWater$[ebp]
  00123	50		 push	 eax
  00124	e8 00 00 00 00	 call	 _D3DXMatrixMultiply@12

; 47   : 
; 48   : 	STATEMANAGER.SaveTransform(D3DTS_TEXTURE0, &matTexTransformWater);

  00129	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  0012f	8d 45 b0	 lea	 eax, DWORD PTR _matTexTransformWater$[ebp]
  00132	50		 push	 eax
  00133	6a 10		 push	 16			; 00000010H
  00135	e8 00 00 00 00	 call	 ?SaveTransform@CStateManager@@QAEXW4_D3DTRANSFORMSTATETYPE@@PBU_D3DMATRIX@@@Z ; CStateManager::SaveTransform

; 49   : 	STATEMANAGER.SaveVertexShader(D3DFVF_XYZ|D3DFVF_DIFFUSE);

  0013a	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  00140	6a 42		 push	 66			; 00000042H
  00142	e8 00 00 00 00	 call	 ?SaveVertexShader@CStateManager@@QAEXK@Z ; CStateManager::SaveVertexShader

; 50   : 
; 51   : 	STATEMANAGER.SaveTextureStageState(0, D3DTSS_TEXCOORDINDEX, D3DTSS_TCI_CAMERASPACEPOSITION);

  00147	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  0014d	68 00 00 02 00	 push	 131072			; 00020000H
  00152	6a 0b		 push	 11			; 0000000bH
  00154	6a 00		 push	 0
  00156	e8 00 00 00 00	 call	 ?SaveTextureStageState@CStateManager@@QAEXKW4_D3DTEXTURESTAGESTATETYPE@@K@Z ; CStateManager::SaveTextureStageState

; 52   : 	STATEMANAGER.SaveTextureStageState(0, D3DTSS_TEXTURETRANSFORMFLAGS, D3DTTFF_COUNT2);

  0015b	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  00161	6a 02		 push	 2
  00163	6a 18		 push	 24			; 00000018H
  00165	6a 00		 push	 0
  00167	e8 00 00 00 00	 call	 ?SaveTextureStageState@CStateManager@@QAEXKW4_D3DTEXTURESTAGESTATETYPE@@K@Z ; CStateManager::SaveTextureStageState

; 53   : 	STATEMANAGER.SaveTextureStageState(0, D3DTSS_MINFILTER, D3DTEXF_LINEAR);

  0016c	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  00172	6a 02		 push	 2
  00174	6a 11		 push	 17			; 00000011H
  00176	6a 00		 push	 0
  00178	e8 00 00 00 00	 call	 ?SaveTextureStageState@CStateManager@@QAEXKW4_D3DTEXTURESTAGESTATETYPE@@K@Z ; CStateManager::SaveTextureStageState

; 54   : 	STATEMANAGER.SaveTextureStageState(0, D3DTSS_MAGFILTER, D3DTEXF_LINEAR);

  0017d	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  00183	6a 02		 push	 2
  00185	6a 10		 push	 16			; 00000010H
  00187	6a 00		 push	 0
  00189	e8 00 00 00 00	 call	 ?SaveTextureStageState@CStateManager@@QAEXKW4_D3DTEXTURESTAGESTATETYPE@@K@Z ; CStateManager::SaveTextureStageState

; 55   : 	STATEMANAGER.SaveTextureStageState(0, D3DTSS_MIPFILTER, D3DTEXF_LINEAR);

  0018e	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  00194	6a 02		 push	 2
  00196	6a 12		 push	 18			; 00000012H
  00198	6a 00		 push	 0
  0019a	e8 00 00 00 00	 call	 ?SaveTextureStageState@CStateManager@@QAEXKW4_D3DTEXTURESTAGESTATETYPE@@K@Z ; CStateManager::SaveTextureStageState

; 56   : 	STATEMANAGER.SaveTextureStageState(0, D3DTSS_ADDRESSU, D3DTADDRESS_WRAP);

  0019f	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  001a5	6a 01		 push	 1
  001a7	6a 0d		 push	 13			; 0000000dH
  001a9	6a 00		 push	 0
  001ab	e8 00 00 00 00	 call	 ?SaveTextureStageState@CStateManager@@QAEXKW4_D3DTEXTURESTAGESTATETYPE@@K@Z ; CStateManager::SaveTextureStageState

; 57   : 	STATEMANAGER.SaveTextureStageState(0, D3DTSS_ADDRESSV, D3DTADDRESS_WRAP);

  001b0	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  001b6	6a 01		 push	 1
  001b8	6a 0e		 push	 14			; 0000000eH
  001ba	6a 00		 push	 0
  001bc	e8 00 00 00 00	 call	 ?SaveTextureStageState@CStateManager@@QAEXKW4_D3DTEXTURESTAGESTATETYPE@@K@Z ; CStateManager::SaveTextureStageState

; 58   : 
; 59   : 	STATEMANAGER.SetTextureStageState(0, D3DTSS_COLORARG1, D3DTA_TEXTURE);

  001c1	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  001c7	6a 02		 push	 2
  001c9	6a 02		 push	 2
  001cb	6a 00		 push	 0
  001cd	e8 00 00 00 00	 call	 ?SetTextureStageState@CStateManager@@QAEXKW4_D3DTEXTURESTAGESTATETYPE@@K@Z ; CStateManager::SetTextureStageState

; 60   : 	STATEMANAGER.SetTextureStageState(0, D3DTSS_COLOROP, D3DTOP_SELECTARG1);

  001d2	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  001d8	6a 02		 push	 2
  001da	6a 01		 push	 1
  001dc	6a 00		 push	 0
  001de	e8 00 00 00 00	 call	 ?SetTextureStageState@CStateManager@@QAEXKW4_D3DTEXTURESTAGESTATETYPE@@K@Z ; CStateManager::SetTextureStageState

; 61   : 	STATEMANAGER.SetTextureStageState(0, D3DTSS_ALPHAARG1, D3DTA_DIFFUSE);

  001e3	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  001e9	6a 00		 push	 0
  001eb	6a 05		 push	 5
  001ed	6a 00		 push	 0
  001ef	e8 00 00 00 00	 call	 ?SetTextureStageState@CStateManager@@QAEXKW4_D3DTEXTURESTAGESTATETYPE@@K@Z ; CStateManager::SetTextureStageState

; 62   : 	STATEMANAGER.SetTextureStageState(0, D3DTSS_ALPHAOP, D3DTOP_SELECTARG1);

  001f4	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  001fa	6a 02		 push	 2
  001fc	6a 04		 push	 4
  001fe	6a 00		 push	 0
  00200	e8 00 00 00 00	 call	 ?SetTextureStageState@CStateManager@@QAEXKW4_D3DTEXTURESTAGESTATETYPE@@K@Z ; CStateManager::SetTextureStageState

; 63   : 
; 64   : 
; 65   : 	STATEMANAGER.SetTexture(1,NULL);

  00205	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  0020b	6a 00		 push	 0
  0020d	6a 01		 push	 1
  0020f	e8 00 00 00 00	 call	 ?SetTexture@CStateManager@@QAEXKPAUIDirect3DBaseTexture8@@@Z ; CStateManager::SetTexture

; 66   : 	STATEMANAGER.SetTextureStageState(1, D3DTSS_COLOROP, D3DTOP_DISABLE);

  00214	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  0021a	6a 01		 push	 1
  0021c	6a 01		 push	 1
  0021e	6a 01		 push	 1
  00220	e8 00 00 00 00	 call	 ?SetTextureStageState@CStateManager@@QAEXKW4_D3DTEXTURESTAGESTATETYPE@@K@Z ; CStateManager::SetTextureStageState

; 67   : 	STATEMANAGER.SetTextureStageState(1, D3DTSS_ALPHAOP, D3DTOP_DISABLE);

  00225	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  0022b	6a 01		 push	 1
  0022d	6a 04		 push	 4
  0022f	6a 01		 push	 1
  00231	e8 00 00 00 00	 call	 ?SetTextureStageState@CStateManager@@QAEXKW4_D3DTEXTURESTAGESTATETYPE@@K@Z ; CStateManager::SetTextureStageState

; 68   : 
; 69   : 	// RenderState
; 70   : 	//////////////////////////////////////////////////////////////////////////
; 71   : 
; 72   : 	static float s_fWaterHeightCurrent = 0;
; 73   : 	static float s_fWaterHeightBegin = 0;
; 74   : 	static float s_fWaterHeightEnd = 0;
; 75   : 	static DWORD s_dwLastHeightChangeTime = CTimer::Instance().GetCurrentMillisecond();

  00236	64 a1 00 00 00
	00		 mov	 eax, DWORD PTR fs:__tls_array
  0023c	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR __tls_index
  00242	8b 0c 88	 mov	 ecx, DWORD PTR [eax+ecx*4]
  00245	a1 00 00 00 00	 mov	 eax, DWORD PTR ?$TSS0@?1??RenderWater@CMapOutdoor@@QAEXXZ@4HA
  0024a	3b 81 00 00 00
	00		 cmp	 eax, DWORD PTR __Init_thread_epoch[ecx]
  00250	0f 8f af 02 00
	00		 jg	 $LN82@RenderWate
$LN2@RenderWate:

; 76   : 	static DWORD s_dwBlendtime = 300;
; 77   : 
; 78   : 	if ((CTimer::Instance().GetCurrentMillisecond() - s_dwLastHeightChangeTime) > s_dwBlendtime)

  00256	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCTimer@@@@0PAVCTimer@@A ; CSingleton<CTimer>::ms_singleton
  0025c	e8 00 00 00 00	 call	 ?GetCurrentMillisecond@CTimer@@QAEKXZ ; CTimer::GetCurrentMillisecond
  00261	2b 05 00 00 00
	00		 sub	 eax, DWORD PTR ?s_dwLastHeightChangeTime@?1??RenderWater@CMapOutdoor@@QAEXXZ@4KA
  00267	3b 05 00 00 00
	00		 cmp	 eax, DWORD PTR ?s_dwBlendtime@?1??RenderWater@CMapOutdoor@@QAEXXZ@4KA
  0026d	76 6e		 jbe	 SHORT $LN11@RenderWate

; 79   : 	{
; 80   : 		s_dwBlendtime = random_range(1000, 3000);

  0026f	68 b8 0b 00 00	 push	 3000			; 00000bb8H
  00274	68 e8 03 00 00	 push	 1000			; 000003e8H
  00279	e8 00 00 00 00	 call	 ?random_range@@YAJJJ@Z	; random_range

; 81   : 
; 82   : 		if (s_fWaterHeightEnd == 0)

  0027e	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR ?s_fWaterHeightEnd@?1??RenderWater@CMapOutdoor@@QAEXXZ@4MA
  00286	83 c4 08	 add	 esp, 8
  00289	0f 2e 05 00 00
	00 00		 ucomiss xmm0, DWORD PTR __real@00000000
  00290	a3 00 00 00 00	 mov	 DWORD PTR ?s_dwBlendtime@?1??RenderWater@CMapOutdoor@@QAEXXZ@4KA, eax
  00295	9f		 lahf
  00296	f6 c4 44	 test	 ah, 68			; 00000044H
  00299	7a 17		 jp	 SHORT $LN12@RenderWate

; 83   : 			s_fWaterHeightEnd = -random_range(0, 15);

  0029b	6a 0f		 push	 15			; 0000000fH
  0029d	6a 00		 push	 0
  0029f	e8 00 00 00 00	 call	 ?random_range@@YAJJJ@Z	; random_range
  002a4	83 c4 08	 add	 esp, 8
  002a7	f7 d8		 neg	 eax
  002a9	66 0f 6e c0	 movd	 xmm0, eax
  002ad	0f 5b c0	 cvtdq2ps xmm0, xmm0
  002b0	eb 03		 jmp	 SHORT $LN13@RenderWate
$LN12@RenderWate:
  002b2	0f 57 c0	 xorps	 xmm0, xmm0
$LN13@RenderWate:

; 84   : 		else
; 85   : 			s_fWaterHeightEnd = 0;
; 86   : 
; 87   : 		s_fWaterHeightBegin = s_fWaterHeightCurrent;
; 88   : 		s_dwLastHeightChangeTime = CTimer::Instance().GetCurrentMillisecond();

  002b5	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCTimer@@@@0PAVCTimer@@A ; CSingleton<CTimer>::ms_singleton
  002bb	f3 0f 11 05 00
	00 00 00	 movss	 DWORD PTR ?s_fWaterHeightEnd@?1??RenderWater@CMapOutdoor@@QAEXXZ@4MA, xmm0
  002c3	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR ?s_fWaterHeightCurrent@?1??RenderWater@CMapOutdoor@@QAEXXZ@4MA
  002cb	f3 0f 11 05 00
	00 00 00	 movss	 DWORD PTR ?s_fWaterHeightBegin@?1??RenderWater@CMapOutdoor@@QAEXXZ@4MA, xmm0
  002d3	e8 00 00 00 00	 call	 ?GetCurrentMillisecond@CTimer@@QAEKXZ ; CTimer::GetCurrentMillisecond
  002d8	a3 00 00 00 00	 mov	 DWORD PTR ?s_dwLastHeightChangeTime@?1??RenderWater@CMapOutdoor@@QAEXXZ@4KA, eax
$LN11@RenderWate:

; 89   : 	}
; 90   : 
; 91   : 	s_fWaterHeightCurrent = s_fWaterHeightBegin + (s_fWaterHeightEnd - s_fWaterHeightBegin) * (float) ((CTimer::Instance().GetCurrentMillisecond() - s_dwLastHeightChangeTime) / (float) s_dwBlendtime);

  002dd	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCTimer@@@@0PAVCTimer@@A ; CSingleton<CTimer>::ms_singleton
  002e3	e8 00 00 00 00	 call	 ?GetCurrentMillisecond@CTimer@@QAEKXZ ; CTimer::GetCurrentMillisecond
  002e8	2b 05 00 00 00
	00		 sub	 eax, DWORD PTR ?s_dwLastHeightChangeTime@?1??RenderWater@CMapOutdoor@@QAEXXZ@4KA

; 92   : 	m_matWorldForCommonUse._43 = s_fWaterHeightCurrent;
; 93   : 
; 94   : 	m_matWorldForCommonUse._41 = 0.0f;

  002ee	c7 87 78 07 00
	00 00 00 00 00	 mov	 DWORD PTR [edi+1912], 0

; 95   : 	m_matWorldForCommonUse._42 = 0.0f;

  002f8	c7 87 7c 07 00
	00 00 00 00 00	 mov	 DWORD PTR [edi+1916], 0
  00302	66 0f 6e c0	 movd	 xmm0, eax
  00306	f3 0f e6 c0	 cvtdq2pd xmm0, xmm0
  0030a	c1 e8 1f	 shr	 eax, 31			; 0000001fH
  0030d	f2 0f 58 04 c5
	00 00 00 00	 addsd	 xmm0, QWORD PTR __xmm@41f00000000000000000000000000000[eax*8]
  00316	a1 00 00 00 00	 mov	 eax, DWORD PTR ?s_dwBlendtime@?1??RenderWater@CMapOutdoor@@QAEXXZ@4KA
  0031b	66 0f 5a d0	 cvtpd2ps xmm2, xmm0
  0031f	66 0f 6e c0	 movd	 xmm0, eax
  00323	f3 0f e6 c0	 cvtdq2pd xmm0, xmm0
  00327	c1 e8 1f	 shr	 eax, 31			; 0000001fH
  0032a	f2 0f 58 04 c5
	00 00 00 00	 addsd	 xmm0, QWORD PTR __xmm@41f00000000000000000000000000000[eax*8]

; 96   : 	STATEMANAGER.SetTransform(D3DTS_WORLD, &m_matWorldForCommonUse);

  00333	8d 87 48 07 00
	00		 lea	 eax, DWORD PTR [edi+1864]
  00339	50		 push	 eax
  0033a	68 00 01 00 00	 push	 256			; 00000100H
  0033f	66 0f 5a c0	 cvtpd2ps xmm0, xmm0
  00343	f3 0f 5e d0	 divss	 xmm2, xmm0
  00347	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR ?s_fWaterHeightEnd@?1??RenderWater@CMapOutdoor@@QAEXXZ@4MA
  0034f	f3 0f 5c 05 00
	00 00 00	 subss	 xmm0, DWORD PTR ?s_fWaterHeightBegin@?1??RenderWater@CMapOutdoor@@QAEXXZ@4MA
  00357	f3 0f 59 d0	 mulss	 xmm2, xmm0
  0035b	f3 0f 58 15 00
	00 00 00	 addss	 xmm2, DWORD PTR ?s_fWaterHeightBegin@?1??RenderWater@CMapOutdoor@@QAEXXZ@4MA
  00363	f3 0f 11 97 80
	07 00 00	 movss	 DWORD PTR [edi+1920], xmm2
  0036b	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  00371	f3 0f 11 15 00
	00 00 00	 movss	 DWORD PTR ?s_fWaterHeightCurrent@?1??RenderWater@CMapOutdoor@@QAEXXZ@4MA, xmm2
  00379	e8 00 00 00 00	 call	 ?SetTransform@CStateManager@@QAEXW4_D3DTRANSFORMSTATETYPE@@PBU_D3DMATRIX@@@Z ; CStateManager::SetTransform

; 98   : 	float fFogDistance = __GetFogDistance();

  0037e	8b cf		 mov	 ecx, edi
  00380	e8 00 00 00 00	 call	 ?__GetFogDistance@CMapOutdoor@@IAEMXZ ; CMapOutdoor::__GetFogDistance
; File C:\Program Files (x86)\Microsoft Visual Studio\2019\Community\VC\Tools\MSVC\14.27.29110\include\vector

; 42   :     _Vector_const_iterator(_Tptr _Parg, const _Container_base* _Pvector) noexcept : _Ptr(_Parg) {

  00385	8b b7 18 01 00
	00		 mov	 esi, DWORD PTR [edi+280]
; File C:\DS Project\DS Files\Source\ClientSource\Client\GameLib\MapOutdoorWater.cpp

; 98   : 	float fFogDistance = __GetFogDistance();

  0038b	d9 5d ac	 fstp	 DWORD PTR _fFogDistance$[ebp]
; File C:\Program Files (x86)\Microsoft Visual Studio\2019\Community\VC\Tools\MSVC\14.27.29110\include\vector

; 42   :     _Vector_const_iterator(_Tptr _Parg, const _Container_base* _Pvector) noexcept : _Ptr(_Parg) {

  0038e	3b b7 1c 01 00
	00		 cmp	 esi, DWORD PTR [edi+284]
; File C:\DS Project\DS Files\Source\ClientSource\Client\GameLib\MapOutdoorWater.cpp

; 102  : 	for(i = m_PatchVector.begin();i != m_PatchVector.end(); ++i)

  00394	74 28		 je	 SHORT $LN4@RenderWate
$LL5@RenderWate:
; File C:\Program Files (x86)\Microsoft Visual Studio\2019\Community\VC\Tools\MSVC\14.27.29110\include\vector

; 256  :         return _Const_cast(_Mybase::operator->());

  00396	56		 push	 esi
  00397	e8 00 00 00 00	 call	 ??$_Const_cast@$$CBU?$pair@MJ@std@@@std@@YAPAU?$pair@MJ@0@PBU10@@Z ; std::_Const_cast<std::pair<float,long> const >
; File C:\DS Project\DS Files\Source\ClientSource\Client\GameLib\MapOutdoorWater.cpp

; 104  : 		if (i->first<fFogDistance)

  0039c	f3 0f 10 45 ac	 movss	 xmm0, DWORD PTR _fFogDistance$[ebp]
; File C:\Program Files (x86)\Microsoft Visual Studio\2019\Community\VC\Tools\MSVC\14.27.29110\include\vector

; 256  :         return _Const_cast(_Mybase::operator->());

  003a1	83 c4 04	 add	 esp, 4
; File C:\DS Project\DS Files\Source\ClientSource\Client\GameLib\MapOutdoorWater.cpp

; 104  : 		if (i->first<fFogDistance)

  003a4	0f 2f 00	 comiss	 xmm0, DWORD PTR [eax]
  003a7	76 0a		 jbe	 SHORT $LN3@RenderWate

; 105  : 			DrawWater(i->second);

  003a9	ff 70 04	 push	 DWORD PTR [eax+4]
  003ac	8b cf		 mov	 ecx, edi
  003ae	e8 00 00 00 00	 call	 ?DrawWater@CMapOutdoor@@IAEXJ@Z ; CMapOutdoor::DrawWater
$LN3@RenderWate:
; File C:\Program Files (x86)\Microsoft Visual Studio\2019\Community\VC\Tools\MSVC\14.27.29110\include\vector

; 75   :         ++_Ptr;

  003b3	83 c6 08	 add	 esi, 8

; 149  :         return _Ptr == _Right._Ptr;

  003b6	3b b7 1c 01 00
	00		 cmp	 esi, DWORD PTR [edi+284]
; File C:\DS Project\DS Files\Source\ClientSource\Client\GameLib\MapOutdoorWater.cpp

; 102  : 	for(i = m_PatchVector.begin();i != m_PatchVector.end(); ++i)

  003bc	75 d8		 jne	 SHORT $LL5@RenderWate
$LN4@RenderWate:

; 106  : 	}
; 107  : 
; 108  : 	STATEMANAGER.SetTexture(0, NULL);

  003be	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  003c4	6a 00		 push	 0
  003c6	6a 00		 push	 0
  003c8	e8 00 00 00 00	 call	 ?SetTexture@CStateManager@@QAEXKPAUIDirect3DBaseTexture8@@@Z ; CStateManager::SetTexture

; 109  : 	STATEMANAGER.SetRenderState(D3DRS_ALPHABLENDENABLE, FALSE);

  003cd	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  003d3	6a 00		 push	 0
  003d5	6a 1b		 push	 27			; 0000001bH
  003d7	e8 00 00 00 00	 call	 ?SetRenderState@CStateManager@@QAEXW4_D3DRENDERSTATETYPE@@K@Z ; CStateManager::SetRenderState
; File C:\Program Files (x86)\Microsoft Visual Studio\2019\Community\VC\Tools\MSVC\14.27.29110\include\vector

; 42   :     _Vector_const_iterator(_Tptr _Parg, const _Container_base* _Pvector) noexcept : _Ptr(_Parg) {

  003dc	8b b7 18 01 00
	00		 mov	 esi, DWORD PTR [edi+280]
  003e2	3b b7 1c 01 00
	00		 cmp	 esi, DWORD PTR [edi+284]
; File C:\DS Project\DS Files\Source\ClientSource\Client\GameLib\MapOutdoorWater.cpp

; 111  : 	for(i = m_PatchVector.begin();i != m_PatchVector.end(); ++i)

  003e8	74 2e		 je	 SHORT $LN7@RenderWate
  003ea	66 0f 1f 44 00
	00		 npad	 6
$LL8@RenderWate:
; File C:\Program Files (x86)\Microsoft Visual Studio\2019\Community\VC\Tools\MSVC\14.27.29110\include\vector

; 256  :         return _Const_cast(_Mybase::operator->());

  003f0	56		 push	 esi
  003f1	e8 00 00 00 00	 call	 ??$_Const_cast@$$CBU?$pair@MJ@std@@@std@@YAPAU?$pair@MJ@0@PBU10@@Z ; std::_Const_cast<std::pair<float,long> const >
  003f6	83 c4 04	 add	 esp, 4
; File C:\DS Project\DS Files\Source\ClientSource\Client\GameLib\MapOutdoorWater.cpp

; 113  : 		if (i->first>=fFogDistance)

  003f9	f3 0f 10 00	 movss	 xmm0, DWORD PTR [eax]
  003fd	0f 2f 45 ac	 comiss	 xmm0, DWORD PTR _fFogDistance$[ebp]
  00401	72 0a		 jb	 SHORT $LN6@RenderWate

; 114  : 			DrawWater(i->second);

  00403	ff 70 04	 push	 DWORD PTR [eax+4]
  00406	8b cf		 mov	 ecx, edi
  00408	e8 00 00 00 00	 call	 ?DrawWater@CMapOutdoor@@IAEXJ@Z ; CMapOutdoor::DrawWater
$LN6@RenderWate:
; File C:\Program Files (x86)\Microsoft Visual Studio\2019\Community\VC\Tools\MSVC\14.27.29110\include\vector

; 75   :         ++_Ptr;

  0040d	83 c6 08	 add	 esi, 8

; 149  :         return _Ptr == _Right._Ptr;

  00410	3b b7 1c 01 00
	00		 cmp	 esi, DWORD PTR [edi+284]
; File C:\DS Project\DS Files\Source\ClientSource\Client\GameLib\MapOutdoorWater.cpp

; 111  : 	for(i = m_PatchVector.begin();i != m_PatchVector.end(); ++i)

  00416	75 d8		 jne	 SHORT $LL8@RenderWate
$LN7@RenderWate:

; 115  : 	}
; 116  : 
; 117  : 	m_matWorldForCommonUse._43 = 0.0f;

  00418	c7 87 80 07 00
	00 00 00 00 00	 mov	 DWORD PTR [edi+1920], 0

; 118  : 
; 119  : 	//////////////////////////////////////////////////////////////////////////
; 120  : 	// RenderState
; 121  : 	STATEMANAGER.RestoreVertexShader();

  00422	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  00428	e8 00 00 00 00	 call	 ?RestoreVertexShader@CStateManager@@QAEXXZ ; CStateManager::RestoreVertexShader

; 122  : 	STATEMANAGER.RestoreTransform(D3DTS_TEXTURE0);

  0042d	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  00433	6a 10		 push	 16			; 00000010H
  00435	e8 00 00 00 00	 call	 ?RestoreTransform@CStateManager@@QAEXW4_D3DTRANSFORMSTATETYPE@@@Z ; CStateManager::RestoreTransform

; 123  : 	STATEMANAGER.RestoreTextureStageState(0, D3DTSS_MINFILTER);

  0043a	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  00440	6a 11		 push	 17			; 00000011H
  00442	6a 00		 push	 0
  00444	e8 00 00 00 00	 call	 ?RestoreTextureStageState@CStateManager@@QAEXKW4_D3DTEXTURESTAGESTATETYPE@@@Z ; CStateManager::RestoreTextureStageState

; 124  : 	STATEMANAGER.RestoreTextureStageState(0, D3DTSS_MAGFILTER);

  00449	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  0044f	6a 10		 push	 16			; 00000010H
  00451	6a 00		 push	 0
  00453	e8 00 00 00 00	 call	 ?RestoreTextureStageState@CStateManager@@QAEXKW4_D3DTEXTURESTAGESTATETYPE@@@Z ; CStateManager::RestoreTextureStageState

; 125  : 	STATEMANAGER.RestoreTextureStageState(0, D3DTSS_MIPFILTER);

  00458	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  0045e	6a 12		 push	 18			; 00000012H
  00460	6a 00		 push	 0
  00462	e8 00 00 00 00	 call	 ?RestoreTextureStageState@CStateManager@@QAEXKW4_D3DTEXTURESTAGESTATETYPE@@@Z ; CStateManager::RestoreTextureStageState

; 126  : 	STATEMANAGER.RestoreTextureStageState(0, D3DTSS_ADDRESSU);

  00467	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  0046d	6a 0d		 push	 13			; 0000000dH
  0046f	6a 00		 push	 0
  00471	e8 00 00 00 00	 call	 ?RestoreTextureStageState@CStateManager@@QAEXKW4_D3DTEXTURESTAGESTATETYPE@@@Z ; CStateManager::RestoreTextureStageState

; 127  : 	STATEMANAGER.RestoreTextureStageState(0, D3DTSS_ADDRESSV);

  00476	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  0047c	6a 0e		 push	 14			; 0000000eH
  0047e	6a 00		 push	 0
  00480	e8 00 00 00 00	 call	 ?RestoreTextureStageState@CStateManager@@QAEXKW4_D3DTEXTURESTAGESTATETYPE@@@Z ; CStateManager::RestoreTextureStageState

; 128  : 	STATEMANAGER.RestoreTextureStageState(0, D3DTSS_TEXCOORDINDEX);

  00485	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  0048b	6a 0b		 push	 11			; 0000000bH
  0048d	6a 00		 push	 0
  0048f	e8 00 00 00 00	 call	 ?RestoreTextureStageState@CStateManager@@QAEXKW4_D3DTEXTURESTAGESTATETYPE@@@Z ; CStateManager::RestoreTextureStageState

; 129  : 	STATEMANAGER.RestoreTextureStageState(0, D3DTSS_TEXTURETRANSFORMFLAGS);

  00494	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  0049a	6a 18		 push	 24			; 00000018H
  0049c	6a 00		 push	 0
  0049e	e8 00 00 00 00	 call	 ?RestoreTextureStageState@CStateManager@@QAEXKW4_D3DTEXTURESTAGESTATETYPE@@@Z ; CStateManager::RestoreTextureStageState

; 130  : 
; 131  : 	STATEMANAGER.RestoreRenderState(D3DRS_DIFFUSEMATERIALSOURCE);

  004a3	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  004a9	68 91 00 00 00	 push	 145			; 00000091H
  004ae	e8 00 00 00 00	 call	 ?RestoreRenderState@CStateManager@@QAEXW4_D3DRENDERSTATETYPE@@@Z ; CStateManager::RestoreRenderState

; 132  : 	STATEMANAGER.RestoreRenderState(D3DRS_COLORVERTEX);

  004b3	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  004b9	68 8d 00 00 00	 push	 141			; 0000008dH
  004be	e8 00 00 00 00	 call	 ?RestoreRenderState@CStateManager@@QAEXW4_D3DRENDERSTATETYPE@@@Z ; CStateManager::RestoreRenderState

; 133  : 	STATEMANAGER.RestoreRenderState(D3DRS_ZWRITEENABLE);

  004c3	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  004c9	6a 0e		 push	 14			; 0000000eH
  004cb	e8 00 00 00 00	 call	 ?RestoreRenderState@CStateManager@@QAEXW4_D3DRENDERSTATETYPE@@@Z ; CStateManager::RestoreRenderState

; 134  : 	STATEMANAGER.RestoreRenderState(D3DRS_ALPHABLENDENABLE);

  004d0	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  004d6	6a 1b		 push	 27			; 0000001bH
  004d8	e8 00 00 00 00	 call	 ?RestoreRenderState@CStateManager@@QAEXW4_D3DRENDERSTATETYPE@@@Z ; CStateManager::RestoreRenderState

; 135  : 	STATEMANAGER.RestoreRenderState(D3DRS_CULLMODE);

  004dd	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  004e3	6a 16		 push	 22			; 00000016H
  004e5	e8 00 00 00 00	 call	 ?RestoreRenderState@CStateManager@@QAEXW4_D3DRENDERSTATETYPE@@@Z ; CStateManager::RestoreRenderState
$LN1@RenderWate:

; 136  : }

  004ea	8b 4d f4	 mov	 ecx, DWORD PTR __$EHRec$[ebp]
  004ed	64 89 0d 00 00
	00 00		 mov	 DWORD PTR fs:0, ecx
  004f4	59		 pop	 ecx
  004f5	5f		 pop	 edi
  004f6	5e		 pop	 esi
  004f7	8b 4d f0	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  004fa	33 cd		 xor	 ecx, ebp
  004fc	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00501	8b e5		 mov	 esp, ebp
  00503	5d		 pop	 ebp
  00504	c3		 ret	 0
$LN82@RenderWate:

; 68   : 
; 69   : 	// RenderState
; 70   : 	//////////////////////////////////////////////////////////////////////////
; 71   : 
; 72   : 	static float s_fWaterHeightCurrent = 0;
; 73   : 	static float s_fWaterHeightBegin = 0;
; 74   : 	static float s_fWaterHeightEnd = 0;
; 75   : 	static DWORD s_dwLastHeightChangeTime = CTimer::Instance().GetCurrentMillisecond();

  00505	68 00 00 00 00	 push	 OFFSET ?$TSS0@?1??RenderWater@CMapOutdoor@@QAEXXZ@4HA
  0050a	e8 00 00 00 00	 call	 __Init_thread_header
  0050f	83 c4 04	 add	 esp, 4
  00512	83 3d 00 00 00
	00 ff		 cmp	 DWORD PTR ?$TSS0@?1??RenderWater@CMapOutdoor@@QAEXXZ@4HA, -1
  00519	0f 85 37 fd ff
	ff		 jne	 $LN2@RenderWate
  0051f	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCTimer@@@@0PAVCTimer@@A ; CSingleton<CTimer>::ms_singleton
  00525	c7 45 fc 00 00
	00 00		 mov	 DWORD PTR __$EHRec$[ebp+8], 0
  0052c	e8 00 00 00 00	 call	 ?GetCurrentMillisecond@CTimer@@QAEKXZ ; CTimer::GetCurrentMillisecond
  00531	68 00 00 00 00	 push	 OFFSET ?$TSS0@?1??RenderWater@CMapOutdoor@@QAEXXZ@4HA
  00536	a3 00 00 00 00	 mov	 DWORD PTR ?s_dwLastHeightChangeTime@?1??RenderWater@CMapOutdoor@@QAEXXZ@4KA, eax
  0053b	c7 45 fc ff ff
	ff ff		 mov	 DWORD PTR __$EHRec$[ebp+8], -1
  00542	e8 00 00 00 00	 call	 __Init_thread_footer
  00547	83 c4 04	 add	 esp, 4
  0054a	e9 07 fd ff ff	 jmp	 $LN2@RenderWate
_TEXT	ENDS
;	COMDAT text$x
text$x	SEGMENT
__unwindfunclet$?RenderWater@CMapOutdoor@@QAEXXZ$0:
  00000	68 00 00 00 00	 push	 OFFSET ?$TSS0@?1??RenderWater@CMapOutdoor@@QAEXXZ@4HA
  00005	e8 00 00 00 00	 call	 __Init_thread_abort
  0000a	59		 pop	 ecx
  0000b	c3		 ret	 0
  0000c	cc		 int	 3
  0000d	cc		 int	 3
  0000e	cc		 int	 3
  0000f	cc		 int	 3
  00010	cc		 int	 3
__ehhandler$?RenderWater@CMapOutdoor@@QAEXXZ:
  00011	90		 npad	 1
  00012	90		 npad	 1
  00013	8b 54 24 08	 mov	 edx, DWORD PTR [esp+8]
  00017	8d 42 0c	 lea	 eax, DWORD PTR [edx+12]
  0001a	8b 4a ac	 mov	 ecx, DWORD PTR [edx-84]
  0001d	33 c8		 xor	 ecx, eax
  0001f	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00024	8b 4a fc	 mov	 ecx, DWORD PTR [edx-4]
  00027	33 c8		 xor	 ecx, eax
  00029	e8 00 00 00 00	 call	 @__security_check_cookie@4
  0002e	b8 00 00 00 00	 mov	 eax, OFFSET __ehfuncinfo$?RenderWater@CMapOutdoor@@QAEXXZ
  00033	e9 00 00 00 00	 jmp	 ___CxxFrameHandler3
text$x	ENDS
?RenderWater@CMapOutdoor@@QAEXXZ ENDP			; CMapOutdoor::RenderWater
; Function compile flags: /Ogtp
; File C:\DS Project\DS Files\Source\ClientSource\extern\include\d3dx8math.h
;	COMDAT ??0D3DXMATRIX@@QAE@XZ
_TEXT	SEGMENT
??0D3DXMATRIX@@QAE@XZ PROC				; D3DXMATRIX::D3DXMATRIX, COMDAT
; _this$ = ecx

; 177  :     D3DXMATRIX() {};

  00000	8b c1		 mov	 eax, ecx
  00002	c3		 ret	 0
??0D3DXMATRIX@@QAE@XZ ENDP				; D3DXMATRIX::D3DXMATRIX
_TEXT	ENDS
; Function compile flags: /Ogtp
; File C:\Program Files (x86)\Windows Kits\10\Include\10.0.18362.0\ucrt\stdio.h
;	COMDAT _sprintf
_TEXT	SEGMENT
__Buffer$ = 8						; size = 4
__Format$ = 12						; size = 4
_sprintf PROC						; COMDAT

; 1781 :     {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 1390 :         int const _Result = __stdio_common_vsprintf(

  00003	8d 45 10	 lea	 eax, DWORD PTR __Format$[ebp+4]
  00006	50		 push	 eax
  00007	6a 00		 push	 0
  00009	ff 75 0c	 push	 DWORD PTR __Format$[ebp]
  0000c	6a ff		 push	 -1
  0000e	ff 75 08	 push	 DWORD PTR __Buffer$[ebp]
  00011	e8 00 00 00 00	 call	 ___local_stdio_printf_options
  00016	8b 08		 mov	 ecx, DWORD PTR [eax]
  00018	ff 70 04	 push	 DWORD PTR [eax+4]
  0001b	83 c9 01	 or	 ecx, 1
  0001e	51		 push	 ecx
  0001f	e8 00 00 00 00	 call	 ___stdio_common_vsprintf

; 1391 :             _CRT_INTERNAL_LOCAL_PRINTF_OPTIONS | _CRT_INTERNAL_PRINTF_LEGACY_VSPRINTF_NULL_TERMINATION,
; 1392 :             _Buffer, _BufferCount, _Format, _Locale, _ArgList);
; 1393 : 
; 1394 :         return _Result < 0 ? -1 : _Result;

  00024	83 c9 ff	 or	 ecx, -1
  00027	83 c4 1c	 add	 esp, 28			; 0000001cH
  0002a	85 c0		 test	 eax, eax
  0002c	0f 48 c1	 cmovs	 eax, ecx

; 1782 :         int _Result;
; 1783 :         va_list _ArgList;
; 1784 :         __crt_va_start(_ArgList, _Format);
; 1785 : 
; 1786 :         #pragma warning(push)
; 1787 :         #pragma warning(disable: 4996) // Deprecation
; 1788 :         _Result = _vsprintf_l(_Buffer, _Format, NULL, _ArgList);
; 1789 :         #pragma warning(pop)
; 1790 : 
; 1791 :         __crt_va_end(_ArgList);
; 1792 :         return _Result;
; 1793 :     }

  0002f	5d		 pop	 ebp
  00030	c3		 ret	 0
_sprintf ENDP
_TEXT	ENDS
; Function compile flags: /Ogtp
; File C:\Program Files (x86)\Windows Kits\10\Include\10.0.18362.0\ucrt\corecrt_stdio_config.h
;	COMDAT ___local_stdio_printf_options
_TEXT	SEGMENT
___local_stdio_printf_options PROC			; COMDAT

; 87   :         static unsigned __int64 _OptionsStorage;
; 88   :         return &_OptionsStorage;

  00000	b8 00 00 00 00	 mov	 eax, OFFSET ?_OptionsStorage@?1??__local_stdio_printf_options@@9@4_KA ; `__local_stdio_printf_options'::`2'::_OptionsStorage

; 89   :     }

  00005	c3		 ret	 0
___local_stdio_printf_options ENDP
_TEXT	ENDS
; Function compile flags: /Ogtp
;	COMDAT ??_H@YGXPAXIIP6EPAX0@Z@Z
_TEXT	SEGMENT
___t$ = 8						; size = 4
___s$ = 12						; size = 4
___n$ = 16						; size = 4
___f$ = 20						; size = 4
??_H@YGXPAXIIP6EPAX0@Z@Z PROC				; `vector constructor iterator', COMDAT
  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	56		 push	 esi
  00004	8b 75 10	 mov	 esi, DWORD PTR ___n$[ebp]
  00007	85 f6		 test	 esi, esi
  00009	74 16		 je	 SHORT $LN6@vector
  0000b	53		 push	 ebx
  0000c	8b 5d 14	 mov	 ebx, DWORD PTR ___f$[ebp]
  0000f	57		 push	 edi
  00010	8b 7d 08	 mov	 edi, DWORD PTR ___t$[ebp]
$LL2@vector:
  00013	8b cf		 mov	 ecx, edi
  00015	ff d3		 call	 ebx
  00017	03 7d 0c	 add	 edi, DWORD PTR ___s$[ebp]
  0001a	83 ee 01	 sub	 esi, 1
  0001d	75 f4		 jne	 SHORT $LL2@vector
  0001f	5f		 pop	 edi
  00020	5b		 pop	 ebx
$LN6@vector:
  00021	5e		 pop	 esi
  00022	5d		 pop	 ebp
  00023	c2 10 00	 ret	 16			; 00000010H
??_H@YGXPAXIIP6EPAX0@Z@Z ENDP				; `vector constructor iterator'
_TEXT	ENDS
END
