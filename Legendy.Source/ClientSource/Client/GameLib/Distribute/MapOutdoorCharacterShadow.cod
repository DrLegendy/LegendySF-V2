; Listing generated by Microsoft (R) Optimizing Compiler Version 19.27.29112.0 

	TITLE	C:\DS Project\DS Files\Source\ClientSource\Client\GameLib\MapOutdoorCharacterShadow.cpp
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB LIBCMT
INCLUDELIB OLDNAMES

PUBLIC	?dwLightEnable@@3KA				; dwLightEnable
_BSS	SEGMENT
?dwLightEnable@@3KA DD 01H DUP (?)			; dwLightEnable
_BSS	ENDS
PUBLIC	??_H@YGXPAXIIP6EPAX0@Z@Z			; `vector constructor iterator'
PUBLIC	??0D3DXMATRIX@@QAE@XZ				; D3DXMATRIX::D3DXMATRIX
PUBLIC	?CreateCharacterShadowTexture@CMapOutdoor@@QAEXXZ ; CMapOutdoor::CreateCharacterShadowTexture
PUBLIC	?ReleaseCharacterShadowTexture@CMapOutdoor@@QAEXXZ ; CMapOutdoor::ReleaseCharacterShadowTexture
PUBLIC	?SetShadowTextureSize@CMapOutdoor@@QAEXG@Z	; CMapOutdoor::SetShadowTextureSize
PUBLIC	?BeginRenderCharacterShadowToTexture@CMapOutdoor@@QAE_NXZ ; CMapOutdoor::BeginRenderCharacterShadowToTexture
PUBLIC	?EndRenderCharacterShadowToTexture@CMapOutdoor@@QAEXXZ ; CMapOutdoor::EndRenderCharacterShadowToTexture
PUBLIC	?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
PUBLIC	?ms_singleton@?$CSingleton@VCCameraManager@@@@0PAVCCameraManager@@A ; CSingleton<CCameraManager>::ms_singleton
PUBLIC	??_C@_0CD@LDDALIJO@ShadowTextureSize?5changed?5?$CFd?5?9?$DO@ ; `string'
PUBLIC	??_C@_0EF@FIJKIKCP@CMapOutdoor?5Unable?5to?5create?5Ch@ ; `string'
PUBLIC	??_C@_0EO@LLLBCDDM@CMapOutdoor?5Unable?5to?5GetSurfac@ ; `string'
PUBLIC	??_C@_0DN@FOIDJBLJ@CMapOutdoor?5Unable?5to?5create?5Ch@ ; `string'
PUBLIC	??_C@_0FI@KOMMFBEO@CMapOutdoor?3?3BeginRenderCharact@ ; `string'
PUBLIC	??_C@_0FI@HJJEHOCK@CMapOutdoor?3?3BeginRenderCharact@ ; `string'
PUBLIC	??_C@_0FL@BICJPFM@CMapOutdoor?3?3BeginRenderCharact@ ; `string'
PUBLIC	??_C@_0FB@MDNNINIF@CMapOutdoor?3?3BeginRenderCharact@ ; `string'
PUBLIC	??_C@_0FD@NHMJOND@CMapOutdoor?3?3BeginRenderCharact@ ; `string'
PUBLIC	??_C@_0FG@DOCFFNBC@CMapOutdoor?3?3BeginRenderCharact@ ; `string'
PUBLIC	__real@449c4000
PUBLIC	__real@45075000
PUBLIC	__real@45875000
EXTRN	_D3DXMatrixLookAtRH@16:PROC
EXTRN	_D3DXMatrixOrthoRH@20:PROC
EXTRN	?Tracenf@@YAXPBDZZ:PROC				; Tracenf
EXTRN	?TraceError@@YAXPBDZZ:PROC			; TraceError
EXTRN	?IsLowTextureMemory@CGraphicBase@@SA_NXZ:PROC	; CGraphicBase::IsLowTextureMemory
EXTRN	?SaveRenderState@CStateManager@@QAEXW4_D3DRENDERSTATETYPE@@K@Z:PROC ; CStateManager::SaveRenderState
EXTRN	?RestoreRenderState@CStateManager@@QAEXW4_D3DRENDERSTATETYPE@@@Z:PROC ; CStateManager::RestoreRenderState
EXTRN	?SetRenderState@CStateManager@@QAEXW4_D3DRENDERSTATETYPE@@K@Z:PROC ; CStateManager::SetRenderState
EXTRN	?SetTextureStageState@CStateManager@@QAEXKW4_D3DTEXTURESTAGESTATETYPE@@K@Z:PROC ; CStateManager::SetTextureStageState
EXTRN	?SaveTransform@CStateManager@@QAEXW4_D3DTRANSFORMSTATETYPE@@PBU_D3DMATRIX@@@Z:PROC ; CStateManager::SaveTransform
EXTRN	?RestoreTransform@CStateManager@@QAEXW4_D3DTRANSFORMSTATETYPE@@@Z:PROC ; CStateManager::RestoreTransform
EXTRN	?GetRenderState@CStateManager@@QAEKW4_D3DRENDERSTATETYPE@@@Z:PROC ; CStateManager::GetRenderState
EXTRN	?GetCurrentCamera@CCameraManager@@QAEPAVCCamera@@XZ:PROC ; CCameraManager::GetCurrentCamera
EXTRN	@__security_check_cookie@4:PROC
EXTRN	?ms_lpd3dDevice@CGraphicBase@@1PAUIDirect3DDevice8@@A:DWORD ; CGraphicBase::ms_lpd3dDevice
EXTRN	?GRAPHICS_CAPS_CAN_NOT_DRAW_SHADOW@@3_NA:BYTE	; GRAPHICS_CAPS_CAN_NOT_DRAW_SHADOW
EXTRN	___security_cookie:DWORD
EXTRN	__fltused:DWORD
;	COMDAT ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A
_BSS	SEGMENT
?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A DD 01H DUP (?) ; CSingleton<CStateManager>::ms_singleton
_BSS	ENDS
;	COMDAT ?ms_singleton@?$CSingleton@VCCameraManager@@@@0PAVCCameraManager@@A
_BSS	SEGMENT
?ms_singleton@?$CSingleton@VCCameraManager@@@@0PAVCCameraManager@@A DD 01H DUP (?) ; CSingleton<CCameraManager>::ms_singleton
_BSS	ENDS
_BSS	SEGMENT
?recreate@@3HA DD 01H DUP (?)				; recreate
_BSS	ENDS
;	COMDAT __real@45875000
CONST	SEGMENT
__real@45875000 DD 045875000r			; 4330
CONST	ENDS
;	COMDAT __real@45075000
CONST	SEGMENT
__real@45075000 DD 045075000r			; 2165
CONST	ENDS
;	COMDAT __real@449c4000
CONST	SEGMENT
__real@449c4000 DD 0449c4000r			; 1250
CONST	ENDS
;	COMDAT ??_C@_0FG@DOCFFNBC@CMapOutdoor?3?3BeginRenderCharact@
CONST	SEGMENT
??_C@_0FG@DOCFFNBC@CMapOutdoor?3?3BeginRenderCharact@ DB 'CMapOutdoor::Be'
	DB	'ginRenderCharacterShadowToTexture : Unable to Set Shadow Map '
	DB	'viewport', 0aH, 00H				; `string'
CONST	ENDS
;	COMDAT ??_C@_0FD@NHMJOND@CMapOutdoor?3?3BeginRenderCharact@
CONST	SEGMENT
??_C@_0FD@NHMJOND@CMapOutdoor?3?3BeginRenderCharact@ DB 'CMapOutdoor::Beg'
	DB	'inRenderCharacterShadowToTexture : Unable to Save Window View'
	DB	'port', 0aH, 00H				; `string'
CONST	ENDS
;	COMDAT ??_C@_0FB@MDNNINIF@CMapOutdoor?3?3BeginRenderCharact@
CONST	SEGMENT
??_C@_0FB@MDNNINIF@CMapOutdoor?3?3BeginRenderCharact@ DB 'CMapOutdoor::Be'
	DB	'ginRenderCharacterShadowToTexture : Unable to Clear Render Ta'
	DB	'rget', 00H					; `string'
CONST	ENDS
;	COMDAT ??_C@_0FL@BICJPFM@CMapOutdoor?3?3BeginRenderCharact@
CONST	SEGMENT
??_C@_0FL@BICJPFM@CMapOutdoor?3?3BeginRenderCharact@ DB 'CMapOutdoor::Beg'
	DB	'inRenderCharacterShadowToTexture : Unable to Set Shadow Map R'
	DB	'ender Target', 0aH, 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_0FI@HJJEHOCK@CMapOutdoor?3?3BeginRenderCharact@
CONST	SEGMENT
??_C@_0FI@HJJEHOCK@CMapOutdoor?3?3BeginRenderCharact@ DB 'CMapOutdoor::Be'
	DB	'ginRenderCharacterShadowToTexture : Unable to Save Window Dep'
	DB	'th Surface', 0aH, 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_0FI@KOMMFBEO@CMapOutdoor?3?3BeginRenderCharact@
CONST	SEGMENT
??_C@_0FI@KOMMFBEO@CMapOutdoor?3?3BeginRenderCharact@ DB 'CMapOutdoor::Be'
	DB	'ginRenderCharacterShadowToTexture : Unable to Save Window Ren'
	DB	'der Target', 0aH, 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_0DN@FOIDJBLJ@CMapOutdoor?5Unable?5to?5create?5Ch@
CONST	SEGMENT
??_C@_0DN@FOIDJBLJ@CMapOutdoor?5Unable?5to?5create?5Ch@ DB 'CMapOutdoor U'
	DB	'nable to create Character Shadow depth Surface', 0aH, 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0EO@LLLBCDDM@CMapOutdoor?5Unable?5to?5GetSurfac@
CONST	SEGMENT
??_C@_0EO@LLLBCDDM@CMapOutdoor?5Unable?5to?5GetSurfac@ DB 'CMapOutdoor Un'
	DB	'able to GetSurfaceLevel Character Shadow render target textur'
	DB	'e', 0aH, 00H				; `string'
CONST	ENDS
;	COMDAT ??_C@_0EF@FIJKIKCP@CMapOutdoor?5Unable?5to?5create?5Ch@
CONST	SEGMENT
??_C@_0EF@FIJKIKCP@CMapOutdoor?5Unable?5to?5create?5Ch@ DB 'CMapOutdoor U'
	DB	'nable to create Character Shadow render target texture', 0aH, 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0CD@LDDALIJO@ShadowTextureSize?5changed?5?$CFd?5?9?$DO@
CONST	SEGMENT
??_C@_0CD@LDDALIJO@ShadowTextureSize?5changed?5?$CFd?5?9?$DO@ DB 'ShadowT'
	DB	'extureSize changed %d -> %d', 00H		; `string'
CONST	ENDS
; Function compile flags: /Ogtp
; File C:\DS Project\DS Files\Source\ClientSource\Client\GameLib\MapOutdoorCharacterShadow.cpp
;	COMDAT ?EndRenderCharacterShadowToTexture@CMapOutdoor@@QAEXXZ
_TEXT	SEGMENT
?EndRenderCharacterShadowToTexture@CMapOutdoor@@QAEXXZ PROC ; CMapOutdoor::EndRenderCharacterShadowToTexture, COMDAT
; _this$ = ecx

; 151  : 	ms_lpd3dDevice->SetViewport(&m_BackupViewport);

  00000	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?ms_lpd3dDevice@CGraphicBase@@1PAUIDirect3DDevice8@@A ; CGraphicBase::ms_lpd3dDevice
  00006	56		 push	 esi
  00007	57		 push	 edi
  00008	8b f9		 mov	 edi, ecx
  0000a	8b 32		 mov	 esi, DWORD PTR [edx]
  0000c	8d 87 04 02 00
	00		 lea	 eax, DWORD PTR [edi+516]
  00012	50		 push	 eax
  00013	52		 push	 edx
  00014	ff 96 a0 00 00
	00		 call	 DWORD PTR [esi+160]

; 152  : 
; 153  : 	ms_lpd3dDevice->SetRenderTarget(m_lpBackupRenderTargetSurface, m_lpBackupDepthSurface);

  0001a	a1 00 00 00 00	 mov	 eax, DWORD PTR ?ms_lpd3dDevice@CGraphicBase@@1PAUIDirect3DDevice8@@A ; CGraphicBase::ms_lpd3dDevice
  0001f	ff b7 00 02 00
	00		 push	 DWORD PTR [edi+512]
  00025	ff b7 fc 01 00
	00		 push	 DWORD PTR [edi+508]
  0002b	8b 08		 mov	 ecx, DWORD PTR [eax]
  0002d	50		 push	 eax
  0002e	ff 51 7c	 call	 DWORD PTR [ecx+124]

; 154  : 
; 155  : 	SAFE_RELEASE(m_lpBackupRenderTargetSurface);

  00031	8b 8f fc 01 00
	00		 mov	 ecx, DWORD PTR [edi+508]
  00037	85 c9		 test	 ecx, ecx
  00039	74 10		 je	 SHORT $LN2@EndRenderC
  0003b	8b 01		 mov	 eax, DWORD PTR [ecx]
  0003d	51		 push	 ecx
  0003e	ff 50 08	 call	 DWORD PTR [eax+8]
  00041	c7 87 fc 01 00
	00 00 00 00 00	 mov	 DWORD PTR [edi+508], 0
$LN2@EndRenderC:

; 156  : 	SAFE_RELEASE(m_lpBackupDepthSurface);

  0004b	8b 8f 00 02 00
	00		 mov	 ecx, DWORD PTR [edi+512]
  00051	85 c9		 test	 ecx, ecx
  00053	74 10		 je	 SHORT $LN3@EndRenderC
  00055	8b 01		 mov	 eax, DWORD PTR [ecx]
  00057	51		 push	 ecx
  00058	ff 50 08	 call	 DWORD PTR [eax+8]
  0005b	c7 87 00 02 00
	00 00 00 00 00	 mov	 DWORD PTR [edi+512], 0
$LN3@EndRenderC:

; 157  : 
; 158  : 	STATEMANAGER.RestoreTransform(D3DTS_VIEW);

  00065	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  0006b	6a 02		 push	 2
  0006d	e8 00 00 00 00	 call	 ?RestoreTransform@CStateManager@@QAEXW4_D3DTRANSFORMSTATETYPE@@@Z ; CStateManager::RestoreTransform

; 159  : 	STATEMANAGER.RestoreTransform(D3DTS_PROJECTION);

  00072	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  00078	6a 03		 push	 3
  0007a	e8 00 00 00 00	 call	 ?RestoreTransform@CStateManager@@QAEXW4_D3DTRANSFORMSTATETYPE@@@Z ; CStateManager::RestoreTransform

; 160  : 
; 161  : 	// Restore Device Context
; 162  : 	STATEMANAGER.SetRenderState(D3DRS_LIGHTING, dwLightEnable);

  0007f	ff 35 00 00 00
	00		 push	 DWORD PTR ?dwLightEnable@@3KA ; dwLightEnable
  00085	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  0008b	68 89 00 00 00	 push	 137			; 00000089H
  00090	e8 00 00 00 00	 call	 ?SetRenderState@CStateManager@@QAEXW4_D3DRENDERSTATETYPE@@K@Z ; CStateManager::SetRenderState

; 163  : 	STATEMANAGER.RestoreRenderState(D3DRS_TEXTUREFACTOR);

  00095	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  0009b	6a 3c		 push	 60			; 0000003cH
  0009d	e8 00 00 00 00	 call	 ?RestoreRenderState@CStateManager@@QAEXW4_D3DRENDERSTATETYPE@@@Z ; CStateManager::RestoreRenderState
  000a2	5f		 pop	 edi
  000a3	5e		 pop	 esi

; 164  : }

  000a4	c3		 ret	 0
?EndRenderCharacterShadowToTexture@CMapOutdoor@@QAEXXZ ENDP ; CMapOutdoor::EndRenderCharacterShadowToTexture
_TEXT	ENDS
; Function compile flags: /Ogtp
; File C:\DS Project\DS Files\Source\ClientSource\Client\GameLib\MapOutdoorCharacterShadow.cpp
; File C:\DS Project\DS Files\Source\ClientSource\extern\include\d3dx8math.inl
; File C:\DS Project\DS Files\Source\ClientSource\Client\GameLib\MapOutdoorCharacterShadow.cpp
; File C:\DS Project\DS Files\Source\ClientSource\extern\include\d3dx8math.inl
; File C:\DS Project\DS Files\Source\ClientSource\Client\GameLib\MapOutdoorCharacterShadow.cpp
; File C:\DS Project\DS Files\Source\ClientSource\extern\include\d3dx8math.inl
; File C:\DS Project\DS Files\Source\ClientSource\Client\GameLib\MapOutdoorCharacterShadow.cpp
; File C:\DS Project\DS Files\Source\ClientSource\extern\include\d3dx8math.inl
; File C:\DS Project\DS Files\Source\ClientSource\Client\GameLib\MapOutdoorCharacterShadow.cpp
;	COMDAT ?BeginRenderCharacterShadowToTexture@CMapOutdoor@@QAE_NXZ
_TEXT	SEGMENT
_matLightProj$ = -168					; size = 64
_matLightView$ = -104					; size = 64
_v3Eye$ = -40						; size = 12
$T1 = -28						; size = 12
_v3Target$ = -16					; size = 12
__$ArrayPad$ = -4					; size = 4
?BeginRenderCharacterShadowToTexture@CMapOutdoor@@QAE_NXZ PROC ; CMapOutdoor::BeginRenderCharacterShadowToTexture, COMDAT
; _this$ = ecx

; 68   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec a8 00 00
	00		 sub	 esp, 168		; 000000a8H
  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000e	33 c5		 xor	 eax, ebp
  00010	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00013	56		 push	 esi
  00014	8b f1		 mov	 esi, ecx

; 69   : 	D3DXMATRIX matLightView, matLightProj;
; 70   : 
; 71   : 	CCamera* pCurrentCamera = CCameraManager::Instance().GetCurrentCamera();

  00016	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCCameraManager@@@@0PAVCCameraManager@@A ; CSingleton<CCameraManager>::ms_singleton
  0001c	57		 push	 edi
  0001d	e8 00 00 00 00	 call	 ?GetCurrentCamera@CCameraManager@@QAEPAVCCamera@@XZ ; CCameraManager::GetCurrentCamera
  00022	8b f8		 mov	 edi, eax

; 72   : 
; 73   : 	if (!pCurrentCamera)

  00024	85 ff		 test	 edi, edi
  00026	75 12		 jne	 SHORT $LN2@BeginRende

; 74   : 		return false;

  00028	5f		 pop	 edi
  00029	32 c0		 xor	 al, al

; 144  : 	}
; 145  : 
; 146  : 	return bSuccess;
; 147  : }

  0002b	5e		 pop	 esi
  0002c	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0002f	33 cd		 xor	 ecx, ebp
  00031	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00036	8b e5		 mov	 esp, ebp
  00038	5d		 pop	 ebp
  00039	c3		 ret	 0
$LN2@BeginRende:

; 75   : 
; 76   : 	if (recreate)

  0003a	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?recreate@@3HA, 0
  00041	74 11		 je	 SHORT $LN3@BeginRende

; 77   : 	{
; 78   : 		CreateCharacterShadowTexture();

  00043	8b ce		 mov	 ecx, esi
  00045	e8 00 00 00 00	 call	 ?CreateCharacterShadowTexture@CMapOutdoor@@QAEXXZ ; CMapOutdoor::CreateCharacterShadowTexture

; 79   : 		recreate = false;

  0004a	c7 05 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?recreate@@3HA, 0
$LN3@BeginRende:

; 80   : 	}
; 81   : 
; 82   : 	D3DXVECTOR3 v3Target = pCurrentCamera->GetTarget();

  00054	f3 0f 7e 47 3c	 movq	 xmm0, QWORD PTR [edi+60]
  00059	66 0f d6 45 f0	 movq	 QWORD PTR _v3Target$[ebp], xmm0

; 84   : 	D3DXVECTOR3 v3Eye(v3Target.x - 1.732f * 1250.0f,

  0005e	f3 0f 10 45 f0	 movss	 xmm0, DWORD PTR _v3Target$[ebp]
  00063	f3 0f 5c 05 00
	00 00 00	 subss	 xmm0, DWORD PTR __real@45075000
  0006b	8b 47 44	 mov	 eax, DWORD PTR [edi+68]
  0006e	89 45 f8	 mov	 DWORD PTR _v3Target$[ebp+8], eax

; 88   : 	D3DXMatrixLookAtRH(&matLightView,

  00071	8d 45 e4	 lea	 eax, DWORD PTR $T1[ebp]
  00074	53		 push	 ebx
  00075	50		 push	 eax
; File C:\DS Project\DS Files\Source\ClientSource\extern\include\d3dx8math.inl

; 180  :     x = fx;

  00076	f3 0f 11 45 d8	 movss	 DWORD PTR _v3Eye$[ebp], xmm0
; File C:\DS Project\DS Files\Source\ClientSource\Client\GameLib\MapOutdoorCharacterShadow.cpp

; 88   : 	D3DXMatrixLookAtRH(&matLightView,

  0007b	8d 45 f0	 lea	 eax, DWORD PTR _v3Target$[ebp]
  0007e	f3 0f 10 45 f4	 movss	 xmm0, DWORD PTR _v3Target$[ebp+4]
  00083	f3 0f 5c 05 00
	00 00 00	 subss	 xmm0, DWORD PTR __real@449c4000
  0008b	50		 push	 eax
  0008c	8d 45 d8	 lea	 eax, DWORD PTR _v3Eye$[ebp]
; File C:\DS Project\DS Files\Source\ClientSource\extern\include\d3dx8math.inl

; 180  :     x = fx;

  0008f	c7 45 e4 00 00
	00 00		 mov	 DWORD PTR $T1[ebp], 0
; File C:\DS Project\DS Files\Source\ClientSource\Client\GameLib\MapOutdoorCharacterShadow.cpp

; 88   : 	D3DXMatrixLookAtRH(&matLightView,

  00096	50		 push	 eax
  00097	8d 45 98	 lea	 eax, DWORD PTR _matLightView$[ebp]
; File C:\DS Project\DS Files\Source\ClientSource\extern\include\d3dx8math.inl

; 181  :     y = fy;

  0009a	c7 45 e8 00 00
	00 00		 mov	 DWORD PTR $T1[ebp+4], 0
  000a1	f3 0f 11 45 dc	 movss	 DWORD PTR _v3Eye$[ebp+4], xmm0
; File C:\DS Project\DS Files\Source\ClientSource\Client\GameLib\MapOutdoorCharacterShadow.cpp

; 84   : 	D3DXVECTOR3 v3Eye(v3Target.x - 1.732f * 1250.0f,

  000a6	f3 0f 10 45 f8	 movss	 xmm0, DWORD PTR _v3Target$[ebp+8]
  000ab	f3 0f 58 05 00
	00 00 00	 addss	 xmm0, DWORD PTR __real@45875000

; 88   : 	D3DXMatrixLookAtRH(&matLightView,

  000b3	50		 push	 eax
; File C:\DS Project\DS Files\Source\ClientSource\extern\include\d3dx8math.inl

; 182  :     z = fz;

  000b4	c7 45 ec 00 00
	80 3f		 mov	 DWORD PTR $T1[ebp+8], 1065353216 ; 3f800000H
  000bb	f3 0f 11 45 e0	 movss	 DWORD PTR _v3Eye$[ebp+8], xmm0
; File C:\DS Project\DS Files\Source\ClientSource\Client\GameLib\MapOutdoorCharacterShadow.cpp

; 88   : 	D3DXMatrixLookAtRH(&matLightView,

  000c0	e8 00 00 00 00	 call	 _D3DXMatrixLookAtRH@16

; 89   : 					   &v3Eye,
; 90   : 					   &v3Target,
; 91   : 					   &D3DXVECTOR3(0.0f, 0.0f, 1.0f));
; 92   : 
; 93   : 	D3DXMatrixOrthoRH(&matLightProj, 2550.0f, 2550.0f, 1.0f, 15000.0f);

  000c5	83 ec 10	 sub	 esp, 16			; 00000010H
  000c8	8d 85 58 ff ff
	ff		 lea	 eax, DWORD PTR _matLightProj$[ebp]
  000ce	c7 44 24 0c 00
	60 6a 46	 mov	 DWORD PTR [esp+12], 1181376512 ; 466a6000H
  000d6	c7 44 24 08 00
	00 80 3f	 mov	 DWORD PTR [esp+8], 1065353216 ; 3f800000H
  000de	c7 44 24 04 00
	60 1f 45	 mov	 DWORD PTR [esp+4], 1159684096 ; 451f6000H
  000e6	c7 04 24 00 60
	1f 45		 mov	 DWORD PTR [esp], 1159684096 ; 451f6000H
  000ed	50		 push	 eax
  000ee	e8 00 00 00 00	 call	 _D3DXMatrixOrthoRH@20

; 94   : 
; 95   : 	STATEMANAGER.SaveTransform(D3DTS_VIEW, &matLightView);

  000f3	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  000f9	8d 45 98	 lea	 eax, DWORD PTR _matLightView$[ebp]
  000fc	50		 push	 eax
  000fd	6a 02		 push	 2
  000ff	e8 00 00 00 00	 call	 ?SaveTransform@CStateManager@@QAEXW4_D3DTRANSFORMSTATETYPE@@PBU_D3DMATRIX@@@Z ; CStateManager::SaveTransform

; 96   : 	STATEMANAGER.SaveTransform(D3DTS_PROJECTION, &matLightProj);

  00104	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  0010a	8d 85 58 ff ff
	ff		 lea	 eax, DWORD PTR _matLightProj$[ebp]
  00110	50		 push	 eax
  00111	6a 03		 push	 3
  00113	e8 00 00 00 00	 call	 ?SaveTransform@CStateManager@@QAEXW4_D3DTRANSFORMSTATETYPE@@PBU_D3DMATRIX@@@Z ; CStateManager::SaveTransform

; 97   : 
; 98   : 	dwLightEnable = STATEMANAGER.GetRenderState(D3DRS_LIGHTING);

  00118	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  0011e	68 89 00 00 00	 push	 137			; 00000089H
  00123	e8 00 00 00 00	 call	 ?GetRenderState@CStateManager@@QAEKW4_D3DRENDERSTATETYPE@@@Z ; CStateManager::GetRenderState

; 99   : 	STATEMANAGER.SetRenderState(D3DRS_LIGHTING, FALSE);

  00128	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  0012e	6a 00		 push	 0
  00130	68 89 00 00 00	 push	 137			; 00000089H
  00135	a3 00 00 00 00	 mov	 DWORD PTR ?dwLightEnable@@3KA, eax ; dwLightEnable
  0013a	e8 00 00 00 00	 call	 ?SetRenderState@CStateManager@@QAEXW4_D3DRENDERSTATETYPE@@K@Z ; CStateManager::SetRenderState

; 100  : 
; 101  : 	STATEMANAGER.SaveRenderState(D3DRS_TEXTUREFACTOR, 0xFF808080);

  0013f	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  00145	68 80 80 80 ff	 push	 -8355712		; ff808080H
  0014a	6a 3c		 push	 60			; 0000003cH
  0014c	e8 00 00 00 00	 call	 ?SaveRenderState@CStateManager@@QAEXW4_D3DRENDERSTATETYPE@@K@Z ; CStateManager::SaveRenderState

; 102  : 	STATEMANAGER.SetTextureStageState(0, D3DTSS_COLOROP, D3DTOP_SELECTARG1);

  00151	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  00157	6a 02		 push	 2
  00159	6a 01		 push	 1
  0015b	6a 00		 push	 0
  0015d	e8 00 00 00 00	 call	 ?SetTextureStageState@CStateManager@@QAEXKW4_D3DTEXTURESTAGESTATETYPE@@K@Z ; CStateManager::SetTextureStageState

; 103  : 	STATEMANAGER.SetTextureStageState(0, D3DTSS_COLORARG1, D3DTA_TFACTOR);

  00162	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  00168	6a 03		 push	 3
  0016a	6a 02		 push	 2
  0016c	6a 00		 push	 0
  0016e	e8 00 00 00 00	 call	 ?SetTextureStageState@CStateManager@@QAEXKW4_D3DTEXTURESTAGESTATETYPE@@K@Z ; CStateManager::SetTextureStageState

; 104  : 	STATEMANAGER.SetTextureStageState(0, D3DTSS_ALPHAOP, D3DTOP_DISABLE);

  00173	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  00179	6a 01		 push	 1
  0017b	6a 04		 push	 4
  0017d	6a 00		 push	 0
  0017f	e8 00 00 00 00	 call	 ?SetTextureStageState@CStateManager@@QAEXKW4_D3DTEXTURESTAGESTATETYPE@@K@Z ; CStateManager::SetTextureStageState

; 105  : 	STATEMANAGER.SetTextureStageState(1, D3DTSS_COLOROP, D3DTOP_DISABLE);

  00184	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  0018a	6a 01		 push	 1
  0018c	6a 01		 push	 1
  0018e	6a 01		 push	 1
  00190	e8 00 00 00 00	 call	 ?SetTextureStageState@CStateManager@@QAEXKW4_D3DTEXTURESTAGESTATETYPE@@K@Z ; CStateManager::SetTextureStageState

; 106  : 
; 107  : 	bool bSuccess = true;
; 108  : 
; 109  : 	// Backup Device Context
; 110  : 	if (FAILED(ms_lpd3dDevice->GetRenderTarget(&m_lpBackupRenderTargetSurface)))

  00195	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_lpd3dDevice@CGraphicBase@@1PAUIDirect3DDevice8@@A ; CGraphicBase::ms_lpd3dDevice
  0019b	8d 86 fc 01 00
	00		 lea	 eax, DWORD PTR [esi+508]
  001a1	b3 01		 mov	 bl, 1
  001a3	50		 push	 eax
  001a4	8b 11		 mov	 edx, DWORD PTR [ecx]
  001a6	51		 push	 ecx
  001a7	ff 92 80 00 00
	00		 call	 DWORD PTR [edx+128]
  001ad	85 c0		 test	 eax, eax
  001af	79 0f		 jns	 SHORT $LN4@BeginRende

; 111  : 	{
; 112  : 		TraceError("CMapOutdoor::BeginRenderCharacterShadowToTexture : Unable to Save Window Render Target\n");

  001b1	68 00 00 00 00	 push	 OFFSET ??_C@_0FI@KOMMFBEO@CMapOutdoor?3?3BeginRenderCharact@
  001b6	e8 00 00 00 00	 call	 ?TraceError@@YAXPBDZZ	; TraceError
  001bb	83 c4 04	 add	 esp, 4

; 113  : 		bSuccess = false;

  001be	32 db		 xor	 bl, bl
$LN4@BeginRende:

; 114  : 	}
; 115  : 
; 116  : 	if (FAILED(ms_lpd3dDevice->GetDepthStencilSurface(&m_lpBackupDepthSurface)))

  001c0	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_lpd3dDevice@CGraphicBase@@1PAUIDirect3DDevice8@@A ; CGraphicBase::ms_lpd3dDevice
  001c6	8d 86 00 02 00
	00		 lea	 eax, DWORD PTR [esi+512]
  001cc	50		 push	 eax
  001cd	51		 push	 ecx
  001ce	8b 11		 mov	 edx, DWORD PTR [ecx]
  001d0	ff 92 84 00 00
	00		 call	 DWORD PTR [edx+132]
  001d6	85 c0		 test	 eax, eax
  001d8	79 0f		 jns	 SHORT $LN5@BeginRende

; 117  : 	{
; 118  : 		TraceError("CMapOutdoor::BeginRenderCharacterShadowToTexture : Unable to Save Window Depth Surface\n");

  001da	68 00 00 00 00	 push	 OFFSET ??_C@_0FI@HJJEHOCK@CMapOutdoor?3?3BeginRenderCharact@
  001df	e8 00 00 00 00	 call	 ?TraceError@@YAXPBDZZ	; TraceError
  001e4	83 c4 04	 add	 esp, 4

; 119  : 		bSuccess = false;

  001e7	32 db		 xor	 bl, bl
$LN5@BeginRende:

; 120  : 	}
; 121  : 
; 122  : 	if (FAILED(ms_lpd3dDevice->SetRenderTarget(m_lpCharacterShadowMapRenderTargetSurface, m_lpCharacterShadowMapDepthSurface)))

  001e9	a1 00 00 00 00	 mov	 eax, DWORD PTR ?ms_lpd3dDevice@CGraphicBase@@1PAUIDirect3DDevice8@@A ; CGraphicBase::ms_lpd3dDevice
  001ee	ff b6 dc 01 00
	00		 push	 DWORD PTR [esi+476]
  001f4	ff b6 d8 01 00
	00		 push	 DWORD PTR [esi+472]
  001fa	8b 08		 mov	 ecx, DWORD PTR [eax]
  001fc	50		 push	 eax
  001fd	ff 51 7c	 call	 DWORD PTR [ecx+124]
  00200	85 c0		 test	 eax, eax
  00202	79 0f		 jns	 SHORT $LN6@BeginRende

; 123  : 	{
; 124  : 		TraceError("CMapOutdoor::BeginRenderCharacterShadowToTexture : Unable to Set Shadow Map Render Target\n");

  00204	68 00 00 00 00	 push	 OFFSET ??_C@_0FL@BICJPFM@CMapOutdoor?3?3BeginRenderCharact@
  00209	e8 00 00 00 00	 call	 ?TraceError@@YAXPBDZZ	; TraceError
  0020e	83 c4 04	 add	 esp, 4

; 125  : 		bSuccess = false;

  00211	32 db		 xor	 bl, bl
$LN6@BeginRende:

; 126  : 	}
; 127  : 
; 128  : 	if (FAILED(ms_lpd3dDevice->Clear(0L, NULL, D3DCLEAR_TARGET | D3DCLEAR_ZBUFFER, D3DCOLOR_XRGB(0xFF, 0xFF, 0xFF), 1.0f, 0)))

  00213	a1 00 00 00 00	 mov	 eax, DWORD PTR ?ms_lpd3dDevice@CGraphicBase@@1PAUIDirect3DDevice8@@A ; CGraphicBase::ms_lpd3dDevice
  00218	6a 00		 push	 0
  0021a	8b 08		 mov	 ecx, DWORD PTR [eax]
  0021c	51		 push	 ecx
  0021d	c7 04 24 00 00
	80 3f		 mov	 DWORD PTR [esp], 1065353216 ; 3f800000H
  00224	6a ff		 push	 -1
  00226	6a 03		 push	 3
  00228	6a 00		 push	 0
  0022a	6a 00		 push	 0
  0022c	50		 push	 eax
  0022d	ff 91 90 00 00
	00		 call	 DWORD PTR [ecx+144]
  00233	85 c0		 test	 eax, eax
  00235	79 0f		 jns	 SHORT $LN7@BeginRende

; 129  : 	{
; 130  : 		TraceError("CMapOutdoor::BeginRenderCharacterShadowToTexture : Unable to Clear Render Target");

  00237	68 00 00 00 00	 push	 OFFSET ??_C@_0FB@MDNNINIF@CMapOutdoor?3?3BeginRenderCharact@
  0023c	e8 00 00 00 00	 call	 ?TraceError@@YAXPBDZZ	; TraceError
  00241	83 c4 04	 add	 esp, 4

; 131  : 		bSuccess = false;

  00244	32 db		 xor	 bl, bl
$LN7@BeginRende:

; 132  : 	}
; 133  : 
; 134  : 	if (FAILED(ms_lpd3dDevice->GetViewport(&m_BackupViewport)))

  00246	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_lpd3dDevice@CGraphicBase@@1PAUIDirect3DDevice8@@A ; CGraphicBase::ms_lpd3dDevice
  0024c	8d 86 04 02 00
	00		 lea	 eax, DWORD PTR [esi+516]
  00252	50		 push	 eax
  00253	51		 push	 ecx
  00254	8b 11		 mov	 edx, DWORD PTR [ecx]
  00256	ff 92 a4 00 00
	00		 call	 DWORD PTR [edx+164]
  0025c	85 c0		 test	 eax, eax
  0025e	79 0f		 jns	 SHORT $LN8@BeginRende

; 135  : 	{
; 136  : 		TraceError("CMapOutdoor::BeginRenderCharacterShadowToTexture : Unable to Save Window Viewport\n");

  00260	68 00 00 00 00	 push	 OFFSET ??_C@_0FD@NHMJOND@CMapOutdoor?3?3BeginRenderCharact@
  00265	e8 00 00 00 00	 call	 ?TraceError@@YAXPBDZZ	; TraceError
  0026a	83 c4 04	 add	 esp, 4

; 137  : 		bSuccess = false;

  0026d	32 db		 xor	 bl, bl
$LN8@BeginRende:

; 138  : 	}
; 139  : 
; 140  : 	if (FAILED(ms_lpd3dDevice->SetViewport(&m_ShadowMapViewport)))

  0026f	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_lpd3dDevice@CGraphicBase@@1PAUIDirect3DDevice8@@A ; CGraphicBase::ms_lpd3dDevice
  00275	8d 86 e0 01 00
	00		 lea	 eax, DWORD PTR [esi+480]
  0027b	50		 push	 eax
  0027c	51		 push	 ecx
  0027d	8b 11		 mov	 edx, DWORD PTR [ecx]
  0027f	ff 92 a0 00 00
	00		 call	 DWORD PTR [edx+160]
  00285	85 c0		 test	 eax, eax
  00287	79 0f		 jns	 SHORT $LN9@BeginRende

; 141  : 	{
; 142  : 		TraceError("CMapOutdoor::BeginRenderCharacterShadowToTexture : Unable to Set Shadow Map viewport\n");

  00289	68 00 00 00 00	 push	 OFFSET ??_C@_0FG@DOCFFNBC@CMapOutdoor?3?3BeginRenderCharact@
  0028e	e8 00 00 00 00	 call	 ?TraceError@@YAXPBDZZ	; TraceError
  00293	83 c4 04	 add	 esp, 4

; 143  : 		bSuccess = false;

  00296	32 db		 xor	 bl, bl
$LN9@BeginRende:

; 144  : 	}
; 145  : 
; 146  : 	return bSuccess;
; 147  : }

  00298	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0029b	8a c3		 mov	 al, bl
  0029d	5b		 pop	 ebx
  0029e	5f		 pop	 edi
  0029f	33 cd		 xor	 ecx, ebp
  002a1	5e		 pop	 esi
  002a2	e8 00 00 00 00	 call	 @__security_check_cookie@4
  002a7	8b e5		 mov	 esp, ebp
  002a9	5d		 pop	 ebp
  002aa	c3		 ret	 0
?BeginRenderCharacterShadowToTexture@CMapOutdoor@@QAE_NXZ ENDP ; CMapOutdoor::BeginRenderCharacterShadowToTexture
_TEXT	ENDS
; Function compile flags: /Ogtp
; File C:\DS Project\DS Files\Source\ClientSource\Client\GameLib\MapOutdoorCharacterShadow.cpp
;	COMDAT ?SetShadowTextureSize@CMapOutdoor@@QAEXG@Z
_TEXT	SEGMENT
_size$ = 8						; size = 2
?SetShadowTextureSize@CMapOutdoor@@QAEXG@Z PROC		; CMapOutdoor::SetShadowTextureSize, COMDAT
; _this$ = ecx

; 10   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	56		 push	 esi

; 11   : 	if (m_wShadowMapSize != size)

  00004	66 8b 75 08	 mov	 si, WORD PTR _size$[ebp]
  00008	57		 push	 edi
  00009	8b f9		 mov	 edi, ecx
  0000b	0f b7 8f f8 01
	00 00		 movzx	 ecx, WORD PTR [edi+504]
  00012	66 3b ce	 cmp	 cx, si
  00015	74 1c		 je	 SHORT $LN4@SetShadowT

; 12   : 	{
; 13   : 		recreate = true;
; 14   : 		Tracenf("ShadowTextureSize changed %d -> %d", m_wShadowMapSize, size);

  00017	0f b7 c6	 movzx	 eax, si
  0001a	50		 push	 eax
  0001b	51		 push	 ecx
  0001c	68 00 00 00 00	 push	 OFFSET ??_C@_0CD@LDDALIJO@ShadowTextureSize?5changed?5?$CFd?5?9?$DO@
  00021	c7 05 00 00 00
	00 01 00 00 00	 mov	 DWORD PTR ?recreate@@3HA, 1
  0002b	e8 00 00 00 00	 call	 ?Tracenf@@YAXPBDZZ	; Tracenf
  00030	83 c4 0c	 add	 esp, 12			; 0000000cH
$LN4@SetShadowT:

; 15   : 	}
; 16   : 
; 17   : 	m_wShadowMapSize = size;
; 18   : }

  00033	66 89 b7 f8 01
	00 00		 mov	 WORD PTR [edi+504], si
  0003a	5f		 pop	 edi
  0003b	5e		 pop	 esi
  0003c	5d		 pop	 ebp
  0003d	c2 04 00	 ret	 4
?SetShadowTextureSize@CMapOutdoor@@QAEXG@Z ENDP		; CMapOutdoor::SetShadowTextureSize
_TEXT	ENDS
; Function compile flags: /Ogtp
; File C:\DS Project\DS Files\Source\ClientSource\Client\GameLib\MapOutdoorCharacterShadow.cpp
;	COMDAT ?ReleaseCharacterShadowTexture@CMapOutdoor@@QAEXXZ
_TEXT	SEGMENT
?ReleaseCharacterShadowTexture@CMapOutdoor@@QAEXXZ PROC	; CMapOutdoor::ReleaseCharacterShadowTexture, COMDAT
; _this$ = ecx

; 59   : {

  00000	56		 push	 esi
  00001	8b f1		 mov	 esi, ecx

; 60   : 	SAFE_RELEASE(m_lpCharacterShadowMapRenderTargetSurface);

  00003	8b 8e d8 01 00
	00		 mov	 ecx, DWORD PTR [esi+472]
  00009	85 c9		 test	 ecx, ecx
  0000b	74 10		 je	 SHORT $LN2@ReleaseCha
  0000d	8b 01		 mov	 eax, DWORD PTR [ecx]
  0000f	51		 push	 ecx
  00010	ff 50 08	 call	 DWORD PTR [eax+8]
  00013	c7 86 d8 01 00
	00 00 00 00 00	 mov	 DWORD PTR [esi+472], 0
$LN2@ReleaseCha:

; 61   : 	SAFE_RELEASE(m_lpCharacterShadowMapDepthSurface);

  0001d	8b 8e dc 01 00
	00		 mov	 ecx, DWORD PTR [esi+476]
  00023	85 c9		 test	 ecx, ecx
  00025	74 10		 je	 SHORT $LN3@ReleaseCha
  00027	8b 01		 mov	 eax, DWORD PTR [ecx]
  00029	51		 push	 ecx
  0002a	ff 50 08	 call	 DWORD PTR [eax+8]
  0002d	c7 86 dc 01 00
	00 00 00 00 00	 mov	 DWORD PTR [esi+476], 0
$LN3@ReleaseCha:

; 62   : 	SAFE_RELEASE(m_lpCharacterShadowMapTexture);

  00037	8b 8e d4 01 00
	00		 mov	 ecx, DWORD PTR [esi+468]
  0003d	85 c9		 test	 ecx, ecx
  0003f	74 10		 je	 SHORT $LN4@ReleaseCha
  00041	8b 01		 mov	 eax, DWORD PTR [ecx]
  00043	51		 push	 ecx
  00044	ff 50 08	 call	 DWORD PTR [eax+8]
  00047	c7 86 d4 01 00
	00 00 00 00 00	 mov	 DWORD PTR [esi+468], 0
$LN4@ReleaseCha:

; 63   : }

  00051	5e		 pop	 esi
  00052	c3		 ret	 0
?ReleaseCharacterShadowTexture@CMapOutdoor@@QAEXXZ ENDP	; CMapOutdoor::ReleaseCharacterShadowTexture
_TEXT	ENDS
; Function compile flags: /Ogtp
; File C:\DS Project\DS Files\Source\ClientSource\Client\GameLib\MapOutdoorCharacterShadow.cpp
;	COMDAT ?CreateCharacterShadowTexture@CMapOutdoor@@QAEXXZ
_TEXT	SEGMENT
?CreateCharacterShadowTexture@CMapOutdoor@@QAEXXZ PROC	; CMapOutdoor::CreateCharacterShadowTexture, COMDAT
; _this$ = ecx

; 22   : 	extern bool GRAPHICS_CAPS_CAN_NOT_DRAW_SHADOW;
; 23   : 
; 24   : 	if (GRAPHICS_CAPS_CAN_NOT_DRAW_SHADOW)

  00000	80 3d 00 00 00
	00 00		 cmp	 BYTE PTR ?GRAPHICS_CAPS_CAN_NOT_DRAW_SHADOW@@3_NA, 0 ; GRAPHICS_CAPS_CAN_NOT_DRAW_SHADOW
  00007	57		 push	 edi
  00008	8b f9		 mov	 edi, ecx
  0000a	0f 85 e0 00 00
	00		 jne	 $LN6@CreateChar

; 25   : 		return;
; 26   : 
; 27   : 	ReleaseCharacterShadowTexture();

  00010	e8 00 00 00 00	 call	 ?ReleaseCharacterShadowTexture@CMapOutdoor@@QAEXXZ ; CMapOutdoor::ReleaseCharacterShadowTexture

; 28   : 
; 29   : 	if (IsLowTextureMemory())

  00015	e8 00 00 00 00	 call	 ?IsLowTextureMemory@CGraphicBase@@SA_NXZ ; CGraphicBase::IsLowTextureMemory
  0001a	84 c0		 test	 al, al
  0001c	74 0c		 je	 SHORT $LN3@CreateChar

; 30   : 		SetShadowTextureSize(128);

  0001e	68 80 00 00 00	 push	 128			; 00000080H
  00023	8b cf		 mov	 ecx, edi
  00025	e8 00 00 00 00	 call	 ?SetShadowTextureSize@CMapOutdoor@@QAEXG@Z ; CMapOutdoor::SetShadowTextureSize
$LN3@CreateChar:

; 31   : 
; 32   : 	m_ShadowMapViewport.X = 1;
; 33   : 	m_ShadowMapViewport.Y = 1;
; 34   : 	m_ShadowMapViewport.Width = m_wShadowMapSize - 2;

  0002a	0f b7 97 f8 01
	00 00		 movzx	 edx, WORD PTR [edi+504]
  00031	56		 push	 esi

; 35   : 	m_ShadowMapViewport.Height = m_wShadowMapSize - 2;
; 36   : 	m_ShadowMapViewport.MinZ = 0.0f;
; 37   : 	m_ShadowMapViewport.MaxZ = 1.0f;
; 38   : 
; 39   : 	if (FAILED(ms_lpd3dDevice->CreateTexture(m_wShadowMapSize, m_wShadowMapSize, 1, D3DUSAGE_RENDERTARGET, D3DFMT_R5G6B5, D3DPOOL_DEFAULT, &m_lpCharacterShadowMapTexture)))

  00032	8d b7 d4 01 00
	00		 lea	 esi, DWORD PTR [edi+468]
  00038	c7 87 e0 01 00
	00 01 00 00 00	 mov	 DWORD PTR [edi+480], 1
  00042	56		 push	 esi
  00043	6a 00		 push	 0
  00045	6a 17		 push	 23			; 00000017H
  00047	8d 42 fe	 lea	 eax, DWORD PTR [edx-2]
  0004a	c7 87 e4 01 00
	00 01 00 00 00	 mov	 DWORD PTR [edi+484], 1
  00054	6a 01		 push	 1
  00056	89 87 e8 01 00
	00		 mov	 DWORD PTR [edi+488], eax
  0005c	89 87 ec 01 00
	00		 mov	 DWORD PTR [edi+492], eax
  00062	c7 87 f0 01 00
	00 00 00 00 00	 mov	 DWORD PTR [edi+496], 0
  0006c	c7 87 f4 01 00
	00 00 00 80 3f	 mov	 DWORD PTR [edi+500], 1065353216 ; 3f800000H
  00076	a1 00 00 00 00	 mov	 eax, DWORD PTR ?ms_lpd3dDevice@CGraphicBase@@1PAUIDirect3DDevice8@@A ; CGraphicBase::ms_lpd3dDevice
  0007b	6a 01		 push	 1
  0007d	52		 push	 edx
  0007e	52		 push	 edx
  0007f	8b 08		 mov	 ecx, DWORD PTR [eax]
  00081	50		 push	 eax
  00082	ff 51 50	 call	 DWORD PTR [ecx+80]
  00085	85 c0		 test	 eax, eax
  00087	79 10		 jns	 SHORT $LN4@CreateChar

; 40   : 	{
; 41   : 		TraceError("CMapOutdoor Unable to create Character Shadow render target texture\n");

  00089	68 00 00 00 00	 push	 OFFSET ??_C@_0EF@FIJKIKCP@CMapOutdoor?5Unable?5to?5create?5Ch@

; 52   : 	{
; 53   : 		TraceError("CMapOutdoor Unable to create Character Shadow depth Surface\n");

  0008e	e8 00 00 00 00	 call	 ?TraceError@@YAXPBDZZ	; TraceError
  00093	83 c4 04	 add	 esp, 4
  00096	5e		 pop	 esi
  00097	5f		 pop	 edi

; 54   : 		return;
; 55   : 	}
; 56   : }

  00098	c3		 ret	 0
$LN4@CreateChar:

; 42   : 		return;
; 43   : 	}
; 44   : 
; 45   : 	if (FAILED(m_lpCharacterShadowMapTexture->GetSurfaceLevel(0, &m_lpCharacterShadowMapRenderTargetSurface)))

  00099	8b 0e		 mov	 ecx, DWORD PTR [esi]
  0009b	8d 87 d8 01 00
	00		 lea	 eax, DWORD PTR [edi+472]
  000a1	50		 push	 eax
  000a2	6a 00		 push	 0
  000a4	51		 push	 ecx
  000a5	8b 11		 mov	 edx, DWORD PTR [ecx]
  000a7	ff 52 3c	 call	 DWORD PTR [edx+60]
  000aa	85 c0		 test	 eax, eax
  000ac	79 10		 jns	 SHORT $LN5@CreateChar

; 46   : 	{
; 47   : 		TraceError("CMapOutdoor Unable to GetSurfaceLevel Character Shadow render target texture\n");

  000ae	68 00 00 00 00	 push	 OFFSET ??_C@_0EO@LLLBCDDM@CMapOutdoor?5Unable?5to?5GetSurfac@

; 52   : 	{
; 53   : 		TraceError("CMapOutdoor Unable to create Character Shadow depth Surface\n");

  000b3	e8 00 00 00 00	 call	 ?TraceError@@YAXPBDZZ	; TraceError
  000b8	83 c4 04	 add	 esp, 4
  000bb	5e		 pop	 esi
  000bc	5f		 pop	 edi

; 54   : 		return;
; 55   : 	}
; 56   : }

  000bd	c3		 ret	 0
$LN5@CreateChar:

; 48   : 		return;
; 49   : 	}
; 50   : 
; 51   : 	if (FAILED(ms_lpd3dDevice->CreateDepthStencilSurface(m_wShadowMapSize, m_wShadowMapSize, D3DFMT_D16, D3DMULTISAMPLE_NONE, &m_lpCharacterShadowMapDepthSurface)))

  000be	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?ms_lpd3dDevice@CGraphicBase@@1PAUIDirect3DDevice8@@A ; CGraphicBase::ms_lpd3dDevice
  000c4	8d 87 dc 01 00
	00		 lea	 eax, DWORD PTR [edi+476]
  000ca	0f b7 8f f8 01
	00 00		 movzx	 ecx, WORD PTR [edi+504]
  000d1	50		 push	 eax
  000d2	6a 00		 push	 0
  000d4	8b 32		 mov	 esi, DWORD PTR [edx]
  000d6	6a 50		 push	 80			; 00000050H
  000d8	51		 push	 ecx
  000d9	51		 push	 ecx
  000da	52		 push	 edx
  000db	ff 56 68	 call	 DWORD PTR [esi+104]
  000de	85 c0		 test	 eax, eax
  000e0	79 0d		 jns	 SHORT $LN8@CreateChar

; 52   : 	{
; 53   : 		TraceError("CMapOutdoor Unable to create Character Shadow depth Surface\n");

  000e2	68 00 00 00 00	 push	 OFFSET ??_C@_0DN@FOIDJBLJ@CMapOutdoor?5Unable?5to?5create?5Ch@
  000e7	e8 00 00 00 00	 call	 ?TraceError@@YAXPBDZZ	; TraceError
  000ec	83 c4 04	 add	 esp, 4
$LN8@CreateChar:
  000ef	5e		 pop	 esi
$LN6@CreateChar:
  000f0	5f		 pop	 edi

; 54   : 		return;
; 55   : 	}
; 56   : }

  000f1	c3		 ret	 0
?CreateCharacterShadowTexture@CMapOutdoor@@QAEXXZ ENDP	; CMapOutdoor::CreateCharacterShadowTexture
_TEXT	ENDS
; Function compile flags: /Ogtp
; File C:\DS Project\DS Files\Source\ClientSource\extern\include\d3dx8math.h
;	COMDAT ??0D3DXMATRIX@@QAE@XZ
_TEXT	SEGMENT
??0D3DXMATRIX@@QAE@XZ PROC				; D3DXMATRIX::D3DXMATRIX, COMDAT
; _this$ = ecx

; 177  :     D3DXMATRIX() {};

  00000	8b c1		 mov	 eax, ecx
  00002	c3		 ret	 0
??0D3DXMATRIX@@QAE@XZ ENDP				; D3DXMATRIX::D3DXMATRIX
_TEXT	ENDS
; Function compile flags: /Ogtp
;	COMDAT ??_H@YGXPAXIIP6EPAX0@Z@Z
_TEXT	SEGMENT
___t$ = 8						; size = 4
___s$ = 12						; size = 4
___n$ = 16						; size = 4
___f$ = 20						; size = 4
??_H@YGXPAXIIP6EPAX0@Z@Z PROC				; `vector constructor iterator', COMDAT
  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	56		 push	 esi
  00004	8b 75 10	 mov	 esi, DWORD PTR ___n$[ebp]
  00007	85 f6		 test	 esi, esi
  00009	74 16		 je	 SHORT $LN6@vector
  0000b	53		 push	 ebx
  0000c	8b 5d 14	 mov	 ebx, DWORD PTR ___f$[ebp]
  0000f	57		 push	 edi
  00010	8b 7d 08	 mov	 edi, DWORD PTR ___t$[ebp]
$LL2@vector:
  00013	8b cf		 mov	 ecx, edi
  00015	ff d3		 call	 ebx
  00017	03 7d 0c	 add	 edi, DWORD PTR ___s$[ebp]
  0001a	83 ee 01	 sub	 esi, 1
  0001d	75 f4		 jne	 SHORT $LL2@vector
  0001f	5f		 pop	 edi
  00020	5b		 pop	 ebx
$LN6@vector:
  00021	5e		 pop	 esi
  00022	5d		 pop	 ebp
  00023	c2 10 00	 ret	 16			; 00000010H
??_H@YGXPAXIIP6EPAX0@Z@Z ENDP				; `vector constructor iterator'
_TEXT	ENDS
END
