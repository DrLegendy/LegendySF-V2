; Listing generated by Microsoft (R) Optimizing Compiler Version 19.27.29112.0 

	TITLE	C:\DS Project\DS Files\Source\ClientSource\Client\eterGrnLib\ModelInstanceMotion.cpp
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB LIBCMT
INCLUDELIB OLDNAMES

PUBLIC	?SetMotionPointer@CGrannyModelInstance@@QAEXPBVCGrannyMotion@@MHM@Z ; CGrannyModelInstance::SetMotionPointer
PUBLIC	?ChangeMotionPointer@CGrannyModelInstance@@QAEXPBVCGrannyMotion@@HM@Z ; CGrannyModelInstance::ChangeMotionPointer
PUBLIC	?SetMotionAtEnd@CGrannyModelInstance@@QAEXXZ	; CGrannyModelInstance::SetMotionAtEnd
PUBLIC	?IsMotionPlaying@CGrannyModelInstance@@QAE_NXZ	; CGrannyModelInstance::IsMotionPlaying
PUBLIC	?CopyMotion@CGrannyModelInstance@@QAEXPAV1@_N@Z	; CGrannyModelInstance::CopyMotion
PUBLIC	__real@3e99999a
EXTRN	__imp__GrannyFreeControl@4:PROC
EXTRN	__imp__GrannyFreeControlOnceUnused@4:PROC
EXTRN	__imp__GrannyCompleteControlAt@8:PROC
EXTRN	__imp__GrannyControlIsComplete@4:PROC
EXTRN	__imp__GrannyFreeControlIfComplete@4:PROC
EXTRN	__imp__GrannyGetControlLoopCount@4:PROC
EXTRN	__imp__GrannySetControlLoopCount@8:PROC
EXTRN	__imp__GrannyGetControlSpeed@4:PROC
EXTRN	__imp__GrannySetControlSpeed@8:PROC
EXTRN	__imp__GrannyGetControlLocalDuration@4:PROC
EXTRN	__imp__GrannySetControlEaseIn@8:PROC
EXTRN	__imp__GrannySetControlEaseInCurve@28:PROC
EXTRN	__imp__GrannySetControlEaseOut@8:PROC
EXTRN	__imp__GrannySetControlEaseOutCurve@28:PROC
EXTRN	__imp__GrannyGetControlRawLocalClock@4:PROC
EXTRN	__imp__GrannySetControlRawLocalClock@8:PROC
EXTRN	__imp__GrannyPlayControlledAnimation@12:PROC
EXTRN	?GetGrannyAnimationPointer@CGrannyMotion@@QBEPAUgranny_animation@@XZ:PROC ; CGrannyMotion::GetGrannyAnimationPointer
EXTRN	?GetLocalTime@CGrannyModelInstance@@QAEMXZ:PROC	; CGrannyModelInstance::GetLocalTime
EXTRN	__fltused:DWORD
;	COMDAT __real@3e99999a
CONST	SEGMENT
__real@3e99999a DD 03e99999ar			; 0.3
CONST	ENDS
; Function compile flags: /Ogtp
; File C:\DS Project\DS Files\Source\ClientSource\Client\eterGrnLib\ModelInstanceMotion.cpp
;	COMDAT ?CopyMotion@CGrannyModelInstance@@QAEXPAV1@_N@Z
_TEXT	SEGMENT
_localTime$ = 8						; size = 4
_pModelInstance$ = 8					; size = 4
_bIsFreeSourceControl$ = 12				; size = 1
?CopyMotion@CGrannyModelInstance@@QAEXPAV1@_N@Z PROC	; CGrannyModelInstance::CopyMotion, COMDAT
; _this$ = ecx

; 6    : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	56		 push	 esi
  00004	57		 push	 edi

; 7    : 	if (!pModelInstance->IsMotionPlaying())

  00005	8b 7d 08	 mov	 edi, DWORD PTR _pModelInstance$[ebp]
  00008	8b f1		 mov	 esi, ecx
  0000a	8b cf		 mov	 ecx, edi
  0000c	e8 00 00 00 00	 call	 ?IsMotionPlaying@CGrannyModelInstance@@QAE_NXZ ; CGrannyModelInstance::IsMotionPlaying
  00011	84 c0		 test	 al, al
  00013	0f 84 ae 00 00
	00		 je	 $LN5@CopyMotion

; 8    : 		return;
; 9    : 
; 10   : 	if (m_pgrnCtrl)

  00019	8b 46 0c	 mov	 eax, DWORD PTR [esi+12]
  0001c	85 c0		 test	 eax, eax
  0001e	74 07		 je	 SHORT $LN3@CopyMotion

; 11   : 		GrannyFreeControl(m_pgrnCtrl);

  00020	50		 push	 eax
  00021	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GrannyFreeControl@4
$LN3@CopyMotion:

; 12   : 
; 13   : 	float localTime = GetLocalTime();

  00027	8b ce		 mov	 ecx, esi
  00029	e8 00 00 00 00	 call	 ?GetLocalTime@CGrannyModelInstance@@QAEMXZ ; CGrannyModelInstance::GetLocalTime

; 14   : 	m_pgrnAni = pModelInstance->m_pgrnAni;
; 15   : 	m_pgrnCtrl = GrannyPlayControlledAnimation(localTime, m_pgrnAni, m_pgrnModelInstance);

  0002e	ff 76 08	 push	 DWORD PTR [esi+8]
  00031	8b 47 10	 mov	 eax, DWORD PTR [edi+16]
  00034	50		 push	 eax
  00035	d9 5d 08	 fstp	 DWORD PTR _localTime$[ebp]
  00038	f3 0f 10 45 08	 movss	 xmm0, DWORD PTR _localTime$[ebp]
  0003d	51		 push	 ecx
  0003e	89 46 10	 mov	 DWORD PTR [esi+16], eax
  00041	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00046	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GrannyPlayControlledAnimation@12
  0004c	89 46 0c	 mov	 DWORD PTR [esi+12], eax

; 16   : 
; 17   : 	if (!m_pgrnCtrl)

  0004f	85 c0		 test	 eax, eax
  00051	74 74		 je	 SHORT $LN5@CopyMotion

; 18   : 		return;
; 19   : 
; 20   : 	GrannySetControlSpeed(m_pgrnCtrl, GrannyGetControlSpeed(pModelInstance->m_pgrnCtrl));

  00053	ff 77 0c	 push	 DWORD PTR [edi+12]
  00056	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GrannyGetControlSpeed@4
  0005c	51		 push	 ecx
  0005d	d9 1c 24	 fstp	 DWORD PTR [esp]
  00060	ff 76 0c	 push	 DWORD PTR [esi+12]
  00063	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GrannySetControlSpeed@8

; 21   : 	GrannySetControlLoopCount(m_pgrnCtrl, GrannyGetControlLoopCount(pModelInstance->m_pgrnCtrl));

  00069	ff 77 0c	 push	 DWORD PTR [edi+12]
  0006c	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GrannyGetControlLoopCount@4
  00072	50		 push	 eax
  00073	ff 76 0c	 push	 DWORD PTR [esi+12]
  00076	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GrannySetControlLoopCount@8

; 22   : 
; 23   : 	GrannySetControlEaseIn(m_pgrnCtrl, true);

  0007c	6a 01		 push	 1
  0007e	ff 76 0c	 push	 DWORD PTR [esi+12]
  00081	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GrannySetControlEaseIn@8

; 24   : 	GrannySetControlEaseOut(m_pgrnCtrl, false);

  00087	6a 00		 push	 0
  00089	ff 76 0c	 push	 DWORD PTR [esi+12]
  0008c	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GrannySetControlEaseOut@8

; 25   : 
; 26   : 	GrannySetControlRawLocalClock(m_pgrnCtrl, GrannyGetControlRawLocalClock(pModelInstance->m_pgrnCtrl));

  00092	ff 77 0c	 push	 DWORD PTR [edi+12]
  00095	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GrannyGetControlRawLocalClock@4
  0009b	51		 push	 ecx
  0009c	d9 1c 24	 fstp	 DWORD PTR [esp]
  0009f	ff 76 0c	 push	 DWORD PTR [esi+12]
  000a2	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GrannySetControlRawLocalClock@8

; 27   : 
; 28   : 	GrannyFreeControlOnceUnused(m_pgrnCtrl);

  000a8	ff 76 0c	 push	 DWORD PTR [esi+12]
  000ab	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GrannyFreeControlOnceUnused@4

; 29   : 
; 30   : 	if (bIsFreeSourceControl)

  000b1	80 7d 0c 00	 cmp	 BYTE PTR _bIsFreeSourceControl$[ebp], 0
  000b5	74 10		 je	 SHORT $LN5@CopyMotion

; 31   : 	{
; 32   : 		GrannyFreeControl(pModelInstance->m_pgrnCtrl);

  000b7	ff 77 0c	 push	 DWORD PTR [edi+12]
  000ba	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GrannyFreeControl@4

; 33   : 		pModelInstance->m_pgrnCtrl = NULL;

  000c0	c7 47 0c 00 00
	00 00		 mov	 DWORD PTR [edi+12], 0
$LN5@CopyMotion:

; 34   : 	}
; 35   : }

  000c7	5f		 pop	 edi
  000c8	5e		 pop	 esi
  000c9	5d		 pop	 ebp
  000ca	c2 08 00	 ret	 8
?CopyMotion@CGrannyModelInstance@@QAEXPAV1@_N@Z ENDP	; CGrannyModelInstance::CopyMotion
_TEXT	ENDS
; Function compile flags: /Ogtp
; File C:\DS Project\DS Files\Source\ClientSource\Client\eterGrnLib\ModelInstanceMotion.cpp
;	COMDAT ?IsMotionPlaying@CGrannyModelInstance@@QAE_NXZ
_TEXT	SEGMENT
?IsMotionPlaying@CGrannyModelInstance@@QAE_NXZ PROC	; CGrannyModelInstance::IsMotionPlaying, COMDAT
; _this$ = ecx

; 39   : 	if (!m_pgrnCtrl)

  00000	8b 41 0c	 mov	 eax, DWORD PTR [ecx+12]
  00003	85 c0		 test	 eax, eax
  00005	74 0e		 je	 SHORT $LN5@IsMotionPl

; 40   : 		return false;
; 41   : 
; 42   : 	if (GrannyControlIsComplete(m_pgrnCtrl))

  00007	50		 push	 eax
  00008	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GrannyControlIsComplete@4
  0000e	84 c0		 test	 al, al
  00010	75 03		 jne	 SHORT $LN5@IsMotionPl

; 44   : 
; 45   : 	return true;

  00012	b0 01		 mov	 al, 1

; 46   : }

  00014	c3		 ret	 0
$LN5@IsMotionPl:

; 43   : 		return false;

  00015	32 c0		 xor	 al, al

; 46   : }

  00017	c3		 ret	 0
?IsMotionPlaying@CGrannyModelInstance@@QAE_NXZ ENDP	; CGrannyModelInstance::IsMotionPlaying
_TEXT	ENDS
; Function compile flags: /Ogtp
; File C:\DS Project\DS Files\Source\ClientSource\Client\eterGrnLib\ModelInstanceMotion.cpp
;	COMDAT ?SetMotionAtEnd@CGrannyModelInstance@@QAEXXZ
_TEXT	SEGMENT
_endingTime$ = -4					; size = 4
?SetMotionAtEnd@CGrannyModelInstance@@QAEXXZ PROC	; CGrannyModelInstance::SetMotionAtEnd, COMDAT
; _this$ = ecx

; 140  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	51		 push	 ecx
  00004	56		 push	 esi
  00005	8b f1		 mov	 esi, ecx

; 141  : 	if (!m_pgrnCtrl)

  00007	8b 46 0c	 mov	 eax, DWORD PTR [esi+12]
  0000a	85 c0		 test	 eax, eax
  0000c	74 1e		 je	 SHORT $LN1@SetMotionA

; 142  : 		return;
; 143  : 
; 144  : 	//Tracef("%f\n", endingTime);
; 145  : 	float endingTime = GrannyGetControlLocalDuration(m_pgrnCtrl);

  0000e	50		 push	 eax
  0000f	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GrannyGetControlLocalDuration@4
  00015	d9 5d fc	 fstp	 DWORD PTR _endingTime$[ebp]

; 146  : 	GrannySetControlRawLocalClock(m_pgrnCtrl, endingTime);

  00018	f3 0f 10 45 fc	 movss	 xmm0, DWORD PTR _endingTime$[ebp]
  0001d	51		 push	 ecx
  0001e	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00023	ff 76 0c	 push	 DWORD PTR [esi+12]
  00026	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GrannySetControlRawLocalClock@8
$LN1@SetMotionA:
  0002c	5e		 pop	 esi

; 147  : }

  0002d	8b e5		 mov	 esp, ebp
  0002f	5d		 pop	 ebp
  00030	c3		 ret	 0
?SetMotionAtEnd@CGrannyModelInstance@@QAEXXZ ENDP	; CGrannyModelInstance::SetMotionAtEnd
_TEXT	ENDS
; Function compile flags: /Ogtp
; File C:\DS Project\DS Files\Source\ClientSource\Client\eterGrnLib\ModelInstanceMotion.cpp
;	COMDAT ?ChangeMotionPointer@CGrannyModelInstance@@QAEXPBVCGrannyMotion@@HM@Z
_TEXT	SEGMENT
_localTime$ = -4					; size = 4
_pMotion$ = 8						; size = 4
_loopCount$ = 12					; size = 4
_speedRatio$ = 16					; size = 4
?ChangeMotionPointer@CGrannyModelInstance@@QAEXPBVCGrannyMotion@@HM@Z PROC ; CGrannyModelInstance::ChangeMotionPointer, COMDAT
; _this$ = ecx

; 110  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	51		 push	 ecx
  00004	56		 push	 esi
  00005	8b f1		 mov	 esi, ecx
  00007	57		 push	 edi

; 111  : 	granny_model_instance * pgrnModelInstance = m_pgrnModelInstance;

  00008	8b 7e 08	 mov	 edi, DWORD PTR [esi+8]

; 112  : 	if (!pgrnModelInstance)

  0000b	85 ff		 test	 edi, edi
  0000d	0f 84 a8 00 00
	00		 je	 $LN1@ChangeMoti

; 113  : 		return;
; 114  : 
; 115  : 	float fSkipTime = 0.3f;
; 116  : 	float localTime = GetLocalTime() - fSkipTime;

  00013	e8 00 00 00 00	 call	 ?GetLocalTime@CGrannyModelInstance@@QAEMXZ ; CGrannyModelInstance::GetLocalTime
  00018	d8 25 00 00 00
	00		 fsub	 DWORD PTR __real@3e99999a

; 117  : 
; 118  : 	if (m_pgrnCtrl)

  0001e	8b 46 0c	 mov	 eax, DWORD PTR [esi+12]
  00021	d9 5d fc	 fstp	 DWORD PTR _localTime$[ebp]
  00024	85 c0		 test	 eax, eax
  00026	74 31		 je	 SHORT $LN3@ChangeMoti

; 119  : 	{
; 120  : 		GrannySetControlEaseIn(m_pgrnCtrl, false);

  00028	6a 00		 push	 0
  0002a	50		 push	 eax
  0002b	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GrannySetControlEaseIn@8

; 121  : 		GrannySetControlEaseOut(m_pgrnCtrl, false);

  00031	6a 00		 push	 0
  00033	ff 76 0c	 push	 DWORD PTR [esi+12]
  00036	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GrannySetControlEaseOut@8

; 122  : 		GrannyCompleteControlAt(m_pgrnCtrl, localTime);

  0003c	f3 0f 10 45 fc	 movss	 xmm0, DWORD PTR _localTime$[ebp]
  00041	51		 push	 ecx
  00042	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00047	ff 76 0c	 push	 DWORD PTR [esi+12]
  0004a	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GrannyCompleteControlAt@8

; 123  : 		GrannyFreeControlIfComplete(m_pgrnCtrl);

  00050	ff 76 0c	 push	 DWORD PTR [esi+12]
  00053	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GrannyFreeControlIfComplete@4
$LN3@ChangeMoti:

; 124  : 	}
; 125  : 
; 126  : 	m_pgrnAni = pMotion->GetGrannyAnimationPointer();

  00059	8b 4d 08	 mov	 ecx, DWORD PTR _pMotion$[ebp]
  0005c	e8 00 00 00 00	 call	 ?GetGrannyAnimationPointer@CGrannyMotion@@QBEPAUgranny_animation@@XZ ; CGrannyMotion::GetGrannyAnimationPointer

; 127  : 	m_pgrnCtrl = GrannyPlayControlledAnimation(localTime, m_pgrnAni, pgrnModelInstance);

  00061	f3 0f 10 45 fc	 movss	 xmm0, DWORD PTR _localTime$[ebp]
  00066	57		 push	 edi
  00067	50		 push	 eax
  00068	51		 push	 ecx
  00069	89 46 10	 mov	 DWORD PTR [esi+16], eax
  0006c	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00071	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GrannyPlayControlledAnimation@12
  00077	89 46 0c	 mov	 DWORD PTR [esi+12], eax

; 128  : 	if (!m_pgrnCtrl)

  0007a	85 c0		 test	 eax, eax
  0007c	74 3d		 je	 SHORT $LN1@ChangeMoti

; 129  : 		return;
; 130  : 
; 131  : 	GrannySetControlSpeed(m_pgrnCtrl, speedRatio);

  0007e	f3 0f 10 45 10	 movss	 xmm0, DWORD PTR _speedRatio$[ebp]
  00083	51		 push	 ecx
  00084	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00089	50		 push	 eax
  0008a	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GrannySetControlSpeed@8

; 132  : 	GrannySetControlLoopCount(m_pgrnCtrl, loopCount);

  00090	ff 75 0c	 push	 DWORD PTR _loopCount$[ebp]
  00093	ff 76 0c	 push	 DWORD PTR [esi+12]
  00096	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GrannySetControlLoopCount@8

; 133  : 	GrannySetControlEaseIn(m_pgrnCtrl, false);

  0009c	6a 00		 push	 0
  0009e	ff 76 0c	 push	 DWORD PTR [esi+12]
  000a1	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GrannySetControlEaseIn@8

; 134  : 	GrannySetControlEaseOut(m_pgrnCtrl, false);

  000a7	6a 00		 push	 0
  000a9	ff 76 0c	 push	 DWORD PTR [esi+12]
  000ac	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GrannySetControlEaseOut@8

; 135  : 
; 136  : 	GrannyFreeControlOnceUnused(m_pgrnCtrl);

  000b2	ff 76 0c	 push	 DWORD PTR [esi+12]
  000b5	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GrannyFreeControlOnceUnused@4
$LN1@ChangeMoti:

; 137  : }

  000bb	5f		 pop	 edi
  000bc	5e		 pop	 esi
  000bd	8b e5		 mov	 esp, ebp
  000bf	5d		 pop	 ebp
  000c0	c2 0c 00	 ret	 12			; 0000000cH
?ChangeMotionPointer@CGrannyModelInstance@@QAEXPBVCGrannyMotion@@HM@Z ENDP ; CGrannyModelInstance::ChangeMotionPointer
_TEXT	ENDS
; Function compile flags: /Ogtp
; File C:\DS Project\DS Files\Source\ClientSource\Client\eterGrnLib\ModelInstanceMotion.cpp
;	COMDAT ?SetMotionPointer@CGrannyModelInstance@@QAEXPBVCGrannyMotion@@MHM@Z
_TEXT	SEGMENT
$T1 = -12						; size = 4
_localTime$ = -8					; size = 4
_isFirst$1$ = -1					; size = 1
_pMotion$ = 8						; size = 4
_blendTime$ = 12					; size = 4
_loopCount$ = 16					; size = 4
_speedRatio$ = 20					; size = 4
?SetMotionPointer@CGrannyModelInstance@@QAEXPBVCGrannyMotion@@MHM@Z PROC ; CGrannyModelInstance::SetMotionPointer, COMDAT
; _this$ = ecx

; 49   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 0c	 sub	 esp, 12			; 0000000cH
  00006	56		 push	 esi
  00007	8b f1		 mov	 esi, ecx

; 50   : 	// TEST
; 51   : 	if (!m_pgrnWorldPoseReal)

  00009	83 7e 3c 00	 cmp	 DWORD PTR [esi+60], 0
  0000d	0f 84 8c 01 00
	00		 je	 $LN1@SetMotionP

; 52   : 		return;
; 53   : 	// END_OF_TEST
; 54   : 
; 55   : 	granny_model_instance * pgrnModelInstance = m_pgrnModelInstance;

  00013	57		 push	 edi
  00014	8b 7e 08	 mov	 edi, DWORD PTR [esi+8]

; 56   : 	if (!pgrnModelInstance)

  00017	85 ff		 test	 edi, edi
  00019	0f 84 7f 01 00
	00		 je	 $LN11@SetMotionP

; 57   : 		return;
; 58   : 
; 59   : 	float localTime = GetLocalTime();

  0001f	53		 push	 ebx
  00020	e8 00 00 00 00	 call	 ?GetLocalTime@CGrannyModelInstance@@QAEMXZ ; CGrannyModelInstance::GetLocalTime

; 60   : 
; 61   : 	bool isFirst=false;
; 62   : 	if (m_pgrnCtrl)

  00025	8b 4e 0c	 mov	 ecx, DWORD PTR [esi+12]
  00028	8b 1d 00 00 00
	00		 mov	 ebx, DWORD PTR __imp__GrannySetControlEaseIn@8
  0002e	c6 45 ff 00	 mov	 BYTE PTR _isFirst$1$[ebp], 0
  00032	d9 5d f8	 fstp	 DWORD PTR _localTime$[ebp]
  00035	85 c9		 test	 ecx, ecx
  00037	74 78		 je	 SHORT $LN4@SetMotionP

; 63   : 	{
; 64   : 		//float durationLeft = GrannyGetControlDurationLeft(m_pgrnCtrl);
; 65   : 		//float easeOutTime = (blendTime < durationLeft) ? blendTime : durationLeft;
; 66   : 		//float oldCtrlFinishTime = GrannyEaseControlOut(m_pgrnCtrl, blendTime); //easeOutTime);
; 67   : 		GrannySetControlEaseOutCurve(m_pgrnCtrl, localTime, localTime + blendTime, 1.0f, 1.0f, 0.0f, 0.0f);

  00039	f3 0f 10 4d f8	 movss	 xmm1, DWORD PTR _localTime$[ebp]
  0003e	83 ec 18	 sub	 esp, 24			; 00000018H
  00041	0f 28 c1	 movaps	 xmm0, xmm1
  00044	f3 0f 58 45 0c	 addss	 xmm0, DWORD PTR _blendTime$[ebp]
  00049	c7 44 24 14 00
	00 00 00	 mov	 DWORD PTR [esp+20], 0
  00051	c7 44 24 10 00
	00 00 00	 mov	 DWORD PTR [esp+16], 0
  00059	c7 44 24 0c 00
	00 80 3f	 mov	 DWORD PTR [esp+12], 1065353216 ; 3f800000H
  00061	c7 44 24 08 00
	00 80 3f	 mov	 DWORD PTR [esp+8], 1065353216 ; 3f800000H
  00069	f3 0f 11 44 24
	04		 movss	 DWORD PTR [esp+4], xmm0
  0006f	f3 0f 11 0c 24	 movss	 DWORD PTR [esp], xmm1
  00074	51		 push	 ecx
  00075	f3 0f 11 45 f4	 movss	 DWORD PTR $T1[ebp], xmm0
  0007a	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GrannySetControlEaseOutCurve@28

; 68   : 
; 69   : 		GrannySetControlEaseIn(m_pgrnCtrl, false);

  00080	6a 00		 push	 0
  00082	ff 76 0c	 push	 DWORD PTR [esi+12]
  00085	ff d3		 call	 ebx

; 70   : 		GrannySetControlEaseOut(m_pgrnCtrl, true);

  00087	6a 01		 push	 1
  00089	ff 76 0c	 push	 DWORD PTR [esi+12]
  0008c	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GrannySetControlEaseOut@8

; 71   : 
; 72   : 		//Tracef("easeOut %f\n", easeOutTime);
; 73   : 		GrannyCompleteControlAt(m_pgrnCtrl, localTime + blendTime);

  00092	f3 0f 10 45 f4	 movss	 xmm0, DWORD PTR $T1[ebp]
  00097	51		 push	 ecx
  00098	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  0009d	ff 76 0c	 push	 DWORD PTR [esi+12]
  000a0	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GrannyCompleteControlAt@8

; 74   : 		//GrannyCompleteControlAt(m_pgrnCtrl, oldCtrlFinishTime);
; 75   : 		//GrannyCompleteControlAt(m_pgrnCtrl, localTime);
; 76   : 		GrannyFreeControlIfComplete(m_pgrnCtrl);

  000a6	ff 76 0c	 push	 DWORD PTR [esi+12]
  000a9	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GrannyFreeControlIfComplete@4

; 77   : 	}

  000af	eb 13		 jmp	 SHORT $LN5@SetMotionP
$LN4@SetMotionP:

; 78   : 	else
; 79   : 	{
; 80   : 		isFirst=true;

  000b1	f3 0f 10 45 f8	 movss	 xmm0, DWORD PTR _localTime$[ebp]
  000b6	f3 0f 58 45 0c	 addss	 xmm0, DWORD PTR _blendTime$[ebp]
  000bb	c6 45 ff 01	 mov	 BYTE PTR _isFirst$1$[ebp], 1
  000bf	f3 0f 11 45 f4	 movss	 DWORD PTR $T1[ebp], xmm0
$LN5@SetMotionP:

; 81   : 	}
; 82   : 
; 83   : 	m_pgrnAni = pMotion->GetGrannyAnimationPointer();

  000c4	8b 4d 08	 mov	 ecx, DWORD PTR _pMotion$[ebp]
  000c7	e8 00 00 00 00	 call	 ?GetGrannyAnimationPointer@CGrannyMotion@@QBEPAUgranny_animation@@XZ ; CGrannyMotion::GetGrannyAnimationPointer

; 84   : 	m_pgrnCtrl = GrannyPlayControlledAnimation(localTime, m_pgrnAni, pgrnModelInstance);

  000cc	f3 0f 10 45 f8	 movss	 xmm0, DWORD PTR _localTime$[ebp]
  000d1	57		 push	 edi
  000d2	50		 push	 eax
  000d3	51		 push	 ecx
  000d4	89 46 10	 mov	 DWORD PTR [esi+16], eax
  000d7	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  000dc	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GrannyPlayControlledAnimation@12
  000e2	89 46 0c	 mov	 DWORD PTR [esi+12], eax

; 85   : 	if (!m_pgrnCtrl)

  000e5	85 c0		 test	 eax, eax
  000e7	0f 84 b0 00 00
	00		 je	 $LN12@SetMotionP

; 86   : 		return;
; 87   : 
; 88   : 	GrannySetControlSpeed(m_pgrnCtrl, speedRatio);

  000ed	f3 0f 10 45 14	 movss	 xmm0, DWORD PTR _speedRatio$[ebp]
  000f2	51		 push	 ecx
  000f3	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  000f8	50		 push	 eax
  000f9	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GrannySetControlSpeed@8

; 89   : 	GrannySetControlLoopCount(m_pgrnCtrl, loopCount);

  000ff	ff 75 10	 push	 DWORD PTR _loopCount$[ebp]
  00102	ff 76 0c	 push	 DWORD PTR [esi+12]
  00105	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GrannySetControlLoopCount@8

; 90   : 
; 91   : 	if (isFirst)

  0010b	80 7d ff 00	 cmp	 BYTE PTR _isFirst$1$[ebp], 0
  0010f	8b 46 0c	 mov	 eax, DWORD PTR [esi+12]
  00112	74 22		 je	 SHORT $LN7@SetMotionP

; 92   : 	{
; 93   : 		GrannySetControlEaseIn(m_pgrnCtrl, false);

  00114	6a 00		 push	 0
  00116	50		 push	 eax
  00117	ff d3		 call	 ebx

; 94   : 		GrannySetControlEaseOut(m_pgrnCtrl, false);

  00119	6a 00		 push	 0
  0011b	ff 76 0c	 push	 DWORD PTR [esi+12]
  0011e	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GrannySetControlEaseOut@8

; 102  : 	}
; 103  : 
; 104  : 	//GrannyEaseControlIn(m_pgrnCtrl, blendTime, false);
; 105  : 	GrannyFreeControlOnceUnused(m_pgrnCtrl);

  00124	ff 76 0c	 push	 DWORD PTR [esi+12]
  00127	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GrannyFreeControlOnceUnused@4
  0012d	5b		 pop	 ebx
  0012e	5f		 pop	 edi
  0012f	5e		 pop	 esi

; 106  : 	//Tracef("easeIn %f\n", blendTime);
; 107  : }

  00130	8b e5		 mov	 esp, ebp
  00132	5d		 pop	 ebp
  00133	c2 10 00	 ret	 16			; 00000010H
$LN7@SetMotionP:

; 95   : 	}
; 96   : 	else
; 97   : 	{
; 98   : 		GrannySetControlEaseIn(m_pgrnCtrl, true);

  00136	6a 01		 push	 1
  00138	50		 push	 eax
  00139	ff d3		 call	 ebx

; 99   : 		GrannySetControlEaseOut(m_pgrnCtrl, false);

  0013b	6a 00		 push	 0
  0013d	ff 76 0c	 push	 DWORD PTR [esi+12]
  00140	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GrannySetControlEaseOut@8

; 100  : 		if (blendTime > 0.0f)

  00146	f3 0f 10 45 0c	 movss	 xmm0, DWORD PTR _blendTime$[ebp]
  0014b	0f 57 c9	 xorps	 xmm1, xmm1
  0014e	0f 2f c1	 comiss	 xmm0, xmm1
  00151	76 41		 jbe	 SHORT $LN9@SetMotionP

; 101  : 			GrannySetControlEaseInCurve(m_pgrnCtrl, localTime, localTime + blendTime, 0.0f, 0.0f, 1.0f, 1.0f);

  00153	f3 0f 10 45 f4	 movss	 xmm0, DWORD PTR $T1[ebp]
  00158	83 ec 18	 sub	 esp, 24			; 00000018H
  0015b	c7 44 24 14 00
	00 80 3f	 mov	 DWORD PTR [esp+20], 1065353216 ; 3f800000H
  00163	c7 44 24 10 00
	00 80 3f	 mov	 DWORD PTR [esp+16], 1065353216 ; 3f800000H
  0016b	c7 44 24 0c 00
	00 00 00	 mov	 DWORD PTR [esp+12], 0
  00173	c7 44 24 08 00
	00 00 00	 mov	 DWORD PTR [esp+8], 0
  0017b	f3 0f 11 44 24
	04		 movss	 DWORD PTR [esp+4], xmm0
  00181	f3 0f 10 45 f8	 movss	 xmm0, DWORD PTR _localTime$[ebp]
  00186	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  0018b	ff 76 0c	 push	 DWORD PTR [esi+12]
  0018e	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GrannySetControlEaseInCurve@28
$LN9@SetMotionP:

; 102  : 	}
; 103  : 
; 104  : 	//GrannyEaseControlIn(m_pgrnCtrl, blendTime, false);
; 105  : 	GrannyFreeControlOnceUnused(m_pgrnCtrl);

  00194	ff 76 0c	 push	 DWORD PTR [esi+12]
  00197	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GrannyFreeControlOnceUnused@4
$LN12@SetMotionP:
  0019d	5b		 pop	 ebx
$LN11@SetMotionP:
  0019e	5f		 pop	 edi
$LN1@SetMotionP:
  0019f	5e		 pop	 esi

; 106  : 	//Tracef("easeIn %f\n", blendTime);
; 107  : }

  001a0	8b e5		 mov	 esp, ebp
  001a2	5d		 pop	 ebp
  001a3	c2 10 00	 ret	 16			; 00000010H
?SetMotionPointer@CGrannyModelInstance@@QAEXPBVCGrannyMotion@@MHM@Z ENDP ; CGrannyModelInstance::SetMotionPointer
_TEXT	ENDS
END
