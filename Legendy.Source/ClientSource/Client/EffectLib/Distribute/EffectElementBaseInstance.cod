; Listing generated by Microsoft (R) Optimizing Compiler Version 19.27.29112.0 

	TITLE	C:\DS Project\DS Files\Source\ClientSource\Client\EffectLib\EffectElementBaseInstance.cpp
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB LIBCMT
INCLUDELIB OLDNAMES

PUBLIC	??0CEffectElementBaseInstance@@QAE@XZ		; CEffectElementBaseInstance::CEffectElementBaseInstance
PUBLIC	??1CEffectElementBaseInstance@@UAE@XZ		; CEffectElementBaseInstance::~CEffectElementBaseInstance
PUBLIC	?SetDataPointer@CEffectElementBaseInstance@@QAEXPAVCEffectElementBase@@@Z ; CEffectElementBaseInstance::SetDataPointer
PUBLIC	?Initialize@CEffectElementBaseInstance@@QAEXXZ	; CEffectElementBaseInstance::Initialize
PUBLIC	?Destroy@CEffectElementBaseInstance@@QAEXXZ	; CEffectElementBaseInstance::Destroy
PUBLIC	?SetLocalMatrixPointer@CEffectElementBaseInstance@@QAEXPBUD3DXMATRIX@@@Z ; CEffectElementBaseInstance::SetLocalMatrixPointer
PUBLIC	?Update@CEffectElementBaseInstance@@QAE_NM@Z	; CEffectElementBaseInstance::Update
PUBLIC	?Render@CEffectElementBaseInstance@@QAEXXZ	; CEffectElementBaseInstance::Render
PUBLIC	?isActive@CEffectElementBaseInstance@@QAE_NXZ	; CEffectElementBaseInstance::isActive
PUBLIC	?SetActive@CEffectElementBaseInstance@@QAEXXZ	; CEffectElementBaseInstance::SetActive
PUBLIC	?SetDeactive@CEffectElementBaseInstance@@QAEXXZ	; CEffectElementBaseInstance::SetDeactive
PUBLIC	??_GCEffectElementBaseInstance@@UAEPAXI@Z	; CEffectElementBaseInstance::`scalar deleting destructor'
PUBLIC	?ms_singleton@?$CSingleton@VCTimer@@@@0PAVCTimer@@A ; CSingleton<CTimer>::ms_singleton
PUBLIC	??_7CEffectElementBaseInstance@@6B@		; CEffectElementBaseInstance::`vftable'
PUBLIC	??_R4CEffectElementBaseInstance@@6B@		; CEffectElementBaseInstance::`RTTI Complete Object Locator'
PUBLIC	??_R0?AVCEffectElementBaseInstance@@@8		; CEffectElementBaseInstance `RTTI Type Descriptor'
PUBLIC	??_R3CEffectElementBaseInstance@@8		; CEffectElementBaseInstance::`RTTI Class Hierarchy Descriptor'
PUBLIC	??_R2CEffectElementBaseInstance@@8		; CEffectElementBaseInstance::`RTTI Base Class Array'
PUBLIC	??_R1A@?0A@EA@CEffectElementBaseInstance@@8	; CEffectElementBaseInstance::`RTTI Base Class Descriptor at (0,-1,0,64)'
EXTRN	__purecall:PROC
EXTRN	??3@YAXPAXI@Z:PROC				; operator delete
EXTRN	?GetCurrentMillisecond@CTimer@@QAEKXZ:PROC	; CTimer::GetCurrentMillisecond
EXTRN	?GetStartTime@CEffectElementBase@@QAEMXZ:PROC	; CEffectElementBase::GetStartTime
EXTRN	??_ECEffectElementBaseInstance@@UAEPAXI@Z:PROC	; CEffectElementBaseInstance::`vector deleting destructor'
EXTRN	??_7type_info@@6B@:QWORD			; type_info::`vftable'
EXTRN	__fltused:DWORD
;	COMDAT ?ms_singleton@?$CSingleton@VCTimer@@@@0PAVCTimer@@A
_BSS	SEGMENT
?ms_singleton@?$CSingleton@VCTimer@@@@0PAVCTimer@@A DD 01H DUP (?) ; CSingleton<CTimer>::ms_singleton
_BSS	ENDS
;	COMDAT ??_R1A@?0A@EA@CEffectElementBaseInstance@@8
rdata$r	SEGMENT
??_R1A@?0A@EA@CEffectElementBaseInstance@@8 DD FLAT:??_R0?AVCEffectElementBaseInstance@@@8 ; CEffectElementBaseInstance::`RTTI Base Class Descriptor at (0,-1,0,64)'
	DD	00H
	DD	00H
	DD	0ffffffffH
	DD	00H
	DD	040H
	DD	FLAT:??_R3CEffectElementBaseInstance@@8
rdata$r	ENDS
;	COMDAT ??_R2CEffectElementBaseInstance@@8
rdata$r	SEGMENT
??_R2CEffectElementBaseInstance@@8 DD FLAT:??_R1A@?0A@EA@CEffectElementBaseInstance@@8 ; CEffectElementBaseInstance::`RTTI Base Class Array'
rdata$r	ENDS
;	COMDAT ??_R3CEffectElementBaseInstance@@8
rdata$r	SEGMENT
??_R3CEffectElementBaseInstance@@8 DD 00H		; CEffectElementBaseInstance::`RTTI Class Hierarchy Descriptor'
	DD	00H
	DD	01H
	DD	FLAT:??_R2CEffectElementBaseInstance@@8
rdata$r	ENDS
;	COMDAT ??_R0?AVCEffectElementBaseInstance@@@8
data$r	SEGMENT
??_R0?AVCEffectElementBaseInstance@@@8 DD FLAT:??_7type_info@@6B@ ; CEffectElementBaseInstance `RTTI Type Descriptor'
	DD	00H
	DB	'.?AVCEffectElementBaseInstance@@', 00H
data$r	ENDS
;	COMDAT ??_R4CEffectElementBaseInstance@@6B@
rdata$r	SEGMENT
??_R4CEffectElementBaseInstance@@6B@ DD 00H		; CEffectElementBaseInstance::`RTTI Complete Object Locator'
	DD	00H
	DD	00H
	DD	FLAT:??_R0?AVCEffectElementBaseInstance@@@8
	DD	FLAT:??_R3CEffectElementBaseInstance@@8
rdata$r	ENDS
;	COMDAT ??_7CEffectElementBaseInstance@@6B@
CONST	SEGMENT
??_7CEffectElementBaseInstance@@6B@ DD FLAT:??_R4CEffectElementBaseInstance@@6B@ ; CEffectElementBaseInstance::`vftable'
	DD	FLAT:??_ECEffectElementBaseInstance@@UAEPAXI@Z
	DD	FLAT:__purecall
	DD	FLAT:__purecall
	DD	FLAT:__purecall
	DD	FLAT:__purecall
	DD	FLAT:__purecall
CONST	ENDS
; Function compile flags: /Ogtp
;	COMDAT ??_GCEffectElementBaseInstance@@UAEPAXI@Z
_TEXT	SEGMENT
___flags$ = 8						; size = 4
??_GCEffectElementBaseInstance@@UAEPAXI@Z PROC		; CEffectElementBaseInstance::`scalar deleting destructor', COMDAT
; _this$ = ecx
  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	56		 push	 esi
  00004	8b f1		 mov	 esi, ecx
  00006	e8 00 00 00 00	 call	 ??1CEffectElementBaseInstance@@UAE@XZ ; CEffectElementBaseInstance::~CEffectElementBaseInstance
  0000b	f6 45 08 01	 test	 BYTE PTR ___flags$[ebp], 1
  0000f	74 0b		 je	 SHORT $LN4@scalar
  00011	6a 24		 push	 36			; 00000024H
  00013	56		 push	 esi
  00014	e8 00 00 00 00	 call	 ??3@YAXPAXI@Z		; operator delete
  00019	83 c4 08	 add	 esp, 8
$LN4@scalar:
  0001c	8b c6		 mov	 eax, esi
  0001e	5e		 pop	 esi
  0001f	5d		 pop	 ebp
  00020	c2 04 00	 ret	 4
??_GCEffectElementBaseInstance@@UAEPAXI@Z ENDP		; CEffectElementBaseInstance::`scalar deleting destructor'
_TEXT	ENDS
; Function compile flags: /Ogtp
; File C:\DS Project\DS Files\Source\ClientSource\Client\EffectLib\EffectElementBaseInstance.cpp
;	COMDAT ?SetDeactive@CEffectElementBaseInstance@@QAEXXZ
_TEXT	SEGMENT
?SetDeactive@CEffectElementBaseInstance@@QAEXXZ PROC	; CEffectElementBaseInstance::SetDeactive, COMDAT
; _this$ = ecx

; 67   : 	m_isActive = false;

  00000	c6 41 08 00	 mov	 BYTE PTR [ecx+8], 0

; 68   : }

  00004	c3		 ret	 0
?SetDeactive@CEffectElementBaseInstance@@QAEXXZ ENDP	; CEffectElementBaseInstance::SetDeactive
_TEXT	ENDS
; Function compile flags: /Ogtp
; File C:\DS Project\DS Files\Source\ClientSource\Client\EffectLib\EffectElementBaseInstance.cpp
;	COMDAT ?SetActive@CEffectElementBaseInstance@@QAEXXZ
_TEXT	SEGMENT
?SetActive@CEffectElementBaseInstance@@QAEXXZ PROC	; CEffectElementBaseInstance::SetActive, COMDAT
; _this$ = ecx

; 63   : 	m_isActive = true;

  00000	c6 41 08 01	 mov	 BYTE PTR [ecx+8], 1

; 64   : }

  00004	c3		 ret	 0
?SetActive@CEffectElementBaseInstance@@QAEXXZ ENDP	; CEffectElementBaseInstance::SetActive
_TEXT	ENDS
; Function compile flags: /Ogtp
; File C:\DS Project\DS Files\Source\ClientSource\Client\EffectLib\EffectElementBaseInstance.cpp
;	COMDAT ?isActive@CEffectElementBaseInstance@@QAE_NXZ
_TEXT	SEGMENT
?isActive@CEffectElementBaseInstance@@QAE_NXZ PROC	; CEffectElementBaseInstance::isActive, COMDAT
; _this$ = ecx

; 59   : 	return m_isActive;

  00000	8a 41 08	 mov	 al, BYTE PTR [ecx+8]

; 60   : }

  00003	c3		 ret	 0
?isActive@CEffectElementBaseInstance@@QAE_NXZ ENDP	; CEffectElementBaseInstance::isActive
_TEXT	ENDS
; Function compile flags: /Ogtp
; File C:\DS Project\DS Files\Source\ClientSource\Client\EffectLib\EffectElementBaseInstance.cpp
;	COMDAT ?Render@CEffectElementBaseInstance@@QAEXXZ
_TEXT	SEGMENT
?Render@CEffectElementBaseInstance@@QAEXXZ PROC		; CEffectElementBaseInstance::Render, COMDAT
; _this$ = ecx

; 24   : 	if (!m_bStart)

  00000	80 79 1c 00	 cmp	 BYTE PTR [ecx+28], 0
  00004	74 05		 je	 SHORT $LN1@Render

; 25   : 		return;
; 26   : 
; 27   : 	assert(mc_pmatLocal);
; 28   : 
; 29   : 	OnRender();

  00006	8b 01		 mov	 eax, DWORD PTR [ecx]
  00008	ff 60 14	 jmp	 DWORD PTR [eax+20]
$LN1@Render:

; 30   : }

  0000b	c3		 ret	 0
?Render@CEffectElementBaseInstance@@QAEXXZ ENDP		; CEffectElementBaseInstance::Render
_TEXT	ENDS
; Function compile flags: /Ogtp
; File C:\DS Project\DS Files\Source\ClientSource\Client\EffectLib\EffectElementBaseInstance.cpp
;	COMDAT ?Update@CEffectElementBaseInstance@@QAE_NM@Z
_TEXT	SEGMENT
_fElapsedTime$ = 8					; size = 4
?Update@CEffectElementBaseInstance@@QAE_NM@Z PROC	; CEffectElementBaseInstance::Update, COMDAT
; _this$ = ecx

; 5    : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 6    : 	if (m_bStart)

  00003	80 79 1c 00	 cmp	 BYTE PTR [ecx+28], 0
  00007	74 29		 je	 SHORT $LN2@Update

; 7    : 	{
; 8    : 		m_fElapsedTime = fElapsedTime;

  00009	f3 0f 10 4d 08	 movss	 xmm1, DWORD PTR _fElapsedTime$[ebp]

; 9    : 		m_fLocalTime += fElapsedTime;

  0000e	f3 0f 10 41 0c	 movss	 xmm0, DWORD PTR [ecx+12]

; 10   : 
; 11   : 		return OnUpdate(fElapsedTime);

  00013	8b 01		 mov	 eax, DWORD PTR [ecx]
  00015	f3 0f 58 c1	 addss	 xmm0, xmm1
  00019	51		 push	 ecx
  0001a	f3 0f 11 49 14	 movss	 DWORD PTR [ecx+20], xmm1
  0001f	f3 0f 11 0c 24	 movss	 DWORD PTR [esp], xmm1
  00024	8b 40 10	 mov	 eax, DWORD PTR [eax+16]
  00027	f3 0f 11 41 0c	 movss	 DWORD PTR [ecx+12], xmm0
  0002c	ff d0		 call	 eax

; 19   : 	}
; 20   : }

  0002e	5d		 pop	 ebp
  0002f	c2 04 00	 ret	 4
$LN2@Update:

; 12   : 	}
; 13   : 	else
; 14   : 	{
; 15   : 		m_fRemainingTime -= fElapsedTime;

  00032	f3 0f 10 49 18	 movss	 xmm1, DWORD PTR [ecx+24]
  00037	0f 57 c0	 xorps	 xmm0, xmm0
  0003a	f3 0f 5c 4d 08	 subss	 xmm1, DWORD PTR _fElapsedTime$[ebp]

; 16   : 		if (m_fRemainingTime<=0.0f)

  0003f	0f 2f c1	 comiss	 xmm0, xmm1
  00042	f3 0f 11 49 18	 movss	 DWORD PTR [ecx+24], xmm1
  00047	72 04		 jb	 SHORT $LN4@Update

; 17   : 			m_bStart = true;

  00049	c6 41 1c 01	 mov	 BYTE PTR [ecx+28], 1
$LN4@Update:

; 18   : 		return true;

  0004d	b0 01		 mov	 al, 1

; 19   : 	}
; 20   : }

  0004f	5d		 pop	 ebp
  00050	c2 04 00	 ret	 4
?Update@CEffectElementBaseInstance@@QAE_NM@Z ENDP	; CEffectElementBaseInstance::Update
_TEXT	ENDS
; Function compile flags: /Ogtp
; File C:\DS Project\DS Files\Source\ClientSource\Client\EffectLib\EffectElementBaseInstance.cpp
;	COMDAT ?SetLocalMatrixPointer@CEffectElementBaseInstance@@QAEXPBUD3DXMATRIX@@@Z
_TEXT	SEGMENT
_c_pMatrix$ = 8						; size = 4
?SetLocalMatrixPointer@CEffectElementBaseInstance@@QAEXPBUD3DXMATRIX@@@Z PROC ; CEffectElementBaseInstance::SetLocalMatrixPointer, COMDAT
; _this$ = ecx

; 33   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 34   : 	mc_pmatLocal = c_pMatrix;

  00003	8b 45 08	 mov	 eax, DWORD PTR _c_pMatrix$[ebp]
  00006	89 41 04	 mov	 DWORD PTR [ecx+4], eax

; 35   : }

  00009	5d		 pop	 ebp
  0000a	c2 04 00	 ret	 4
?SetLocalMatrixPointer@CEffectElementBaseInstance@@QAEXPBUD3DXMATRIX@@@Z ENDP ; CEffectElementBaseInstance::SetLocalMatrixPointer
_TEXT	ENDS
; Function compile flags: /Ogtp
; File C:\DS Project\DS Files\Source\ClientSource\Client\EffectLib\EffectElementBaseInstance.cpp
;	COMDAT ?Destroy@CEffectElementBaseInstance@@QAEXXZ
_TEXT	SEGMENT
?Destroy@CEffectElementBaseInstance@@QAEXXZ PROC	; CEffectElementBaseInstance::Destroy, COMDAT
; _this$ = ecx

; 87   : {

  00000	56		 push	 esi
  00001	8b f1		 mov	 esi, ecx

; 88   : 	OnDestroy();

  00003	8b 06		 mov	 eax, DWORD PTR [esi]
  00005	ff 50 0c	 call	 DWORD PTR [eax+12]

; 89   : 	Initialize();

  00008	8b ce		 mov	 ecx, esi
  0000a	5e		 pop	 esi
  0000b	e9 00 00 00 00	 jmp	 ?Initialize@CEffectElementBaseInstance@@QAEXXZ ; CEffectElementBaseInstance::Initialize
?Destroy@CEffectElementBaseInstance@@QAEXXZ ENDP	; CEffectElementBaseInstance::Destroy
_TEXT	ENDS
; Function compile flags: /Ogtp
; File C:\DS Project\DS Files\Source\ClientSource\Client\EffectLib\EffectElementBaseInstance.cpp
;	COMDAT ?Initialize@CEffectElementBaseInstance@@QAEXXZ
_TEXT	SEGMENT
?Initialize@CEffectElementBaseInstance@@QAEXXZ PROC	; CEffectElementBaseInstance::Initialize, COMDAT
; _this$ = ecx

; 72   : 	mc_pmatLocal = NULL;
; 73   : 
; 74   : 	m_isActive = true;
; 75   : 
; 76   : 	m_fLocalTime = 0.0f;
; 77   : 	m_dwStartTime = 0;
; 78   : 	m_fElapsedTime = 0.0f;
; 79   : 
; 80   : 	m_bStart = false;
; 81   : 	m_fRemainingTime = 0.0f;
; 82   : 
; 83   : 	OnInitialize();

  00000	8b 01		 mov	 eax, DWORD PTR [ecx]
  00002	c7 41 04 00 00
	00 00		 mov	 DWORD PTR [ecx+4], 0
  00009	c6 41 08 01	 mov	 BYTE PTR [ecx+8], 1
  0000d	c7 41 0c 00 00
	00 00		 mov	 DWORD PTR [ecx+12], 0
  00014	c7 41 10 00 00
	00 00		 mov	 DWORD PTR [ecx+16], 0
  0001b	c7 41 14 00 00
	00 00		 mov	 DWORD PTR [ecx+20], 0
  00022	c6 41 1c 00	 mov	 BYTE PTR [ecx+28], 0
  00026	c7 41 18 00 00
	00 00		 mov	 DWORD PTR [ecx+24], 0
  0002d	ff 60 08	 jmp	 DWORD PTR [eax+8]
?Initialize@CEffectElementBaseInstance@@QAEXXZ ENDP	; CEffectElementBaseInstance::Initialize
_TEXT	ENDS
; Function compile flags: /Ogtp
; File C:\DS Project\DS Files\Source\ClientSource\Client\EffectLib\EffectElementBaseInstance.cpp
;	COMDAT ?SetDataPointer@CEffectElementBaseInstance@@QAEXPAVCEffectElementBase@@@Z
_TEXT	SEGMENT
tv71 = 8						; size = 4
_pElement$ = 8						; size = 4
?SetDataPointer@CEffectElementBaseInstance@@QAEXPAVCEffectElementBase@@@Z PROC ; CEffectElementBaseInstance::SetDataPointer, COMDAT
; _this$ = ecx

; 38   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	56		 push	 esi

; 39   : 	m_pBase = pElement;

  00004	8b 75 08	 mov	 esi, DWORD PTR _pElement$[ebp]
  00007	57		 push	 edi
  00008	8b f9		 mov	 edi, ecx
  0000a	89 77 20	 mov	 DWORD PTR [edi+32], esi

; 40   : 
; 41   : 	m_dwStartTime = CTimer::Instance().GetCurrentMillisecond();

  0000d	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCTimer@@@@0PAVCTimer@@A ; CSingleton<CTimer>::ms_singleton
  00013	e8 00 00 00 00	 call	 ?GetCurrentMillisecond@CTimer@@QAEKXZ ; CTimer::GetCurrentMillisecond

; 42   : 
; 43   : 	//////////////////////////////////////////////////////////////////////////
; 44   : 	//add by ipkn, start time management
; 45   : 
; 46   : 	m_fRemainingTime = pElement->GetStartTime();

  00018	8b ce		 mov	 ecx, esi
  0001a	89 47 10	 mov	 DWORD PTR [edi+16], eax
  0001d	e8 00 00 00 00	 call	 ?GetStartTime@CEffectElementBase@@QAEMXZ ; CEffectElementBase::GetStartTime
  00022	d9 5d 08	 fstp	 DWORD PTR tv71[ebp]
  00025	f3 0f 10 4d 08	 movss	 xmm1, DWORD PTR tv71[ebp]
  0002a	0f 57 c0	 xorps	 xmm0, xmm0

; 47   : 	if (m_fRemainingTime<=0.0f)
; 48   : 		m_bStart = true;
; 49   : 	else
; 50   : 		m_bStart = false;
; 51   : 
; 52   : 	//////////////////////////////////////////////////////////////////////////
; 53   : 
; 54   : 	OnSetDataPointer(pElement);

  0002d	0f 2f c1	 comiss	 xmm0, xmm1
  00030	8b cf		 mov	 ecx, edi
  00032	56		 push	 esi
  00033	f3 0f 11 4f 18	 movss	 DWORD PTR [edi+24], xmm1
  00038	0f 93 c0	 setae	 al
  0003b	88 47 1c	 mov	 BYTE PTR [edi+28], al
  0003e	8b 07		 mov	 eax, DWORD PTR [edi]
  00040	ff 50 04	 call	 DWORD PTR [eax+4]
  00043	5f		 pop	 edi
  00044	5e		 pop	 esi

; 55   : }

  00045	5d		 pop	 ebp
  00046	c2 04 00	 ret	 4
?SetDataPointer@CEffectElementBaseInstance@@QAEXPAVCEffectElementBase@@@Z ENDP ; CEffectElementBaseInstance::SetDataPointer
_TEXT	ENDS
; Function compile flags: /Ogtp
; File C:\DS Project\DS Files\Source\ClientSource\Client\EffectLib\EffectElementBaseInstance.cpp
;	COMDAT ??1CEffectElementBaseInstance@@UAE@XZ
_TEXT	SEGMENT
??1CEffectElementBaseInstance@@UAE@XZ PROC		; CEffectElementBaseInstance::~CEffectElementBaseInstance, COMDAT
; _this$ = ecx

; 96   : {

  00000	c7 01 00 00 00
	00		 mov	 DWORD PTR [ecx], OFFSET ??_7CEffectElementBaseInstance@@6B@

; 97   : }

  00006	c3		 ret	 0
??1CEffectElementBaseInstance@@UAE@XZ ENDP		; CEffectElementBaseInstance::~CEffectElementBaseInstance
_TEXT	ENDS
; Function compile flags: /Ogtp
; File C:\DS Project\DS Files\Source\ClientSource\Client\EffectLib\EffectElementBaseInstance.cpp
;	COMDAT ??0CEffectElementBaseInstance@@QAE@XZ
_TEXT	SEGMENT
??0CEffectElementBaseInstance@@QAE@XZ PROC		; CEffectElementBaseInstance::CEffectElementBaseInstance, COMDAT
; _this$ = ecx

; 93   : {

  00000	c7 01 00 00 00
	00		 mov	 DWORD PTR [ecx], OFFSET ??_7CEffectElementBaseInstance@@6B@

; 94   : }

  00006	8b c1		 mov	 eax, ecx
  00008	c3		 ret	 0
??0CEffectElementBaseInstance@@QAE@XZ ENDP		; CEffectElementBaseInstance::CEffectElementBaseInstance
_TEXT	ENDS
END
