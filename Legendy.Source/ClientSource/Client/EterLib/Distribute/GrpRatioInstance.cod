; Listing generated by Microsoft (R) Optimizing Compiler Version 19.27.29112.0 

	TITLE	C:\DS Project\DS Files\Source\ClientSource\Client\EterLib\GrpRatioInstance.cpp
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB LIBCMT
INCLUDELIB OLDNAMES

PUBLIC	??0CGraphicRatioInstance@@QAE@XZ		; CGraphicRatioInstance::CGraphicRatioInstance
PUBLIC	??1CGraphicRatioInstance@@UAE@XZ		; CGraphicRatioInstance::~CGraphicRatioInstance
PUBLIC	?Clear@CGraphicRatioInstance@@QAEXXZ		; CGraphicRatioInstance::Clear
PUBLIC	?SetRatioReference@CGraphicRatioInstance@@QAEXABM@Z ; CGraphicRatioInstance::SetRatioReference
PUBLIC	?BlendRatioReference@CGraphicRatioInstance@@QAEXKABM@Z ; CGraphicRatioInstance::BlendRatioReference
PUBLIC	?Update@CGraphicRatioInstance@@QAEXXZ		; CGraphicRatioInstance::Update
PUBLIC	?GetCurrentRatioReference@CGraphicRatioInstance@@QBEABMXZ ; CGraphicRatioInstance::GetCurrentRatioReference
PUBLIC	?GetTime@CGraphicRatioInstance@@IAEKXZ		; CGraphicRatioInstance::GetTime
PUBLIC	??_GCGraphicRatioInstance@@UAEPAXI@Z		; CGraphicRatioInstance::`scalar deleting destructor'
PUBLIC	??_7CGraphicRatioInstance@@6B@			; CGraphicRatioInstance::`vftable'
PUBLIC	?ms_singleton@?$CSingleton@VCTimer@@@@0PAVCTimer@@A ; CSingleton<CTimer>::ms_singleton
PUBLIC	??_R4CGraphicRatioInstance@@6B@			; CGraphicRatioInstance::`RTTI Complete Object Locator'
PUBLIC	??_R0?AVCGraphicRatioInstance@@@8		; CGraphicRatioInstance `RTTI Type Descriptor'
PUBLIC	??_R3CGraphicRatioInstance@@8			; CGraphicRatioInstance::`RTTI Class Hierarchy Descriptor'
PUBLIC	??_R2CGraphicRatioInstance@@8			; CGraphicRatioInstance::`RTTI Base Class Array'
PUBLIC	??_R1A@?0A@EA@CGraphicRatioInstance@@8		; CGraphicRatioInstance::`RTTI Base Class Descriptor at (0,-1,0,64)'
PUBLIC	__xmm@41f00000000000000000000000000000
EXTRN	??3@YAXPAXI@Z:PROC				; operator delete
EXTRN	??_ECGraphicRatioInstance@@UAEPAXI@Z:PROC	; CGraphicRatioInstance::`vector deleting destructor'
EXTRN	?GetCurrentMillisecond@CTimer@@QAEKXZ:PROC	; CTimer::GetCurrentMillisecond
EXTRN	??_7type_info@@6B@:QWORD			; type_info::`vftable'
EXTRN	__fltused:DWORD
;	COMDAT ?ms_singleton@?$CSingleton@VCTimer@@@@0PAVCTimer@@A
_BSS	SEGMENT
?ms_singleton@?$CSingleton@VCTimer@@@@0PAVCTimer@@A DD 01H DUP (?) ; CSingleton<CTimer>::ms_singleton
_BSS	ENDS
;	COMDAT __xmm@41f00000000000000000000000000000
CONST	SEGMENT
__xmm@41f00000000000000000000000000000 DB 00H, 00H, 00H, 00H, 00H, 00H, 00H
	DB	00H, 00H, 00H, 00H, 00H, 00H, 00H, 0f0H, 'A'
CONST	ENDS
;	COMDAT ??_R1A@?0A@EA@CGraphicRatioInstance@@8
rdata$r	SEGMENT
??_R1A@?0A@EA@CGraphicRatioInstance@@8 DD FLAT:??_R0?AVCGraphicRatioInstance@@@8 ; CGraphicRatioInstance::`RTTI Base Class Descriptor at (0,-1,0,64)'
	DD	00H
	DD	00H
	DD	0ffffffffH
	DD	00H
	DD	040H
	DD	FLAT:??_R3CGraphicRatioInstance@@8
rdata$r	ENDS
;	COMDAT ??_R2CGraphicRatioInstance@@8
rdata$r	SEGMENT
??_R2CGraphicRatioInstance@@8 DD FLAT:??_R1A@?0A@EA@CGraphicRatioInstance@@8 ; CGraphicRatioInstance::`RTTI Base Class Array'
rdata$r	ENDS
;	COMDAT ??_R3CGraphicRatioInstance@@8
rdata$r	SEGMENT
??_R3CGraphicRatioInstance@@8 DD 00H			; CGraphicRatioInstance::`RTTI Class Hierarchy Descriptor'
	DD	00H
	DD	01H
	DD	FLAT:??_R2CGraphicRatioInstance@@8
rdata$r	ENDS
;	COMDAT ??_R0?AVCGraphicRatioInstance@@@8
data$r	SEGMENT
??_R0?AVCGraphicRatioInstance@@@8 DD FLAT:??_7type_info@@6B@ ; CGraphicRatioInstance `RTTI Type Descriptor'
	DD	00H
	DB	'.?AVCGraphicRatioInstance@@', 00H
data$r	ENDS
;	COMDAT ??_R4CGraphicRatioInstance@@6B@
rdata$r	SEGMENT
??_R4CGraphicRatioInstance@@6B@ DD 00H			; CGraphicRatioInstance::`RTTI Complete Object Locator'
	DD	00H
	DD	00H
	DD	FLAT:??_R0?AVCGraphicRatioInstance@@@8
	DD	FLAT:??_R3CGraphicRatioInstance@@8
rdata$r	ENDS
;	COMDAT ??_7CGraphicRatioInstance@@6B@
CONST	SEGMENT
??_7CGraphicRatioInstance@@6B@ DD FLAT:??_R4CGraphicRatioInstance@@6B@ ; CGraphicRatioInstance::`vftable'
	DD	FLAT:??_ECGraphicRatioInstance@@UAEPAXI@Z
CONST	ENDS
; Function compile flags: /Ogtp
;	COMDAT ??_GCGraphicRatioInstance@@UAEPAXI@Z
_TEXT	SEGMENT
___flags$ = 8						; size = 4
??_GCGraphicRatioInstance@@UAEPAXI@Z PROC		; CGraphicRatioInstance::`scalar deleting destructor', COMDAT
; _this$ = ecx
  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	56		 push	 esi
  00004	8b f1		 mov	 esi, ecx
  00006	e8 00 00 00 00	 call	 ??1CGraphicRatioInstance@@UAE@XZ ; CGraphicRatioInstance::~CGraphicRatioInstance
  0000b	f6 45 08 01	 test	 BYTE PTR ___flags$[ebp], 1
  0000f	74 0b		 je	 SHORT $LN4@scalar
  00011	6a 18		 push	 24			; 00000018H
  00013	56		 push	 esi
  00014	e8 00 00 00 00	 call	 ??3@YAXPAXI@Z		; operator delete
  00019	83 c4 08	 add	 esp, 8
$LN4@scalar:
  0001c	8b c6		 mov	 eax, esi
  0001e	5e		 pop	 esi
  0001f	5d		 pop	 ebp
  00020	c2 04 00	 ret	 4
??_GCGraphicRatioInstance@@UAEPAXI@Z ENDP		; CGraphicRatioInstance::`scalar deleting destructor'
_TEXT	ENDS
; Function compile flags: /Ogtp
; File C:\DS Project\DS Files\Source\ClientSource\Client\EterLib\GrpRatioInstance.cpp
;	COMDAT ?GetTime@CGraphicRatioInstance@@IAEKXZ
_TEXT	SEGMENT
?GetTime@CGraphicRatioInstance@@IAEKXZ PROC		; CGraphicRatioInstance::GetTime, COMDAT
; _this$ = ecx

; 60   : 	return CTimer::Instance().GetCurrentMillisecond();

  00000	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCTimer@@@@0PAVCTimer@@A ; CSingleton<CTimer>::ms_singleton
  00006	e9 00 00 00 00	 jmp	 ?GetCurrentMillisecond@CTimer@@QAEKXZ ; CTimer::GetCurrentMillisecond
?GetTime@CGraphicRatioInstance@@IAEKXZ ENDP		; CGraphicRatioInstance::GetTime
_TEXT	ENDS
; Function compile flags: /Ogtp
; File C:\DS Project\DS Files\Source\ClientSource\Client\EterLib\GrpRatioInstance.cpp
;	COMDAT ?GetCurrentRatioReference@CGraphicRatioInstance@@QBEABMXZ
_TEXT	SEGMENT
?GetCurrentRatioReference@CGraphicRatioInstance@@QBEABMXZ PROC ; CGraphicRatioInstance::GetCurrentRatioReference, COMDAT
; _this$ = ecx

; 65   : 	return m_curRatio;

  00000	8d 41 04	 lea	 eax, DWORD PTR [ecx+4]

; 66   : }

  00003	c3		 ret	 0
?GetCurrentRatioReference@CGraphicRatioInstance@@QBEABMXZ ENDP ; CGraphicRatioInstance::GetCurrentRatioReference
_TEXT	ENDS
; Function compile flags: /Ogtp
; File C:\DS Project\DS Files\Source\ClientSource\Client\EterLib\GrpRatioInstance.cpp
;	COMDAT ?Update@CGraphicRatioInstance@@QAEXXZ
_TEXT	SEGMENT
?Update@CGraphicRatioInstance@@QAEXXZ PROC		; CGraphicRatioInstance::Update, COMDAT
; _this$ = ecx

; 42   : {

  00000	56		 push	 esi
  00001	8b f1		 mov	 esi, ecx

; 43   : 	DWORD curTime = GetTime();

  00003	e8 00 00 00 00	 call	 ?GetTime@CGraphicRatioInstance@@IAEKXZ ; CGraphicRatioInstance::GetTime

; 44   : 	DWORD elapsedTime = curTime - m_baseTime;

  00008	2b 46 10	 sub	 eax, DWORD PTR [esi+16]

; 45   : 
; 46   : 	if (elapsedTime < m_blendTime)

  0000b	8b 4e 14	 mov	 ecx, DWORD PTR [esi+20]
  0000e	f3 0f 10 5e 0c	 movss	 xmm3, DWORD PTR [esi+12]
  00013	3b c1		 cmp	 eax, ecx
  00015	73 47		 jae	 SHORT $LN2@Update

; 47   : 	{
; 48   : 		float diff = m_dstRatio - m_srcRatio;
; 49   : 		float rate = elapsedTime / float(m_blendTime);

  00017	0f 57 c0	 xorps	 xmm0, xmm0
  0001a	f2 0f 2a c0	 cvtsi2sd xmm0, eax
  0001e	c1 e8 1f	 shr	 eax, 31			; 0000001fH
  00021	f3 0f 5c 5e 08	 subss	 xmm3, DWORD PTR [esi+8]
  00026	f2 0f 58 04 c5
	00 00 00 00	 addsd	 xmm0, QWORD PTR __xmm@41f00000000000000000000000000000[eax*8]
  0002f	66 0f 5a c8	 cvtpd2ps xmm1, xmm0
  00033	0f 57 c0	 xorps	 xmm0, xmm0
  00036	f2 0f 2a c1	 cvtsi2sd xmm0, ecx
  0003a	c1 e9 1f	 shr	 ecx, 31			; 0000001fH
  0003d	f2 0f 58 04 cd
	00 00 00 00	 addsd	 xmm0, QWORD PTR __xmm@41f00000000000000000000000000000[ecx*8]
  00046	66 0f 5a c0	 cvtpd2ps xmm0, xmm0
  0004a	f3 0f 5e c8	 divss	 xmm1, xmm0

; 50   : 		m_curRatio = diff * rate + m_srcRatio;

  0004e	f3 0f 59 cb	 mulss	 xmm1, xmm3
  00052	f3 0f 58 4e 08	 addss	 xmm1, DWORD PTR [esi+8]

; 51   : 	}
; 52   : 	else
; 53   : 	{
; 54   : 		m_curRatio = m_dstRatio;
; 55   : 	}
; 56   : }

  00057	f3 0f 11 4e 04	 movss	 DWORD PTR [esi+4], xmm1
  0005c	5e		 pop	 esi
  0005d	c3		 ret	 0
$LN2@Update:
  0005e	f3 0f 11 5e 04	 movss	 DWORD PTR [esi+4], xmm3
  00063	5e		 pop	 esi
  00064	c3		 ret	 0
?Update@CGraphicRatioInstance@@QAEXXZ ENDP		; CGraphicRatioInstance::Update
_TEXT	ENDS
; Function compile flags: /Ogtp
; File C:\DS Project\DS Files\Source\ClientSource\Client\EterLib\GrpRatioInstance.cpp
;	COMDAT ?BlendRatioReference@CGraphicRatioInstance@@QAEXKABM@Z
_TEXT	SEGMENT
_blendTime$ = 8						; size = 4
_c_rDstRatio$ = 12					; size = 4
?BlendRatioReference@CGraphicRatioInstance@@QAEXKABM@Z PROC ; CGraphicRatioInstance::BlendRatioReference, COMDAT
; _this$ = ecx

; 33   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	56		 push	 esi
  00004	8b f1		 mov	 esi, ecx

; 34   : 	m_baseTime = GetTime();

  00006	e8 00 00 00 00	 call	 ?GetTime@CGraphicRatioInstance@@IAEKXZ ; CGraphicRatioInstance::GetTime
  0000b	89 46 10	 mov	 DWORD PTR [esi+16], eax

; 35   : 	m_blendTime = blendTime;

  0000e	8b 45 08	 mov	 eax, DWORD PTR _blendTime$[ebp]
  00011	89 46 14	 mov	 DWORD PTR [esi+20], eax

; 36   : 
; 37   : 	m_srcRatio = m_curRatio;

  00014	8b 46 04	 mov	 eax, DWORD PTR [esi+4]
  00017	89 46 08	 mov	 DWORD PTR [esi+8], eax

; 38   : 	m_dstRatio = c_rDstRatio;

  0001a	8b 45 0c	 mov	 eax, DWORD PTR _c_rDstRatio$[ebp]
  0001d	8b 00		 mov	 eax, DWORD PTR [eax]
  0001f	89 46 0c	 mov	 DWORD PTR [esi+12], eax
  00022	5e		 pop	 esi

; 39   : }

  00023	5d		 pop	 ebp
  00024	c2 08 00	 ret	 8
?BlendRatioReference@CGraphicRatioInstance@@QAEXKABM@Z ENDP ; CGraphicRatioInstance::BlendRatioReference
_TEXT	ENDS
; Function compile flags: /Ogtp
; File C:\DS Project\DS Files\Source\ClientSource\Client\EterLib\GrpRatioInstance.cpp
;	COMDAT ?SetRatioReference@CGraphicRatioInstance@@QAEXABM@Z
_TEXT	SEGMENT
_c_rRatio$ = 8						; size = 4
?SetRatioReference@CGraphicRatioInstance@@QAEXABM@Z PROC ; CGraphicRatioInstance::SetRatioReference, COMDAT
; _this$ = ecx

; 26   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 27   : 	m_curRatio = c_rRatio;

  00003	8b 45 08	 mov	 eax, DWORD PTR _c_rRatio$[ebp]
  00006	f3 0f 10 00	 movss	 xmm0, DWORD PTR [eax]
  0000a	f3 0f 11 41 04	 movss	 DWORD PTR [ecx+4], xmm0

; 28   : 	m_srcRatio = m_curRatio;

  0000f	f3 0f 11 41 08	 movss	 DWORD PTR [ecx+8], xmm0

; 29   : 	m_dstRatio = m_curRatio;

  00014	f3 0f 11 41 0c	 movss	 DWORD PTR [ecx+12], xmm0

; 30   : }

  00019	5d		 pop	 ebp
  0001a	c2 04 00	 ret	 4
?SetRatioReference@CGraphicRatioInstance@@QAEXABM@Z ENDP ; CGraphicRatioInstance::SetRatioReference
_TEXT	ENDS
; Function compile flags: /Ogtp
; File C:\DS Project\DS Files\Source\ClientSource\Client\EterLib\GrpRatioInstance.cpp
;	COMDAT ?Clear@CGraphicRatioInstance@@QAEXXZ
_TEXT	SEGMENT
?Clear@CGraphicRatioInstance@@QAEXXZ PROC		; CGraphicRatioInstance::Clear, COMDAT
; _this$ = ecx

; 17   : 	m_curRatio = 0.0f;

  00000	c7 41 04 00 00
	00 00		 mov	 DWORD PTR [ecx+4], 0

; 18   : 	m_srcRatio = 0.0f;

  00007	c7 41 08 00 00
	00 00		 mov	 DWORD PTR [ecx+8], 0

; 19   : 	m_dstRatio = 0.0f;

  0000e	c7 41 0c 00 00
	00 00		 mov	 DWORD PTR [ecx+12], 0

; 20   : 
; 21   : 	m_baseTime = 0;

  00015	c7 41 10 00 00
	00 00		 mov	 DWORD PTR [ecx+16], 0

; 22   : 	m_blendTime = 0;

  0001c	c7 41 14 00 00
	00 00		 mov	 DWORD PTR [ecx+20], 0

; 23   : }

  00023	c3		 ret	 0
?Clear@CGraphicRatioInstance@@QAEXXZ ENDP		; CGraphicRatioInstance::Clear
_TEXT	ENDS
; Function compile flags: /Ogtp
; File C:\DS Project\DS Files\Source\ClientSource\Client\EterLib\GrpRatioInstance.cpp
;	COMDAT ??1CGraphicRatioInstance@@UAE@XZ
_TEXT	SEGMENT
??1CGraphicRatioInstance@@UAE@XZ PROC			; CGraphicRatioInstance::~CGraphicRatioInstance, COMDAT
; _this$ = ecx

; 12   : {

  00000	c7 01 00 00 00
	00		 mov	 DWORD PTR [ecx], OFFSET ??_7CGraphicRatioInstance@@6B@

; 13   : }

  00006	c3		 ret	 0
??1CGraphicRatioInstance@@UAE@XZ ENDP			; CGraphicRatioInstance::~CGraphicRatioInstance
_TEXT	ENDS
; Function compile flags: /Ogtp
; File C:\DS Project\DS Files\Source\ClientSource\Client\EterLib\GrpRatioInstance.cpp
;	COMDAT ??0CGraphicRatioInstance@@QAE@XZ
_TEXT	SEGMENT
??0CGraphicRatioInstance@@QAE@XZ PROC			; CGraphicRatioInstance::CGraphicRatioInstance, COMDAT
; _this$ = ecx

; 6    : {

  00000	c7 01 00 00 00
	00		 mov	 DWORD PTR [ecx], OFFSET ??_7CGraphicRatioInstance@@6B@

; 7    : 	m_baseTime = 0;
; 8    : 	m_blendTime = 0;
; 9    : }

  00006	8b c1		 mov	 eax, ecx
  00008	c7 41 10 00 00
	00 00		 mov	 DWORD PTR [ecx+16], 0
  0000f	c7 41 14 00 00
	00 00		 mov	 DWORD PTR [ecx+20], 0
  00016	c3		 ret	 0
??0CGraphicRatioInstance@@QAE@XZ ENDP			; CGraphicRatioInstance::CGraphicRatioInstance
_TEXT	ENDS
END
