; Listing generated by Microsoft (R) Optimizing Compiler Version 19.27.29112.0 

	TITLE	C:\DS Project\DS Files\Source\ClientSource\Client\PRTerrainLib\Terrain.cpp
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB LIBCMT
INCLUDELIB OLDNAMES

PUBLIC	?ms_pTextureSet@CTerrainImpl@@1PAVCTextureSet@@A ; CTerrainImpl::ms_pTextureSet
_BSS	SEGMENT
?ms_pTextureSet@CTerrainImpl@@1PAVCTextureSet@@A DD 01H DUP (?) ; CTerrainImpl::ms_pTextureSet
_BSS	ENDS
PUBLIC	?SetTextureSet@CTerrainImpl@@SAXPAVCTextureSet@@@Z ; CTerrainImpl::SetTextureSet
PUBLIC	?GetTextureSet@CTerrainImpl@@SAPAVCTextureSet@@XZ ; CTerrainImpl::GetTextureSet
PUBLIC	??0CTerrainImpl@@QAE@XZ				; CTerrainImpl::CTerrainImpl
PUBLIC	??1CTerrainImpl@@UAE@XZ				; CTerrainImpl::~CTerrainImpl
PUBLIC	?LoadWaterMap@CTerrainImpl@@QAE_NPBD@Z		; CTerrainImpl::LoadWaterMap
PUBLIC	?LoadWaterMapFile@CTerrainImpl@@QAE_NPBD@Z	; CTerrainImpl::LoadWaterMapFile
PUBLIC	?GetShadowMapColor@CTerrainImpl@@QAEKMM@Z	; CTerrainImpl::GetShadowMapColor
PUBLIC	?Initialize@CTerrainImpl@@IAEXXZ		; CTerrainImpl::Initialize
PUBLIC	?Clear@CTerrainImpl@@MAEXXZ			; CTerrainImpl::Clear
PUBLIC	?LoadHeightMap@CTerrainImpl@@IAE_NPBD@Z		; CTerrainImpl::LoadHeightMap
PUBLIC	?RAW_LoadTileMap@CTerrainImpl@@IAE_NPBD@Z	; CTerrainImpl::RAW_LoadTileMap
PUBLIC	?LoadAttrMap@CTerrainImpl@@IAE_NPBD@Z		; CTerrainImpl::LoadAttrMap
PUBLIC	??_GCTerrainImpl@@UAEPAXI@Z			; CTerrainImpl::`scalar deleting destructor'
PUBLIC	?ms_singleton@?$CSingleton@VCEterPackManager@@@@0PAVCEterPackManager@@A ; CSingleton<CEterPackManager>::ms_singleton
PUBLIC	??_7CTerrainImpl@@6B@				; CTerrainImpl::`vftable'
PUBLIC	??_C@_0BJ@BIFDHEAG@LoadRawHeightMapFile?5?$CFs?5@ ; `string'
PUBLIC	??_C@_05NAOIJFC@Error@				; `string'
PUBLIC	??_C@_0CM@LCPOPFI@CTerrainImpl?3?3LoadHeightMap?5?9?5?$CF@ ; `string'
PUBLIC	??_C@_0BE@DJBMFHIA@LoadAttrMapFile?5?$CFs?5@	; `string'
PUBLIC	??_C@_0CK@PIIHIJH@CTerrainImpl?3?3LoadAttrMap?5?9?5?$CFs?5@ ; `string'
PUBLIC	??_C@_0DA@IIKEEHMO@?5CTerrainImpl?3?3LoadAttrMap?5?9?5?$CFs@ ; `string'
PUBLIC	??_C@_0EB@HPKBHBHD@CTerrainImpl?3?3LoadAttrMap?5?9?5?$CFs?5@ ; `string'
PUBLIC	??_C@_0EO@LFPHPEPB@CTerrainImpl?3?3LoadAttrMap?5?9?5kAt@ ; `string'
PUBLIC	??_C@_0EP@IAGDHLKD@CTerrainImpl?3?3LoadAttrMap?5?9?5kAt@ ; `string'
PUBLIC	??_C@_0EI@LOIJBECO@CTerrainImpl?3?3LoadAttrMap?5?9?5?$CFs?5@ ; `string'
PUBLIC	??_C@_03PMGGPEJJ@?$CFd?6@			; `string'
PUBLIC	??_C@_0BC@JFLPEFAC@LoadSplatFile?5?$CFs?5@	; `string'
PUBLIC	??_C@_0CO@EKLJBLHD@CTerrainImpl?3?3RAW_LoadTileMap?5?9@ ; `string'
PUBLIC	??_C@_0DG@MJOJCCLB@CMapOutdoor?3?3LoadWaterMap?5LoadW@ ; `string'
PUBLIC	??_C@_0BI@LPNELCOB@LoadWaterMapFile?5?$CFs?5?$CFd?6@ ; `string'
PUBLIC	??_C@_0CL@FEGPIHMN@CTerrainImpl?3?3LoadWaterMap?5?9?5?$CFs@ ; `string'
PUBLIC	??_C@_0DA@BNEIEOIL@CTerrainImpl?3?3LoadWaterMap?5?9?5?$CFs@ ; `string'
PUBLIC	??_C@_0EC@DBFGDPJD@CTerrainImpl?3?3LoadWaterMap?5?9?5?$CFs@ ; `string'
PUBLIC	??_C@_0FB@JFMCAAJF@CTerrainImpl?3?3LoadWaterMap?5?9?5kW@ ; `string'
PUBLIC	??_C@_0FC@EFCAKCOC@CTerrainImpl?3?3LoadWaterMap?5?9?5kW@ ; `string'
PUBLIC	??_C@_0EJ@JKEHKGG@CTerrainImpl?3?3LoadWaterMap?5?9?5?$CFs@ ; `string'
PUBLIC	??_R4CTerrainImpl@@6B@				; CTerrainImpl::`RTTI Complete Object Locator'
PUBLIC	??_R0?AVCTerrainImpl@@@8			; CTerrainImpl `RTTI Type Descriptor'
PUBLIC	??_R3CTerrainImpl@@8				; CTerrainImpl::`RTTI Class Hierarchy Descriptor'
PUBLIC	??_R2CTerrainImpl@@8				; CTerrainImpl::`RTTI Base Class Array'
PUBLIC	??_R1A@?0A@EA@CTerrainImpl@@8			; CTerrainImpl::`RTTI Base Class Descriptor at (0,-1,0,64)'
PUBLIC	__real@3823d70a
PUBLIC	__real@437f0000
PUBLIC	__real@46c80000
EXTRN	??3@YAXPAXI@Z:PROC				; operator delete
EXTRN	_atexit:PROC
EXTRN	__Init_thread_header:PROC
EXTRN	__Init_thread_abort:PROC
EXTRN	__Init_thread_footer:PROC
EXTRN	?Tracen@@YAXPBD@Z:PROC				; Tracen
EXTRN	?Tracef@@YAXPBDZZ:PROC				; Tracef
EXTRN	?TraceError@@YAXPBDZZ:PROC			; TraceError
EXTRN	?MIN@@YAHHH@Z:PROC				; MIN
EXTRN	?ELTimer_GetMSec@@YAKXZ:PROC			; ELTimer_GetMSec
EXTRN	??0CMappedFile@@QAE@XZ:PROC			; CMappedFile::CMappedFile
EXTRN	??1CMappedFile@@UAE@XZ:PROC			; CMappedFile::~CMappedFile
EXTRN	?Size@CMappedFile@@QAEKXZ:PROC			; CMappedFile::Size
EXTRN	?Get@CEterPackManager@@QAE_NAAVCMappedFile@@PBDPAPBX@Z:PROC ; CEterPackManager::Get
EXTRN	??0CTextureSet@@QAE@XZ:PROC			; CTextureSet::CTextureSet
EXTRN	??1CTextureSet@@UAE@XZ:PROC			; CTextureSet::~CTextureSet
EXTRN	?GetTextureCount@CTextureSet@@QAEKXZ:PROC	; CTextureSet::GetTextureCount
EXTRN	??_ECTerrainImpl@@UAEPAXI@Z:PROC		; CTerrainImpl::`vector deleting destructor'
EXTRN	@__security_check_cookie@4:PROC
EXTRN	___CxxFrameHandler3:PROC
EXTRN	_memcpy:PROC
EXTRN	_memset:PROC
EXTRN	__Init_thread_epoch:DWORD
EXTRN	??_7type_info@@6B@:QWORD			; type_info::`vftable'
EXTRN	?PR_FCNV@@3MA:DWORD				; PR_FCNV
EXTRN	?PR_ICNV@@3JA:DWORD				; PR_ICNV
EXTRN	___security_cookie:DWORD
EXTRN	__fltused:DWORD
EXTRN	__tls_array:DWORD
EXTRN	__tls_index:DWORD
;	COMDAT ?ms_singleton@?$CSingleton@VCEterPackManager@@@@0PAVCEterPackManager@@A
_BSS	SEGMENT
?ms_singleton@?$CSingleton@VCEterPackManager@@@@0PAVCEterPackManager@@A DD 01H DUP (?) ; CSingleton<CEterPackManager>::ms_singleton
_BSS	ENDS
;	COMDAT ?s_EmptyTextureSet@?1??SetTextureSet@CTerrainImpl@@SAXPAVCTextureSet@@@Z@4V3@A
_BSS	SEGMENT
?s_EmptyTextureSet@?1??SetTextureSet@CTerrainImpl@@SAXPAVCTextureSet@@@Z@4V3@A DB 0bcH DUP (?) ; `CTerrainImpl::SetTextureSet'::`2'::s_EmptyTextureSet
_BSS	ENDS
;	COMDAT ?$TSS0@?1??SetTextureSet@CTerrainImpl@@SAXPAVCTextureSet@@@Z@4HA
_BSS	SEGMENT
?$TSS0@?1??SetTextureSet@CTerrainImpl@@SAXPAVCTextureSet@@@Z@4HA DD 01H DUP (?) ; `CTerrainImpl::SetTextureSet'::`2'::$TSS0
_BSS	ENDS
;	COMDAT __real@46c80000
CONST	SEGMENT
__real@46c80000 DD 046c80000r			; 25600
CONST	ENDS
;	COMDAT __real@437f0000
CONST	SEGMENT
__real@437f0000 DD 0437f0000r			; 255
CONST	ENDS
;	COMDAT __real@3823d70a
CONST	SEGMENT
__real@3823d70a DD 03823d70ar			; 3.90625e-05
CONST	ENDS
;	COMDAT ??_R1A@?0A@EA@CTerrainImpl@@8
rdata$r	SEGMENT
??_R1A@?0A@EA@CTerrainImpl@@8 DD FLAT:??_R0?AVCTerrainImpl@@@8 ; CTerrainImpl::`RTTI Base Class Descriptor at (0,-1,0,64)'
	DD	00H
	DD	00H
	DD	0ffffffffH
	DD	00H
	DD	040H
	DD	FLAT:??_R3CTerrainImpl@@8
rdata$r	ENDS
;	COMDAT ??_R2CTerrainImpl@@8
rdata$r	SEGMENT
??_R2CTerrainImpl@@8 DD FLAT:??_R1A@?0A@EA@CTerrainImpl@@8 ; CTerrainImpl::`RTTI Base Class Array'
rdata$r	ENDS
;	COMDAT ??_R3CTerrainImpl@@8
rdata$r	SEGMENT
??_R3CTerrainImpl@@8 DD 00H				; CTerrainImpl::`RTTI Class Hierarchy Descriptor'
	DD	00H
	DD	01H
	DD	FLAT:??_R2CTerrainImpl@@8
rdata$r	ENDS
;	COMDAT ??_R0?AVCTerrainImpl@@@8
data$r	SEGMENT
??_R0?AVCTerrainImpl@@@8 DD FLAT:??_7type_info@@6B@	; CTerrainImpl `RTTI Type Descriptor'
	DD	00H
	DB	'.?AVCTerrainImpl@@', 00H
data$r	ENDS
;	COMDAT ??_R4CTerrainImpl@@6B@
rdata$r	SEGMENT
??_R4CTerrainImpl@@6B@ DD 00H				; CTerrainImpl::`RTTI Complete Object Locator'
	DD	00H
	DD	00H
	DD	FLAT:??_R0?AVCTerrainImpl@@@8
	DD	FLAT:??_R3CTerrainImpl@@8
rdata$r	ENDS
;	COMDAT ??_C@_0EJ@JKEHKGG@CTerrainImpl?3?3LoadWaterMap?5?9?5?$CFs@
CONST	SEGMENT
??_C@_0EJ@JKEHKGG@CTerrainImpl?3?3LoadWaterMap?5?9?5?$CFs@ DB 'CTerrainIm'
	DB	'pl::LoadWaterMap - %s FILE DATA SIZE(rest %d != need %d) ERRO'
	DB	'R', 00H					; `string'
CONST	ENDS
;	COMDAT ??_C@_0FC@EFCAKCOC@CTerrainImpl?3?3LoadWaterMap?5?9?5kW@
CONST	SEGMENT
??_C@_0FC@EFCAKCOC@CTerrainImpl?3?3LoadWaterMap?5?9?5kW@ DB 'CTerrainImpl'
	DB	'::LoadWaterMap - kWaterMapHeader(%s).m_height(%d)!=WATERMAP_Y'
	DB	'SIZE(%d)', 00H				; `string'
CONST	ENDS
;	COMDAT ??_C@_0FB@JFMCAAJF@CTerrainImpl?3?3LoadWaterMap?5?9?5kW@
CONST	SEGMENT
??_C@_0FB@JFMCAAJF@CTerrainImpl?3?3LoadWaterMap?5?9?5kW@ DB 'CTerrainImpl'
	DB	'::LoadWaterMap - kWaterMapHeader(%s).m_width(%d)!=WATERMAP_XS'
	DB	'IZE(%d)', 00H				; `string'
CONST	ENDS
;	COMDAT ??_C@_0EC@DBFGDPJD@CTerrainImpl?3?3LoadWaterMap?5?9?5?$CFs@
CONST	SEGMENT
??_C@_0EC@DBFGDPJD@CTerrainImpl?3?3LoadWaterMap?5?9?5?$CFs@ DB 'CTerrainI'
	DB	'mpl::LoadWaterMap - %s MAGIC NUMBER(%d!=MAGIC[%d]) ERROR', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0DA@BNEIEOIL@CTerrainImpl?3?3LoadWaterMap?5?9?5?$CFs@
CONST	SEGMENT
??_C@_0DA@BNEIEOIL@CTerrainImpl?3?3LoadWaterMap?5?9?5?$CFs@ DB 'CTerrainI'
	DB	'mpl::LoadWaterMap - %s FILE SIZE ERROR', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0CL@FEGPIHMN@CTerrainImpl?3?3LoadWaterMap?5?9?5?$CFs@
CONST	SEGMENT
??_C@_0CL@FEGPIHMN@CTerrainImpl?3?3LoadWaterMap?5?9?5?$CFs@ DB 'CTerrainI'
	DB	'mpl::LoadWaterMap - %s OPEN ERROR', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0BI@LPNELCOB@LoadWaterMapFile?5?$CFs?5?$CFd?6@
CONST	SEGMENT
??_C@_0BI@LPNELCOB@LoadWaterMapFile?5?$CFs?5?$CFd?6@ DB 'LoadWaterMapFile'
	DB	' %s %d', 0aH, 00H				; `string'
CONST	ENDS
;	COMDAT ??_C@_0DG@MJOJCCLB@CMapOutdoor?3?3LoadWaterMap?5LoadW@
CONST	SEGMENT
??_C@_0DG@MJOJCCLB@CMapOutdoor?3?3LoadWaterMap?5LoadW@ DB 'CMapOutdoor::L'
	DB	'oadWaterMap LoadWaterMapFile(%s) Failed', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0CO@EKLJBLHD@CTerrainImpl?3?3RAW_LoadTileMap?5?9@
CONST	SEGMENT
??_C@_0CO@EKLJBLHD@CTerrainImpl?3?3RAW_LoadTileMap?5?9@ DB 'CTerrainImpl:'
	DB	':RAW_LoadTileMap - %s OPEN ERROR', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0BC@JFLPEFAC@LoadSplatFile?5?$CFs?5@
CONST	SEGMENT
??_C@_0BC@JFLPEFAC@LoadSplatFile?5?$CFs?5@ DB 'LoadSplatFile %s ', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_03PMGGPEJJ@?$CFd?6@
CONST	SEGMENT
??_C@_03PMGGPEJJ@?$CFd?6@ DB '%d', 0aH, 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_0EI@LOIJBECO@CTerrainImpl?3?3LoadAttrMap?5?9?5?$CFs?5@
CONST	SEGMENT
??_C@_0EI@LOIJBECO@CTerrainImpl?3?3LoadAttrMap?5?9?5?$CFs?5@ DB 'CTerrain'
	DB	'Impl::LoadAttrMap - %s FILE DATA SIZE(rest %d != need %d) ERR'
	DB	'OR', 00H					; `string'
CONST	ENDS
;	COMDAT ??_C@_0EP@IAGDHLKD@CTerrainImpl?3?3LoadAttrMap?5?9?5kAt@
CONST	SEGMENT
??_C@_0EP@IAGDHLKD@CTerrainImpl?3?3LoadAttrMap?5?9?5kAt@ DB 'CTerrainImpl'
	DB	'::LoadAttrMap - kAttrMapHeader(%s).m_height(%d)!=ATTRMAP_YSIZ'
	DB	'E(%d)', 00H					; `string'
CONST	ENDS
;	COMDAT ??_C@_0EO@LFPHPEPB@CTerrainImpl?3?3LoadAttrMap?5?9?5kAt@
CONST	SEGMENT
??_C@_0EO@LFPHPEPB@CTerrainImpl?3?3LoadAttrMap?5?9?5kAt@ DB 'CTerrainImpl'
	DB	'::LoadAttrMap - kAttrMapHeader(%s).m_width(%d)!=ATTRMAP_XSIZE'
	DB	'(%d)', 00H					; `string'
CONST	ENDS
;	COMDAT ??_C@_0EB@HPKBHBHD@CTerrainImpl?3?3LoadAttrMap?5?9?5?$CFs?5@
CONST	SEGMENT
??_C@_0EB@HPKBHBHD@CTerrainImpl?3?3LoadAttrMap?5?9?5?$CFs?5@ DB 'CTerrain'
	DB	'Impl::LoadAttrMap - %s MAGIC NUMBER(%d!=MAGIC[%d]) ERROR', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0DA@IIKEEHMO@?5CTerrainImpl?3?3LoadAttrMap?5?9?5?$CFs@
CONST	SEGMENT
??_C@_0DA@IIKEEHMO@?5CTerrainImpl?3?3LoadAttrMap?5?9?5?$CFs@ DB ' CTerrai'
	DB	'nImpl::LoadAttrMap - %s FILE SIZE ERROR', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0CK@PIIHIJH@CTerrainImpl?3?3LoadAttrMap?5?9?5?$CFs?5@
CONST	SEGMENT
??_C@_0CK@PIIHIJH@CTerrainImpl?3?3LoadAttrMap?5?9?5?$CFs?5@ DB 'CTerrainI'
	DB	'mpl::LoadAttrMap - %s OPEN ERROR', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0BE@DJBMFHIA@LoadAttrMapFile?5?$CFs?5@
CONST	SEGMENT
??_C@_0BE@DJBMFHIA@LoadAttrMapFile?5?$CFs?5@ DB 'LoadAttrMapFile %s ', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0CM@LCPOPFI@CTerrainImpl?3?3LoadHeightMap?5?9?5?$CF@
CONST	SEGMENT
??_C@_0CM@LCPOPFI@CTerrainImpl?3?3LoadHeightMap?5?9?5?$CF@ DB 'CTerrainIm'
	DB	'pl::LoadHeightMap - %s OPEN ERROR', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_05NAOIJFC@Error@
CONST	SEGMENT
??_C@_05NAOIJFC@Error@ DB 'Error', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_0BJ@BIFDHEAG@LoadRawHeightMapFile?5?$CFs?5@
CONST	SEGMENT
??_C@_0BJ@BIFDHEAG@LoadRawHeightMapFile?5?$CFs?5@ DB 'LoadRawHeightMapFil'
	DB	'e %s ', 00H					; `string'
CONST	ENDS
;	COMDAT ??_7CTerrainImpl@@6B@
CONST	SEGMENT
??_7CTerrainImpl@@6B@ DD FLAT:??_R4CTerrainImpl@@6B@	; CTerrainImpl::`vftable'
	DD	FLAT:??_ECTerrainImpl@@UAEPAXI@Z
	DD	FLAT:?Clear@CTerrainImpl@@MAEXXZ
CONST	ENDS
;	COMDAT xdata$x
xdata$x	SEGMENT
__unwindtable$?LoadAttrMap@CTerrainImpl@@IAE_NPBD@Z DD 0ffffffffH
	DD	FLAT:__unwindfunclet$?LoadAttrMap@CTerrainImpl@@IAE_NPBD@Z$0
__ehfuncinfo$?LoadAttrMap@CTerrainImpl@@IAE_NPBD@Z DD 019930522H
	DD	01H
	DD	FLAT:__unwindtable$?LoadAttrMap@CTerrainImpl@@IAE_NPBD@Z
	DD	2 DUP(00H)
	DD	2 DUP(00H)
	DD	00H
	DD	01H
xdata$x	ENDS
;	COMDAT xdata$x
xdata$x	SEGMENT
__unwindtable$?RAW_LoadTileMap@CTerrainImpl@@IAE_NPBD@Z DD 0ffffffffH
	DD	FLAT:__unwindfunclet$?RAW_LoadTileMap@CTerrainImpl@@IAE_NPBD@Z$0
__ehfuncinfo$?RAW_LoadTileMap@CTerrainImpl@@IAE_NPBD@Z DD 019930522H
	DD	01H
	DD	FLAT:__unwindtable$?RAW_LoadTileMap@CTerrainImpl@@IAE_NPBD@Z
	DD	2 DUP(00H)
	DD	2 DUP(00H)
	DD	00H
	DD	01H
xdata$x	ENDS
;	COMDAT xdata$x
xdata$x	SEGMENT
__unwindtable$?LoadHeightMap@CTerrainImpl@@IAE_NPBD@Z DD 0ffffffffH
	DD	FLAT:__unwindfunclet$?LoadHeightMap@CTerrainImpl@@IAE_NPBD@Z$0
__ehfuncinfo$?LoadHeightMap@CTerrainImpl@@IAE_NPBD@Z DD 019930522H
	DD	01H
	DD	FLAT:__unwindtable$?LoadHeightMap@CTerrainImpl@@IAE_NPBD@Z
	DD	2 DUP(00H)
	DD	2 DUP(00H)
	DD	00H
	DD	01H
xdata$x	ENDS
;	COMDAT xdata$x
xdata$x	SEGMENT
__unwindtable$?LoadWaterMapFile@CTerrainImpl@@QAE_NPBD@Z DD 0ffffffffH
	DD	FLAT:__unwindfunclet$?LoadWaterMapFile@CTerrainImpl@@QAE_NPBD@Z$0
__ehfuncinfo$?LoadWaterMapFile@CTerrainImpl@@QAE_NPBD@Z DD 019930522H
	DD	01H
	DD	FLAT:__unwindtable$?LoadWaterMapFile@CTerrainImpl@@QAE_NPBD@Z
	DD	2 DUP(00H)
	DD	2 DUP(00H)
	DD	00H
	DD	01H
xdata$x	ENDS
;	COMDAT xdata$x
xdata$x	SEGMENT
__ehfuncinfo$??1CTerrainImpl@@UAE@XZ DD 019930522H
	DD	00H
	DD	00H
	DD	2 DUP(00H)
	DD	2 DUP(00H)
	DD	00H
	DD	05H
xdata$x	ENDS
;	COMDAT xdata$x
xdata$x	SEGMENT
__unwindtable$?SetTextureSet@CTerrainImpl@@SAXPAVCTextureSet@@@Z DD 0ffffffffH
	DD	FLAT:__unwindfunclet$?SetTextureSet@CTerrainImpl@@SAXPAVCTextureSet@@@Z$0
__ehfuncinfo$?SetTextureSet@CTerrainImpl@@SAXPAVCTextureSet@@@Z DD 019930522H
	DD	01H
	DD	FLAT:__unwindtable$?SetTextureSet@CTerrainImpl@@SAXPAVCTextureSet@@@Z
	DD	2 DUP(00H)
	DD	2 DUP(00H)
	DD	00H
	DD	01H
xdata$x	ENDS
; Function compile flags: /Ogtp
;	COMDAT ??__Fs_EmptyTextureSet@?1??SetTextureSet@CTerrainImpl@@SAXPAVCTextureSet@@@Z@YAXXZ
text$yd	SEGMENT
??__Fs_EmptyTextureSet@?1??SetTextureSet@CTerrainImpl@@SAXPAVCTextureSet@@@Z@YAXXZ PROC ; `CTerrainImpl::SetTextureSet'::`2'::`dynamic atexit destructor for 's_EmptyTextureSet'', COMDAT
  00000	b9 00 00 00 00	 mov	 ecx, OFFSET ?s_EmptyTextureSet@?1??SetTextureSet@CTerrainImpl@@SAXPAVCTextureSet@@@Z@4V3@A
  00005	e9 00 00 00 00	 jmp	 ??1CTextureSet@@UAE@XZ	; CTextureSet::~CTextureSet
??__Fs_EmptyTextureSet@?1??SetTextureSet@CTerrainImpl@@SAXPAVCTextureSet@@@Z@YAXXZ ENDP ; `CTerrainImpl::SetTextureSet'::`2'::`dynamic atexit destructor for 's_EmptyTextureSet''
text$yd	ENDS
; Function compile flags: /Ogtp
;	COMDAT ??_GCTerrainImpl@@UAEPAXI@Z
_TEXT	SEGMENT
___flags$ = 8						; size = 4
??_GCTerrainImpl@@UAEPAXI@Z PROC			; CTerrainImpl::`scalar deleting destructor', COMDAT
; _this$ = ecx
  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	56		 push	 esi
  00004	8b f1		 mov	 esi, ecx
  00006	e8 00 00 00 00	 call	 ??1CTerrainImpl@@UAE@XZ	; CTerrainImpl::~CTerrainImpl
  0000b	f6 45 08 01	 test	 BYTE PTR ___flags$[ebp], 1
  0000f	74 0e		 je	 SHORT $LN4@scalar
  00011	68 50 a5 06 00	 push	 435536			; 0006a550H
  00016	56		 push	 esi
  00017	e8 00 00 00 00	 call	 ??3@YAXPAXI@Z		; operator delete
  0001c	83 c4 08	 add	 esp, 8
$LN4@scalar:
  0001f	8b c6		 mov	 eax, esi
  00021	5e		 pop	 esi
  00022	5d		 pop	 ebp
  00023	c2 04 00	 ret	 4
??_GCTerrainImpl@@UAEPAXI@Z ENDP			; CTerrainImpl::`scalar deleting destructor'
_TEXT	ENDS
; Function compile flags: /Ogtp
; File C:\DS Project\DS Files\Source\ClientSource\Client\PRTerrainLib\Terrain.cpp
;	COMDAT ?LoadAttrMap@CTerrainImpl@@IAE_NPBD@Z
_TEXT	SEGMENT
_kAttrMapHeader$2 = -360				; size = 6
_dwStart$1$ = -352					; size = 4
_lpcvFileData$ = -348					; size = 4
tv205 = -344						; size = 4
tv200 = -344						; size = 4
_kMappedFile$ = -340					; size = 324
__$ArrayPad$ = -16					; size = 4
__$EHRec$ = -12						; size = 12
_c_szFileName$ = 8					; size = 4
?LoadAttrMap@CTerrainImpl@@IAE_NPBD@Z PROC		; CTerrainImpl::LoadAttrMap, COMDAT
; _this$ = ecx

; 95   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	6a ff		 push	 -1
  00005	68 00 00 00 00	 push	 __ehhandler$?LoadAttrMap@CTerrainImpl@@IAE_NPBD@Z
  0000a	64 a1 00 00 00
	00		 mov	 eax, DWORD PTR fs:0
  00010	50		 push	 eax
  00011	81 ec 5c 01 00
	00		 sub	 esp, 348		; 0000015cH
  00017	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0001c	33 c5		 xor	 eax, ebp
  0001e	89 45 f0	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00021	53		 push	 ebx
  00022	56		 push	 esi
  00023	57		 push	 edi
  00024	50		 push	 eax
  00025	8d 45 f4	 lea	 eax, DWORD PTR __$EHRec$[ebp]
  00028	64 a3 00 00 00
	00		 mov	 DWORD PTR fs:0, eax
  0002e	8b d9		 mov	 ebx, ecx
  00030	8b 75 08	 mov	 esi, DWORD PTR _c_szFileName$[ebp]

; 96   : 	DWORD dwStart = ELTimer_GetMSec();

  00033	e8 00 00 00 00	 call	 ?ELTimer_GetMSec@@YAKXZ	; ELTimer_GetMSec

; 97   : 	Tracef("LoadAttrMapFile %s ", c_szFileName);

  00038	56		 push	 esi
  00039	68 00 00 00 00	 push	 OFFSET ??_C@_0BE@DJBMFHIA@LoadAttrMapFile?5?$CFs?5@
  0003e	89 85 a0 fe ff
	ff		 mov	 DWORD PTR _dwStart$1$[ebp], eax
  00044	e8 00 00 00 00	 call	 ?Tracef@@YAXPBDZZ	; Tracef
  00049	83 c4 08	 add	 esp, 8

; 98   : 
; 99   : 	CMappedFile	kMappedFile;

  0004c	8d 8d ac fe ff
	ff		 lea	 ecx, DWORD PTR _kMappedFile$[ebp]
  00052	e8 00 00 00 00	 call	 ??0CMappedFile@@QAE@XZ	; CMappedFile::CMappedFile

; 100  : 	LPCVOID		lpcvFileData;
; 101  : 
; 102  : 	if (!CEterPackManager::Instance().Get(kMappedFile, c_szFileName, &lpcvFileData))

  00057	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCEterPackManager@@@@0PAVCEterPackManager@@A ; CSingleton<CEterPackManager>::ms_singleton
  0005d	8d 85 a4 fe ff
	ff		 lea	 eax, DWORD PTR _lpcvFileData$[ebp]
  00063	50		 push	 eax
  00064	56		 push	 esi
  00065	8d 85 ac fe ff
	ff		 lea	 eax, DWORD PTR _kMappedFile$[ebp]
  0006b	c7 45 fc 00 00
	00 00		 mov	 DWORD PTR __$EHRec$[ebp+8], 0
  00072	50		 push	 eax
  00073	e8 00 00 00 00	 call	 ?Get@CEterPackManager@@QAE_NAAVCMappedFile@@PBDPAPBX@Z ; CEterPackManager::Get
  00078	84 c0		 test	 al, al
  0007a	75 16		 jne	 SHORT $LN2@LoadAttrMa

; 103  : 	{
; 104  : 		TraceError("CTerrainImpl::LoadAttrMap - %s OPEN ERROR", c_szFileName);

  0007c	b8 00 00 00 00	 mov	 eax, OFFSET ??_C@_0CK@PIIHIJH@CTerrainImpl?3?3LoadAttrMap?5?9?5?$CFs?5@
  00081	56		 push	 esi
  00082	50		 push	 eax
  00083	e8 00 00 00 00	 call	 ?TraceError@@YAXPBDZZ	; TraceError
  00088	83 c4 08	 add	 esp, 8
  0008b	32 db		 xor	 bl, bl
  0008d	e9 0a 01 00 00	 jmp	 $LN15@LoadAttrMa
$LN2@LoadAttrMa:

; 105  : 		return false;
; 106  : 	}
; 107  : 
; 108  : 	DWORD dwFileSize = kMappedFile.Size();

  00092	8d 8d ac fe ff
	ff		 lea	 ecx, DWORD PTR _kMappedFile$[ebp]
  00098	e8 00 00 00 00	 call	 ?Size@CMappedFile@@QAEKXZ ; CMappedFile::Size
  0009d	8b f8		 mov	 edi, eax

; 109  : 	BYTE * abFileData = (BYTE *) lpcvFileData;
; 110  : 
; 111  : 	// LoadAttrMap
; 112  : 	{
; 113  : #pragma pack(push)
; 114  : #pragma pack(1)
; 115  : 		struct SAttrMapHeader
; 116  : 		{
; 117  : 			WORD m_wMagic;
; 118  : 			WORD m_wWidth;
; 119  : 			WORD m_wHeight;
; 120  : 		};
; 121  : #pragma pack(pop)
; 122  : 
; 123  : 		if (dwFileSize < sizeof(SAttrMapHeader))

  0009f	83 ff 06	 cmp	 edi, 6
  000a2	73 16		 jae	 SHORT $LN3@LoadAttrMa

; 124  : 		{
; 125  : 			TraceError(" CTerrainImpl::LoadAttrMap - %s FILE SIZE ERROR", c_szFileName);
; 126  : 			return false;

  000a4	b8 00 00 00 00	 mov	 eax, OFFSET ??_C@_0DA@IIKEEHMO@?5CTerrainImpl?3?3LoadAttrMap?5?9?5?$CFs@
  000a9	56		 push	 esi
  000aa	50		 push	 eax
  000ab	e8 00 00 00 00	 call	 ?TraceError@@YAXPBDZZ	; TraceError
  000b0	83 c4 08	 add	 esp, 8
  000b3	32 db		 xor	 bl, bl
  000b5	e9 e2 00 00 00	 jmp	 $LN15@LoadAttrMa
$LN3@LoadAttrMa:

; 127  : 		}
; 128  : 
; 129  : 		SAttrMapHeader kAttrMapHeader;
; 130  : 		memcpy(&kAttrMapHeader, abFileData, sizeof(kAttrMapHeader));

  000ba	8b 95 a4 fe ff
	ff		 mov	 edx, DWORD PTR _lpcvFileData$[ebp]

; 131  : 
; 132  : 		const WORD c_wAttrMapMagic = 2634;
; 133  : 		if (c_wAttrMapMagic != kAttrMapHeader.m_wMagic)

  000c0	c7 85 a8 fe ff
	ff 4a 0a 00 00	 mov	 DWORD PTR tv200[ebp], 2634 ; 00000a4aH
  000ca	8b 02		 mov	 eax, DWORD PTR [edx]
  000cc	66 8b 4a 04	 mov	 cx, WORD PTR [edx+4]
  000d0	89 85 98 fe ff
	ff		 mov	 DWORD PTR _kAttrMapHeader$2[ebp], eax
  000d6	66 39 85 a8 fe
	ff ff		 cmp	 WORD PTR tv200[ebp], ax
  000dd	74 1a		 je	 SHORT $LN4@LoadAttrMa

; 134  : 		{
; 135  : 			TraceError("CTerrainImpl::LoadAttrMap - %s MAGIC NUMBER(%d!=MAGIC[%d]) ERROR", c_szFileName, kAttrMapHeader.m_wMagic, kAttrMapHeader.m_wMagic);

  000df	0f b7 c0	 movzx	 eax, ax
  000e2	50		 push	 eax
  000e3	50		 push	 eax
  000e4	56		 push	 esi
  000e5	68 00 00 00 00	 push	 OFFSET ??_C@_0EB@HPKBHBHD@CTerrainImpl?3?3LoadAttrMap?5?9?5?$CFs?5@

; 154  : 		{
; 155  : 			TraceError("CTerrainImpl::LoadAttrMap - %s FILE DATA SIZE(rest %d != need %d) ERROR", c_szFileName, dwFileRestSize, dwFileNeedSize);

  000ea	e8 00 00 00 00	 call	 ?TraceError@@YAXPBDZZ	; TraceError
  000ef	83 c4 10	 add	 esp, 16			; 00000010H
  000f2	32 db		 xor	 bl, bl
  000f4	e9 a3 00 00 00	 jmp	 $LN15@LoadAttrMa
$LN4@LoadAttrMa:

; 136  : 			return false;
; 137  : 		}
; 138  : 
; 139  : 		if (ATTRMAP_XSIZE != kAttrMapHeader.m_wWidth)

  000f9	66 8b 85 9a fe
	ff ff		 mov	 ax, WORD PTR _kAttrMapHeader$2[ebp+2]
  00100	c7 85 a8 fe ff
	ff 00 01 00 00	 mov	 DWORD PTR tv205[ebp], 256 ; 00000100H
  0010a	66 39 85 a8 fe
	ff ff		 cmp	 WORD PTR tv205[ebp], ax
  00111	74 1b		 je	 SHORT $LN5@LoadAttrMa

; 140  : 		{
; 141  : 			TraceError("CTerrainImpl::LoadAttrMap - kAttrMapHeader(%s).m_width(%d)!=ATTRMAP_XSIZE(%d)", c_szFileName, kAttrMapHeader.m_wWidth, ATTRMAP_XSIZE);

  00113	68 00 01 00 00	 push	 256			; 00000100H
  00118	0f b7 c0	 movzx	 eax, ax
  0011b	50		 push	 eax
  0011c	56		 push	 esi
  0011d	68 00 00 00 00	 push	 OFFSET ??_C@_0EO@LFPHPEPB@CTerrainImpl?3?3LoadAttrMap?5?9?5kAt@

; 154  : 		{
; 155  : 			TraceError("CTerrainImpl::LoadAttrMap - %s FILE DATA SIZE(rest %d != need %d) ERROR", c_szFileName, dwFileRestSize, dwFileNeedSize);

  00122	e8 00 00 00 00	 call	 ?TraceError@@YAXPBDZZ	; TraceError
  00127	83 c4 10	 add	 esp, 16			; 00000010H
  0012a	32 db		 xor	 bl, bl
  0012c	eb 6e		 jmp	 SHORT $LN15@LoadAttrMa
$LN5@LoadAttrMa:

; 142  : 			return false;
; 143  : 		}
; 144  : 
; 145  : 		if (ATTRMAP_YSIZE != kAttrMapHeader.m_wHeight)

  0012e	b8 00 01 00 00	 mov	 eax, 256		; 00000100H
  00133	66 3b c1	 cmp	 ax, cx
  00136	74 17		 je	 SHORT $LN6@LoadAttrMa

; 146  : 		{
; 147  : 			TraceError("CTerrainImpl::LoadAttrMap - kAttrMapHeader(%s).m_height(%d)!=ATTRMAP_YSIZE(%d)", c_szFileName, kAttrMapHeader.m_wHeight, ATTRMAP_YSIZE);

  00138	50		 push	 eax
  00139	0f b7 c1	 movzx	 eax, cx
  0013c	50		 push	 eax
  0013d	56		 push	 esi
  0013e	68 00 00 00 00	 push	 OFFSET ??_C@_0EP@IAGDHLKD@CTerrainImpl?3?3LoadAttrMap?5?9?5kAt@

; 154  : 		{
; 155  : 			TraceError("CTerrainImpl::LoadAttrMap - %s FILE DATA SIZE(rest %d != need %d) ERROR", c_szFileName, dwFileRestSize, dwFileNeedSize);

  00143	e8 00 00 00 00	 call	 ?TraceError@@YAXPBDZZ	; TraceError
  00148	83 c4 10	 add	 esp, 16			; 00000010H
  0014b	32 db		 xor	 bl, bl
  0014d	eb 4d		 jmp	 SHORT $LN15@LoadAttrMa
$LN6@LoadAttrMa:

; 148  : 			return false;
; 149  : 		}
; 150  : 
; 151  : 		DWORD dwFileRestSize=dwFileSize-sizeof(kAttrMapHeader);

  0014f	8d 47 fa	 lea	 eax, DWORD PTR [edi-6]

; 152  : 		DWORD dwFileNeedSize=sizeof(m_abyAttrMap);
; 153  : 		if (dwFileRestSize != dwFileNeedSize)

  00152	68 00 00 01 00	 push	 65536			; 00010000H
  00157	3d 00 00 01 00	 cmp	 eax, 65536		; 00010000H
  0015c	74 13		 je	 SHORT $LN7@LoadAttrMa

; 154  : 		{
; 155  : 			TraceError("CTerrainImpl::LoadAttrMap - %s FILE DATA SIZE(rest %d != need %d) ERROR", c_szFileName, dwFileRestSize, dwFileNeedSize);

  0015e	50		 push	 eax
  0015f	56		 push	 esi
  00160	68 00 00 00 00	 push	 OFFSET ??_C@_0EI@LOIJBECO@CTerrainImpl?3?3LoadAttrMap?5?9?5?$CFs?5@
  00165	e8 00 00 00 00	 call	 ?TraceError@@YAXPBDZZ	; TraceError
  0016a	83 c4 10	 add	 esp, 16			; 00000010H
  0016d	32 db		 xor	 bl, bl
  0016f	eb 2b		 jmp	 SHORT $LN15@LoadAttrMa
$LN7@LoadAttrMa:

; 156  : 			return false;
; 157  : 		}
; 158  : 
; 159  : 		BYTE* abSrcAttrData= abFileData+sizeof(kAttrMapHeader);

  00171	8d 42 06	 lea	 eax, DWORD PTR [edx+6]

; 160  : 		memcpy(m_abyAttrMap, abSrcAttrData, sizeof(m_abyAttrMap));

  00174	50		 push	 eax
  00175	8d 83 1a 8e 01
	00		 lea	 eax, DWORD PTR [ebx+101914]
  0017b	50		 push	 eax
  0017c	e8 00 00 00 00	 call	 _memcpy

; 161  : 	}
; 162  : 
; 163  : 	Tracef("%d\n", ELTimer_GetMSec() - dwStart);

  00181	e8 00 00 00 00	 call	 ?ELTimer_GetMSec@@YAKXZ	; ELTimer_GetMSec
  00186	2b 85 a0 fe ff
	ff		 sub	 eax, DWORD PTR _dwStart$1$[ebp]
  0018c	50		 push	 eax
  0018d	68 00 00 00 00	 push	 OFFSET ??_C@_03PMGGPEJJ@?$CFd?6@
  00192	e8 00 00 00 00	 call	 ?Tracef@@YAXPBDZZ	; Tracef
  00197	83 c4 14	 add	 esp, 20			; 00000014H

; 164  : 	return true;

  0019a	b3 01		 mov	 bl, 1
$LN15@LoadAttrMa:
  0019c	8d 8d ac fe ff
	ff		 lea	 ecx, DWORD PTR _kMappedFile$[ebp]
  001a2	e8 00 00 00 00	 call	 ??1CMappedFile@@UAE@XZ	; CMappedFile::~CMappedFile
  001a7	8a c3		 mov	 al, bl

; 165  : }

  001a9	8b 4d f4	 mov	 ecx, DWORD PTR __$EHRec$[ebp]
  001ac	64 89 0d 00 00
	00 00		 mov	 DWORD PTR fs:0, ecx
  001b3	59		 pop	 ecx
  001b4	5f		 pop	 edi
  001b5	5e		 pop	 esi
  001b6	5b		 pop	 ebx
  001b7	8b 4d f0	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  001ba	33 cd		 xor	 ecx, ebp
  001bc	e8 00 00 00 00	 call	 @__security_check_cookie@4
  001c1	8b e5		 mov	 esp, ebp
  001c3	5d		 pop	 ebp
  001c4	c2 04 00	 ret	 4
_TEXT	ENDS
;	COMDAT text$x
text$x	SEGMENT
__unwindfunclet$?LoadAttrMap@CTerrainImpl@@IAE_NPBD@Z$0:
  00000	8d 8d ac fe ff
	ff		 lea	 ecx, DWORD PTR _kMappedFile$[ebp]
  00006	e9 00 00 00 00	 jmp	 ??1CMappedFile@@UAE@XZ	; CMappedFile::~CMappedFile
  0000b	cc		 int	 3
  0000c	cc		 int	 3
  0000d	cc		 int	 3
  0000e	cc		 int	 3
  0000f	cc		 int	 3
__ehhandler$?LoadAttrMap@CTerrainImpl@@IAE_NPBD@Z:
  00010	90		 npad	 1
  00011	90		 npad	 1
  00012	8b 54 24 08	 mov	 edx, DWORD PTR [esp+8]
  00016	8d 42 0c	 lea	 eax, DWORD PTR [edx+12]
  00019	8b 8a 94 fe ff
	ff		 mov	 ecx, DWORD PTR [edx-364]
  0001f	33 c8		 xor	 ecx, eax
  00021	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00026	8b 4a fc	 mov	 ecx, DWORD PTR [edx-4]
  00029	33 c8		 xor	 ecx, eax
  0002b	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00030	b8 00 00 00 00	 mov	 eax, OFFSET __ehfuncinfo$?LoadAttrMap@CTerrainImpl@@IAE_NPBD@Z
  00035	e9 00 00 00 00	 jmp	 ___CxxFrameHandler3
text$x	ENDS
?LoadAttrMap@CTerrainImpl@@IAE_NPBD@Z ENDP		; CTerrainImpl::LoadAttrMap
; Function compile flags: /Ogtp
; File C:\DS Project\DS Files\Source\ClientSource\Client\PRTerrainLib\Terrain.cpp
;	COMDAT ?RAW_LoadTileMap@CTerrainImpl@@IAE_NPBD@Z
_TEXT	SEGMENT
_lpcvFileData$ = -344					; size = 4
_kMappedFile$ = -340					; size = 324
__$ArrayPad$ = -16					; size = 4
__$EHRec$ = -12						; size = 12
_c_szFileName$ = 8					; size = 4
?RAW_LoadTileMap@CTerrainImpl@@IAE_NPBD@Z PROC		; CTerrainImpl::RAW_LoadTileMap, COMDAT
; _this$ = ecx

; 168  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	6a ff		 push	 -1
  00005	68 00 00 00 00	 push	 __ehhandler$?RAW_LoadTileMap@CTerrainImpl@@IAE_NPBD@Z
  0000a	64 a1 00 00 00
	00		 mov	 eax, DWORD PTR fs:0
  00010	50		 push	 eax
  00011	81 ec 4c 01 00
	00		 sub	 esp, 332		; 0000014cH
  00017	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0001c	33 c5		 xor	 eax, ebp
  0001e	89 45 f0	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00021	53		 push	 ebx
  00022	56		 push	 esi
  00023	57		 push	 edi
  00024	50		 push	 eax
  00025	8d 45 f4	 lea	 eax, DWORD PTR __$EHRec$[ebp]
  00028	64 a3 00 00 00
	00		 mov	 DWORD PTR fs:0, eax
  0002e	8b f9		 mov	 edi, ecx
  00030	8b 75 08	 mov	 esi, DWORD PTR _c_szFileName$[ebp]

; 169  : 	Tracef("LoadSplatFile %s ", c_szFileName);

  00033	56		 push	 esi
  00034	68 00 00 00 00	 push	 OFFSET ??_C@_0BC@JFLPEFAC@LoadSplatFile?5?$CFs?5@
  00039	e8 00 00 00 00	 call	 ?Tracef@@YAXPBDZZ	; Tracef
  0003e	83 c4 08	 add	 esp, 8

; 170  : 
; 171  : 	CMappedFile	kMappedFile;

  00041	8d 8d ac fe ff
	ff		 lea	 ecx, DWORD PTR _kMappedFile$[ebp]
  00047	e8 00 00 00 00	 call	 ??0CMappedFile@@QAE@XZ	; CMappedFile::CMappedFile

; 172  : 	LPCVOID		lpcvFileData;
; 173  : 
; 174  : 	if (!CEterPackManager::Instance().Get(kMappedFile, c_szFileName, &lpcvFileData))

  0004c	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCEterPackManager@@@@0PAVCEterPackManager@@A ; CSingleton<CEterPackManager>::ms_singleton
  00052	8d 85 a8 fe ff
	ff		 lea	 eax, DWORD PTR _lpcvFileData$[ebp]
  00058	50		 push	 eax
  00059	56		 push	 esi
  0005a	8d 85 ac fe ff
	ff		 lea	 eax, DWORD PTR _kMappedFile$[ebp]
  00060	c7 45 fc 00 00
	00 00		 mov	 DWORD PTR __$EHRec$[ebp+8], 0
  00067	50		 push	 eax
  00068	e8 00 00 00 00	 call	 ?Get@CEterPackManager@@QAE_NAAVCMappedFile@@PBDPAPBX@Z ; CEterPackManager::Get
  0006d	84 c0		 test	 al, al
  0006f	75 1c		 jne	 SHORT $LN2@RAW_LoadTi

; 175  : 	{
; 176  : 		Tracen("Error");

  00071	68 00 00 00 00	 push	 OFFSET ??_C@_05NAOIJFC@Error@
  00076	e8 00 00 00 00	 call	 ?Tracen@@YAXPBD@Z	; Tracen

; 177  : 		TraceError("CTerrainImpl::RAW_LoadTileMap - %s OPEN ERROR", c_szFileName);

  0007b	56		 push	 esi
  0007c	68 00 00 00 00	 push	 OFFSET ??_C@_0CO@EKLJBLHD@CTerrainImpl?3?3RAW_LoadTileMap?5?9@
  00081	e8 00 00 00 00	 call	 ?TraceError@@YAXPBDZZ	; TraceError
  00086	83 c4 0c	 add	 esp, 12			; 0000000cH
  00089	32 db		 xor	 bl, bl
  0008b	eb 1c		 jmp	 SHORT $LN5@RAW_LoadTi
$LN2@RAW_LoadTi:

; 178  : 		return false;
; 179  : 	}
; 180  : 
; 181  : 	memcpy(m_abyTileMap, lpcvFileData, sizeof(BYTE)*(TILEMAP_RAW_XSIZE)*(TILEMAP_RAW_YSIZE));

  0008d	68 04 04 01 00	 push	 66564			; 00010404H
  00092	ff b5 a8 fe ff
	ff		 push	 DWORD PTR _lpcvFileData$[ebp]
  00098	8d 87 16 8a 00
	00		 lea	 eax, DWORD PTR [edi+35350]
  0009e	50		 push	 eax
  0009f	e8 00 00 00 00	 call	 _memcpy
  000a4	83 c4 0c	 add	 esp, 12			; 0000000cH

; 182  : 
; 183  : 	return true;

  000a7	b3 01		 mov	 bl, 1
$LN5@RAW_LoadTi:
  000a9	8d 8d ac fe ff
	ff		 lea	 ecx, DWORD PTR _kMappedFile$[ebp]
  000af	e8 00 00 00 00	 call	 ??1CMappedFile@@UAE@XZ	; CMappedFile::~CMappedFile
  000b4	8a c3		 mov	 al, bl

; 184  : 
; 185  : }

  000b6	8b 4d f4	 mov	 ecx, DWORD PTR __$EHRec$[ebp]
  000b9	64 89 0d 00 00
	00 00		 mov	 DWORD PTR fs:0, ecx
  000c0	59		 pop	 ecx
  000c1	5f		 pop	 edi
  000c2	5e		 pop	 esi
  000c3	5b		 pop	 ebx
  000c4	8b 4d f0	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  000c7	33 cd		 xor	 ecx, ebp
  000c9	e8 00 00 00 00	 call	 @__security_check_cookie@4
  000ce	8b e5		 mov	 esp, ebp
  000d0	5d		 pop	 ebp
  000d1	c2 04 00	 ret	 4
_TEXT	ENDS
;	COMDAT text$x
text$x	SEGMENT
__unwindfunclet$?RAW_LoadTileMap@CTerrainImpl@@IAE_NPBD@Z$0:
  00000	8d 8d ac fe ff
	ff		 lea	 ecx, DWORD PTR _kMappedFile$[ebp]
  00006	e9 00 00 00 00	 jmp	 ??1CMappedFile@@UAE@XZ	; CMappedFile::~CMappedFile
  0000b	cc		 int	 3
  0000c	cc		 int	 3
  0000d	cc		 int	 3
  0000e	cc		 int	 3
  0000f	cc		 int	 3
__ehhandler$?RAW_LoadTileMap@CTerrainImpl@@IAE_NPBD@Z:
  00010	90		 npad	 1
  00011	90		 npad	 1
  00012	8b 54 24 08	 mov	 edx, DWORD PTR [esp+8]
  00016	8d 42 0c	 lea	 eax, DWORD PTR [edx+12]
  00019	8b 8a a4 fe ff
	ff		 mov	 ecx, DWORD PTR [edx-348]
  0001f	33 c8		 xor	 ecx, eax
  00021	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00026	8b 4a fc	 mov	 ecx, DWORD PTR [edx-4]
  00029	33 c8		 xor	 ecx, eax
  0002b	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00030	b8 00 00 00 00	 mov	 eax, OFFSET __ehfuncinfo$?RAW_LoadTileMap@CTerrainImpl@@IAE_NPBD@Z
  00035	e9 00 00 00 00	 jmp	 ___CxxFrameHandler3
text$x	ENDS
?RAW_LoadTileMap@CTerrainImpl@@IAE_NPBD@Z ENDP		; CTerrainImpl::RAW_LoadTileMap
; Function compile flags: /Ogtp
; File C:\DS Project\DS Files\Source\ClientSource\Client\PRTerrainLib\Terrain.cpp
;	COMDAT ?LoadHeightMap@CTerrainImpl@@IAE_NPBD@Z
_TEXT	SEGMENT
_lpcvFileData$ = -344					; size = 4
_kMappedFile$ = -340					; size = 324
__$ArrayPad$ = -16					; size = 4
__$EHRec$ = -12						; size = 12
_c_szFileName$ = 8					; size = 4
?LoadHeightMap@CTerrainImpl@@IAE_NPBD@Z PROC		; CTerrainImpl::LoadHeightMap, COMDAT
; _this$ = ecx

; 76   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	6a ff		 push	 -1
  00005	68 00 00 00 00	 push	 __ehhandler$?LoadHeightMap@CTerrainImpl@@IAE_NPBD@Z
  0000a	64 a1 00 00 00
	00		 mov	 eax, DWORD PTR fs:0
  00010	50		 push	 eax
  00011	81 ec 4c 01 00
	00		 sub	 esp, 332		; 0000014cH
  00017	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0001c	33 c5		 xor	 eax, ebp
  0001e	89 45 f0	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00021	53		 push	 ebx
  00022	56		 push	 esi
  00023	57		 push	 edi
  00024	50		 push	 eax
  00025	8d 45 f4	 lea	 eax, DWORD PTR __$EHRec$[ebp]
  00028	64 a3 00 00 00
	00		 mov	 DWORD PTR fs:0, eax
  0002e	8b f9		 mov	 edi, ecx
  00030	8b 75 08	 mov	 esi, DWORD PTR _c_szFileName$[ebp]

; 77   : 	Tracef("LoadRawHeightMapFile %s ", c_szFileName);

  00033	56		 push	 esi
  00034	68 00 00 00 00	 push	 OFFSET ??_C@_0BJ@BIFDHEAG@LoadRawHeightMapFile?5?$CFs?5@
  00039	e8 00 00 00 00	 call	 ?Tracef@@YAXPBDZZ	; Tracef
  0003e	83 c4 08	 add	 esp, 8

; 78   : 
; 79   : 	CMappedFile	kMappedFile;

  00041	8d 8d ac fe ff
	ff		 lea	 ecx, DWORD PTR _kMappedFile$[ebp]
  00047	e8 00 00 00 00	 call	 ??0CMappedFile@@QAE@XZ	; CMappedFile::CMappedFile

; 80   : 	LPCVOID		lpcvFileData;
; 81   : 
; 82   : 	if (!CEterPackManager::Instance().Get(kMappedFile, c_szFileName, &lpcvFileData))

  0004c	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCEterPackManager@@@@0PAVCEterPackManager@@A ; CSingleton<CEterPackManager>::ms_singleton
  00052	8d 85 a8 fe ff
	ff		 lea	 eax, DWORD PTR _lpcvFileData$[ebp]
  00058	50		 push	 eax
  00059	56		 push	 esi
  0005a	8d 85 ac fe ff
	ff		 lea	 eax, DWORD PTR _kMappedFile$[ebp]
  00060	c7 45 fc 00 00
	00 00		 mov	 DWORD PTR __$EHRec$[ebp+8], 0
  00067	50		 push	 eax
  00068	e8 00 00 00 00	 call	 ?Get@CEterPackManager@@QAE_NAAVCMappedFile@@PBDPAPBX@Z ; CEterPackManager::Get
  0006d	84 c0		 test	 al, al
  0006f	75 1c		 jne	 SHORT $LN2@LoadHeight

; 83   : 	{
; 84   : 		Tracen("Error");

  00071	68 00 00 00 00	 push	 OFFSET ??_C@_05NAOIJFC@Error@
  00076	e8 00 00 00 00	 call	 ?Tracen@@YAXPBD@Z	; Tracen

; 85   : 		TraceError("CTerrainImpl::LoadHeightMap - %s OPEN ERROR", c_szFileName);

  0007b	56		 push	 esi
  0007c	68 00 00 00 00	 push	 OFFSET ??_C@_0CM@LCPOPFI@CTerrainImpl?3?3LoadHeightMap?5?9?5?$CF@
  00081	e8 00 00 00 00	 call	 ?TraceError@@YAXPBDZZ	; TraceError
  00086	83 c4 0c	 add	 esp, 12			; 0000000cH
  00089	32 db		 xor	 bl, bl
  0008b	eb 1c		 jmp	 SHORT $LN5@LoadHeight
$LN2@LoadHeight:

; 86   : 		return false;
; 87   : 	}
; 88   : 
; 89   : 	memcpy(m_awRawHeightMap, lpcvFileData, sizeof(WORD)*HEIGHTMAP_RAW_XSIZE*HEIGHTMAP_RAW_YSIZE);

  0008d	68 12 86 00 00	 push	 34322			; 00008612H
  00092	ff b5 a8 fe ff
	ff		 push	 DWORD PTR _lpcvFileData$[ebp]
  00098	8d 87 04 04 00
	00		 lea	 eax, DWORD PTR [edi+1028]
  0009e	50		 push	 eax
  0009f	e8 00 00 00 00	 call	 _memcpy
  000a4	83 c4 0c	 add	 esp, 12			; 0000000cH

; 90   : 
; 91   : 	return true;

  000a7	b3 01		 mov	 bl, 1
$LN5@LoadHeight:
  000a9	8d 8d ac fe ff
	ff		 lea	 ecx, DWORD PTR _kMappedFile$[ebp]
  000af	e8 00 00 00 00	 call	 ??1CMappedFile@@UAE@XZ	; CMappedFile::~CMappedFile
  000b4	8a c3		 mov	 al, bl

; 92   : }

  000b6	8b 4d f4	 mov	 ecx, DWORD PTR __$EHRec$[ebp]
  000b9	64 89 0d 00 00
	00 00		 mov	 DWORD PTR fs:0, ecx
  000c0	59		 pop	 ecx
  000c1	5f		 pop	 edi
  000c2	5e		 pop	 esi
  000c3	5b		 pop	 ebx
  000c4	8b 4d f0	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  000c7	33 cd		 xor	 ecx, ebp
  000c9	e8 00 00 00 00	 call	 @__security_check_cookie@4
  000ce	8b e5		 mov	 esp, ebp
  000d0	5d		 pop	 ebp
  000d1	c2 04 00	 ret	 4
_TEXT	ENDS
;	COMDAT text$x
text$x	SEGMENT
__unwindfunclet$?LoadHeightMap@CTerrainImpl@@IAE_NPBD@Z$0:
  00000	8d 8d ac fe ff
	ff		 lea	 ecx, DWORD PTR _kMappedFile$[ebp]
  00006	e9 00 00 00 00	 jmp	 ??1CMappedFile@@UAE@XZ	; CMappedFile::~CMappedFile
  0000b	cc		 int	 3
  0000c	cc		 int	 3
  0000d	cc		 int	 3
  0000e	cc		 int	 3
  0000f	cc		 int	 3
__ehhandler$?LoadHeightMap@CTerrainImpl@@IAE_NPBD@Z:
  00010	90		 npad	 1
  00011	90		 npad	 1
  00012	8b 54 24 08	 mov	 edx, DWORD PTR [esp+8]
  00016	8d 42 0c	 lea	 eax, DWORD PTR [edx+12]
  00019	8b 8a a4 fe ff
	ff		 mov	 ecx, DWORD PTR [edx-348]
  0001f	33 c8		 xor	 ecx, eax
  00021	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00026	8b 4a fc	 mov	 ecx, DWORD PTR [edx-4]
  00029	33 c8		 xor	 ecx, eax
  0002b	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00030	b8 00 00 00 00	 mov	 eax, OFFSET __ehfuncinfo$?LoadHeightMap@CTerrainImpl@@IAE_NPBD@Z
  00035	e9 00 00 00 00	 jmp	 ___CxxFrameHandler3
text$x	ENDS
?LoadHeightMap@CTerrainImpl@@IAE_NPBD@Z ENDP		; CTerrainImpl::LoadHeightMap
; Function compile flags: /Ogtp
; File C:\DS Project\DS Files\Source\ClientSource\Client\PRTerrainLib\Terrain.cpp
;	COMDAT ?Clear@CTerrainImpl@@MAEXXZ
_TEXT	SEGMENT
?Clear@CTerrainImpl@@MAEXXZ PROC			; CTerrainImpl::Clear, COMDAT
; _this$ = ecx

; 62   : {

  00000	53		 push	 ebx
  00001	57		 push	 edi
  00002	8b d9		 mov	 ebx, ecx

; 63   : 	for (DWORD i = 0; i < GetTextureSet()->GetTextureCount(); ++i)

  00004	33 ff		 xor	 edi, edi
  00006	e8 00 00 00 00	 call	 ?GetTextureSet@CTerrainImpl@@SAPAVCTextureSet@@XZ ; CTerrainImpl::GetTextureSet
  0000b	8b c8		 mov	 ecx, eax
  0000d	e8 00 00 00 00	 call	 ?GetTextureCount@CTextureSet@@QAEKXZ ; CTextureSet::GetTextureCount
  00012	85 c0		 test	 eax, eax
  00014	74 31		 je	 SHORT $LN3@Clear
  00016	56		 push	 esi
  00017	8d 73 04	 lea	 esi, DWORD PTR [ebx+4]
  0001a	66 0f 1f 44 00
	00		 npad	 6
$LL4@Clear:

; 64   : 	{
; 65   : 		if (m_lpAlphaTexture[i])

  00020	8b 0e		 mov	 ecx, DWORD PTR [esi]
  00022	85 c9		 test	 ecx, ecx
  00024	74 0c		 je	 SHORT $LN2@Clear

; 66   : 		{
; 67   : 			m_lpAlphaTexture[i]->Release();

  00026	8b 01		 mov	 eax, DWORD PTR [ecx]
  00028	51		 push	 ecx
  00029	ff 50 08	 call	 DWORD PTR [eax+8]

; 68   : 			m_lpAlphaTexture[i] = NULL;

  0002c	c7 06 00 00 00
	00		 mov	 DWORD PTR [esi], 0
$LN2@Clear:

; 63   : 	for (DWORD i = 0; i < GetTextureSet()->GetTextureCount(); ++i)

  00032	47		 inc	 edi
  00033	83 c6 04	 add	 esi, 4
  00036	e8 00 00 00 00	 call	 ?GetTextureSet@CTerrainImpl@@SAPAVCTextureSet@@XZ ; CTerrainImpl::GetTextureSet
  0003b	8b c8		 mov	 ecx, eax
  0003d	e8 00 00 00 00	 call	 ?GetTextureCount@CTextureSet@@QAEKXZ ; CTextureSet::GetTextureCount
  00042	3b f8		 cmp	 edi, eax
  00044	72 da		 jb	 SHORT $LL4@Clear
  00046	5e		 pop	 esi
$LN3@Clear:

; 69   : 		}
; 70   : 	}
; 71   : 
; 72   : 	Initialize();

  00047	5f		 pop	 edi
  00048	8b cb		 mov	 ecx, ebx
  0004a	5b		 pop	 ebx
  0004b	e9 00 00 00 00	 jmp	 ?Initialize@CTerrainImpl@@IAEXXZ ; CTerrainImpl::Initialize
?Clear@CTerrainImpl@@MAEXXZ ENDP			; CTerrainImpl::Clear
_TEXT	ENDS
; Function compile flags: /Ogtp
; File C:\DS Project\DS Files\Source\ClientSource\Client\PRTerrainLib\Terrain.cpp
;	COMDAT ?Initialize@CTerrainImpl@@IAEXXZ
_TEXT	SEGMENT
?Initialize@CTerrainImpl@@IAEXXZ PROC			; CTerrainImpl::Initialize, COMDAT
; _this$ = ecx

; 41   : {

  00000	56		 push	 esi
  00001	8b f1		 mov	 esi, ecx

; 42   : 	memset(m_lWaterHeight, -1, sizeof(m_lWaterHeight));

  00003	68 00 04 00 00	 push	 1024			; 00000400H
  00008	6a ff		 push	 -1
  0000a	8d 86 44 a1 04
	00		 lea	 eax, DWORD PTR [esi+303428]
  00010	50		 push	 eax
  00011	e8 00 00 00 00	 call	 _memset

; 43   : 
; 44   : 	m_byNumWater = 0;
; 45   : 	memset(&m_HeightMapHeader, 0, sizeof(TGA_HEADER));
; 46   : 	memset(&m_awShadowMap, 0xFFFF, sizeof(m_awShadowMap));

  00016	68 00 00 02 00	 push	 131072			; 00020000H
  0001b	c6 86 40 a1 04
	00 00		 mov	 BYTE PTR [esi+303424], 0
  00022	8d 86 48 a5 04
	00		 lea	 eax, DWORD PTR [esi+304456]
  00028	0f 57 c0	 xorps	 xmm0, xmm0
  0002b	68 ff ff 00 00	 push	 65535			; 0000ffffH
  00030	0f 11 86 1d 91
	03 00		 movups	 XMMWORD PTR [esi+233757], xmm0
  00037	50		 push	 eax
  00038	66 c7 86 2d 91
	03 00 00 00	 mov	 WORD PTR [esi+233773], 0
  00041	e8 00 00 00 00	 call	 _memset

; 47   : 	memset(&m_lpAlphaTexture, NULL, sizeof(m_lpAlphaTexture));

  00046	68 00 04 00 00	 push	 1024			; 00000400H
  0004b	8d 46 04	 lea	 eax, DWORD PTR [esi+4]
  0004e	6a 00		 push	 0
  00050	50		 push	 eax
  00051	e8 00 00 00 00	 call	 _memset
  00056	83 c4 24	 add	 esp, 36			; 00000024H

; 48   : 
; 49   : 	m_lViewRadius = 0;

  00059	c7 86 34 91 03
	00 00 00 00 00	 mov	 DWORD PTR [esi+233780], 0

; 50   : 
; 51   : 	m_wTileMapVersion = 8976;

  00063	b8 10 23 00 00	 mov	 eax, 8976		; 00002310H

; 52   : 
; 53   : 	m_fHeightScale = 0.0f;

  00068	c7 86 38 91 03
	00 00 00 00 00	 mov	 DWORD PTR [esi+233784], 0
  00072	66 89 86 30 91
	03 00		 mov	 WORD PTR [esi+233776], ax

; 54   : 
; 55   : 	m_lpShadowTexture = NULL;

  00079	c7 86 44 a5 04
	00 00 00 00 00	 mov	 DWORD PTR [esi+304452], 0

; 56   : 
; 57   : 	m_lSplatTilesX = 0;

  00083	c7 86 48 a5 06
	00 00 00 00 00	 mov	 DWORD PTR [esi+435528], 0

; 58   : 	m_lSplatTilesY = 0;

  0008d	c7 86 4c a5 06
	00 00 00 00 00	 mov	 DWORD PTR [esi+435532], 0
  00097	5e		 pop	 esi

; 59   : }

  00098	c3		 ret	 0
?Initialize@CTerrainImpl@@IAEXXZ ENDP			; CTerrainImpl::Initialize
_TEXT	ENDS
; Function compile flags: /Ogtp
; File C:\DS Project\DS Files\Source\ClientSource\Client\PRTerrainLib\Terrain.cpp
;	COMDAT ?GetShadowMapColor@CTerrainImpl@@QAEKMM@Z
_TEXT	SEGMENT
_fx$ = 8						; size = 4
_fy$ = 12						; size = 4
?GetShadowMapColor@CTerrainImpl@@QAEKMM@Z PROC		; CTerrainImpl::GetShadowMapColor, COMDAT
; _this$ = ecx

; 305  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 306  : 	float fMapSize = (float)(TERRAIN_XSIZE);
; 307  : 	float fooMapSize = 1.0f / fMapSize;
; 308  : 	if (fx < 0 || fy < 0 || fx >= fMapSize || fy >= fMapSize)

  00003	f3 0f 10 5d 08	 movss	 xmm3, DWORD PTR _fx$[ebp]
  00008	0f 57 c0	 xorps	 xmm0, xmm0
  0000b	0f 2f c3	 comiss	 xmm0, xmm3
  0000e	8b d1		 mov	 edx, ecx
  00010	0f 87 d3 00 00
	00		 ja	 $LN3@GetShadowM
  00016	f3 0f 10 55 0c	 movss	 xmm2, DWORD PTR _fy$[ebp]
  0001b	0f 2f c2	 comiss	 xmm0, xmm2
  0001e	0f 87 c5 00 00
	00		 ja	 $LN3@GetShadowM
  00024	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@46c80000
  0002c	0f 2f d8	 comiss	 xmm3, xmm0
  0002f	0f 83 b4 00 00
	00		 jae	 $LN3@GetShadowM
  00035	0f 2f d0	 comiss	 xmm2, xmm0
  00038	0f 83 ab 00 00
	00		 jae	 $LN3@GetShadowM

; 310  : 
; 311  : 	fx = fx * fooMapSize * (float)(SHADOWMAP_XSIZE - 1);

  0003e	f3 0f 59 1d 00
	00 00 00	 mulss	 xmm3, DWORD PTR __real@3823d70a

; 312  : 	fy = fy * fooMapSize * (float)(SHADOWMAP_YSIZE - 1);

  00046	f3 0f 59 15 00
	00 00 00	 mulss	 xmm2, DWORD PTR __real@3823d70a
  0004e	f3 0f 59 1d 00
	00 00 00	 mulss	 xmm3, DWORD PTR __real@437f0000
  00056	f3 0f 59 15 00
	00 00 00	 mulss	 xmm2, DWORD PTR __real@437f0000

; 313  : 	int ix, iy;
; 314  : 	PR_FLOAT_TO_INT(fx, ix);

  0005e	f3 0f 11 1d 00
	00 00 00	 movss	 DWORD PTR ?PR_FCNV@@3MA, xmm3
  00066	d9 05 00 00 00
	00		 fld	 DWORD PTR ?PR_FCNV@@3MA	; PR_FCNV
  0006c	db 1d 00 00 00
	00		 fistp	 DWORD PTR ?PR_ICNV@@3JA
  00072	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?PR_ICNV@@3JA ; PR_ICNV
  00078	66 0f 6e c1	 movd	 xmm0, ecx
  0007c	0f 5b c0	 cvtdq2ps xmm0, xmm0
  0007f	0f 2f 05 00 00
	00 00		 comiss	 xmm0, DWORD PTR ?PR_FCNV@@3MA
  00086	76 01		 jbe	 SHORT $LN5@GetShadowM
  00088	49		 dec	 ecx
$LN5@GetShadowM:

; 315  : 	PR_FLOAT_TO_INT(fy, iy);

  00089	f3 0f 11 15 00
	00 00 00	 movss	 DWORD PTR ?PR_FCNV@@3MA, xmm2
  00091	d9 05 00 00 00
	00		 fld	 DWORD PTR ?PR_FCNV@@3MA	; PR_FCNV
  00097	db 1d 00 00 00
	00		 fistp	 DWORD PTR ?PR_ICNV@@3JA
  0009d	a1 00 00 00 00	 mov	 eax, DWORD PTR ?PR_ICNV@@3JA ; PR_ICNV
  000a2	66 0f 6e c0	 movd	 xmm0, eax
  000a6	0f 5b c0	 cvtdq2ps xmm0, xmm0
  000a9	0f 2f 05 00 00
	00 00		 comiss	 xmm0, DWORD PTR ?PR_FCNV@@3MA
  000b0	76 01		 jbe	 SHORT $LN7@GetShadowM
  000b2	48		 dec	 eax
$LN7@GetShadowM:

; 316  : 
; 317  : 	WORD w = *(m_awShadowMap + (iy * SHADOWMAP_XSIZE) + ix);

  000b3	c1 e0 08	 shl	 eax, 8
  000b6	03 c1		 add	 eax, ecx

; 318  : 
; 319  : 	int b = w & 0x1f; w >>= 5; b <<= 3;

  000b8	0f b7 94 42 48
	a5 04 00	 movzx	 edx, WORD PTR [edx+eax*2+304456]
  000c0	c1 ea 05	 shr	 edx, 5

; 320  : 	int g = w & 0x1f; w >>= 5; g <<= 3;

  000c3	8b ca		 mov	 ecx, edx

; 321  : 	int r = w & 0x1f;		   r <<= 3;

  000c5	c1 ea 02	 shr	 edx, 2
  000c8	83 e1 1f	 and	 ecx, 31			; 0000001fH
  000cb	81 e2 f8 00 00
	00		 and	 edx, 248		; 000000f8H
  000d1	c1 e1 03	 shl	 ecx, 3

; 322  : 
; 323  : 	return (DWORD) (0xff << 24) | (g << 16) | (g << 8) | r;

  000d4	8b c1		 mov	 eax, ecx
  000d6	0d 00 ff ff ff	 or	 eax, -256		; ffffff00H
  000db	c1 e0 08	 shl	 eax, 8
  000de	0b c1		 or	 eax, ecx
  000e0	c1 e0 08	 shl	 eax, 8
  000e3	0b c2		 or	 eax, edx

; 324  : }

  000e5	5d		 pop	 ebp
  000e6	c2 08 00	 ret	 8
$LN3@GetShadowM:

; 309  : 		return 0xFFFFFFFF;

  000e9	83 c8 ff	 or	 eax, -1

; 324  : }

  000ec	5d		 pop	 ebp
  000ed	c2 08 00	 ret	 8
?GetShadowMapColor@CTerrainImpl@@QAEKMM@Z ENDP		; CTerrainImpl::GetShadowMapColor
_TEXT	ENDS
; Function compile flags: /Ogtp
; File C:\DS Project\DS Files\Source\ClientSource\Client\PRTerrainLib\Terrain.cpp
;	COMDAT ?LoadWaterMapFile@CTerrainImpl@@QAE_NPBD@Z
_TEXT	SEGMENT
_kWaterMapHeader$2 = -876				; size = 7
_lpcvFileData$ = -868					; size = 4
tv448 = -864						; size = 4
tv442 = -864						; size = 4
_abFileData$1$ = -860					; size = 4
_kWaterMapHeader$4$ = -853				; size = 1
_kMappedFile$ = -852					; size = 324
_wWaterHeight$3 = -528					; size = 512
__$ArrayPad$ = -16					; size = 4
__$EHRec$ = -12						; size = 12
_c_szFileName$ = 8					; size = 4
?LoadWaterMapFile@CTerrainImpl@@QAE_NPBD@Z PROC		; CTerrainImpl::LoadWaterMapFile, COMDAT
; _this$ = ecx

; 208  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	6a ff		 push	 -1
  00005	68 00 00 00 00	 push	 __ehhandler$?LoadWaterMapFile@CTerrainImpl@@QAE_NPBD@Z
  0000a	64 a1 00 00 00
	00		 mov	 eax, DWORD PTR fs:0
  00010	50		 push	 eax
  00011	81 ec 60 03 00
	00		 sub	 esp, 864		; 00000360H
  00017	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0001c	33 c5		 xor	 eax, ebp
  0001e	89 45 f0	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00021	53		 push	 ebx
  00022	56		 push	 esi
  00023	57		 push	 edi
  00024	50		 push	 eax
  00025	8d 45 f4	 lea	 eax, DWORD PTR __$EHRec$[ebp]
  00028	64 a3 00 00 00
	00		 mov	 DWORD PTR fs:0, eax
  0002e	8b f1		 mov	 esi, ecx
  00030	8b 7d 08	 mov	 edi, DWORD PTR _c_szFileName$[ebp]

; 209  : 	CMappedFile	kMappedFile;

  00033	8d 8d ac fc ff
	ff		 lea	 ecx, DWORD PTR _kMappedFile$[ebp]
  00039	e8 00 00 00 00	 call	 ??0CMappedFile@@QAE@XZ	; CMappedFile::CMappedFile

; 210  : 	LPCVOID		lpcvFileData;
; 211  : 
; 212  : 	if (!CEterPackManager::Instance().Get(kMappedFile, c_szFileName, &lpcvFileData))

  0003e	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCEterPackManager@@@@0PAVCEterPackManager@@A ; CSingleton<CEterPackManager>::ms_singleton
  00044	8d 85 9c fc ff
	ff		 lea	 eax, DWORD PTR _lpcvFileData$[ebp]
  0004a	50		 push	 eax
  0004b	57		 push	 edi
  0004c	8d 85 ac fc ff
	ff		 lea	 eax, DWORD PTR _kMappedFile$[ebp]
  00052	c7 45 fc 00 00
	00 00		 mov	 DWORD PTR __$EHRec$[ebp+8], 0
  00059	50		 push	 eax
  0005a	e8 00 00 00 00	 call	 ?Get@CEterPackManager@@QAE_NAAVCMappedFile@@PBDPAPBX@Z ; CEterPackManager::Get
  0005f	84 c0		 test	 al, al
  00061	75 23		 jne	 SHORT $LN5@LoadWaterM

; 213  : 	{
; 214  : 		Tracen("Error");

  00063	68 00 00 00 00	 push	 OFFSET ??_C@_05NAOIJFC@Error@
  00068	e8 00 00 00 00	 call	 ?Tracen@@YAXPBD@Z	; Tracen
  0006d	83 c4 04	 add	 esp, 4

; 215  : 		TraceError("CTerrainImpl::LoadWaterMap - %s OPEN ERROR", c_szFileName);

  00070	b8 00 00 00 00	 mov	 eax, OFFSET ??_C@_0CL@FEGPIHMN@CTerrainImpl?3?3LoadWaterMap?5?9?5?$CFs@
  00075	57		 push	 edi
  00076	50		 push	 eax
  00077	e8 00 00 00 00	 call	 ?TraceError@@YAXPBDZZ	; TraceError
  0007c	83 c4 08	 add	 esp, 8
  0007f	32 db		 xor	 bl, bl
  00081	e9 cb 01 00 00	 jmp	 $LN22@LoadWaterM
$LN5@LoadWaterM:

; 216  : 		return false;
; 217  : 	}
; 218  : 
; 219  : 	DWORD	dwFileSize = kMappedFile.Size();

  00086	8d 8d ac fc ff
	ff		 lea	 ecx, DWORD PTR _kMappedFile$[ebp]
  0008c	e8 00 00 00 00	 call	 ?Size@CMappedFile@@QAEKXZ ; CMappedFile::Size

; 220  : 	BYTE*	abFileData = (BYTE*)lpcvFileData;

  00091	8b 8d 9c fc ff
	ff		 mov	 ecx, DWORD PTR _lpcvFileData$[ebp]
  00097	8b d8		 mov	 ebx, eax
  00099	89 8d a4 fc ff
	ff		 mov	 DWORD PTR _abFileData$1$[ebp], ecx

; 221  : 
; 222  : 	{
; 223  : #pragma pack(push)
; 224  : #pragma pack(1)
; 225  : 		struct SWaterMapHeader
; 226  : 		{
; 227  : 			WORD m_wMagic;
; 228  : 			WORD m_wWidth;
; 229  : 			WORD m_wHeight;
; 230  : 			BYTE m_byLayerCount;
; 231  : 		};
; 232  : #pragma pack(pop)
; 233  : 
; 234  : 		if (dwFileSize < sizeof(SWaterMapHeader))

  0009f	83 fb 07	 cmp	 ebx, 7
  000a2	73 16		 jae	 SHORT $LN6@LoadWaterM

; 235  : 		{
; 236  : 			TraceError("CTerrainImpl::LoadWaterMap - %s FILE SIZE ERROR", c_szFileName);
; 237  : 			return false;

  000a4	b8 00 00 00 00	 mov	 eax, OFFSET ??_C@_0DA@BNEIEOIL@CTerrainImpl?3?3LoadWaterMap?5?9?5?$CFs@
  000a9	57		 push	 edi
  000aa	50		 push	 eax
  000ab	e8 00 00 00 00	 call	 ?TraceError@@YAXPBDZZ	; TraceError
  000b0	83 c4 08	 add	 esp, 8
  000b3	32 db		 xor	 bl, bl
  000b5	e9 97 01 00 00	 jmp	 $LN22@LoadWaterM
$LN6@LoadWaterM:

; 238  : 		}
; 239  : 
; 240  : 		SWaterMapHeader kWaterMapHeader;
; 241  : 		memcpy(&kWaterMapHeader, abFileData, sizeof(kWaterMapHeader));

  000ba	8b 01		 mov	 eax, DWORD PTR [ecx]
  000bc	66 8b 51 04	 mov	 dx, WORD PTR [ecx+4]
  000c0	89 85 94 fc ff
	ff		 mov	 DWORD PTR _kWaterMapHeader$2[ebp], eax
  000c6	8a 41 06	 mov	 al, BYTE PTR [ecx+6]
  000c9	88 85 ab fc ff
	ff		 mov	 BYTE PTR _kWaterMapHeader$4$[ebp], al

; 242  : 
; 243  : 		const WORD c_wWaterMapMagic = 5426;
; 244  : 
; 245  : 		if (c_wWaterMapMagic != kWaterMapHeader.m_wMagic)

  000cf	66 8b 85 94 fc
	ff ff		 mov	 ax, WORD PTR _kWaterMapHeader$2[ebp]
  000d6	c7 85 a0 fc ff
	ff 32 15 00 00	 mov	 DWORD PTR tv442[ebp], 5426 ; 00001532H
  000e0	66 39 85 a0 fc
	ff ff		 cmp	 WORD PTR tv442[ebp], ax
  000e7	74 1e		 je	 SHORT $LN7@LoadWaterM

; 246  : 		{
; 247  : 			TraceError("CTerrainImpl::LoadWaterMap - %s MAGIC NUMBER(%d!=MAGIC[%d]) ERROR", c_szFileName, kWaterMapHeader.m_wMagic, c_wWaterMapMagic);

  000e9	68 32 15 00 00	 push	 5426			; 00001532H
  000ee	0f b7 c0	 movzx	 eax, ax
  000f1	50		 push	 eax
  000f2	57		 push	 edi
  000f3	68 00 00 00 00	 push	 OFFSET ??_C@_0EC@DBFGDPJD@CTerrainImpl?3?3LoadWaterMap?5?9?5?$CFs@

; 287  : 		{
; 288  : 			TraceError("CTerrainImpl::LoadWaterMap - %s FILE DATA SIZE(rest %d != need %d) ERROR", c_szFileName, dwFileRestSize, dwFileNeedSize);

  000f8	e8 00 00 00 00	 call	 ?TraceError@@YAXPBDZZ	; TraceError
  000fd	83 c4 10	 add	 esp, 16			; 00000010H
  00100	32 db		 xor	 bl, bl
  00102	e9 4a 01 00 00	 jmp	 $LN22@LoadWaterM
$LN7@LoadWaterM:

; 248  : 			return false;
; 249  : 		}
; 250  : 
; 251  : 		if (WATERMAP_XSIZE != kWaterMapHeader.m_wWidth)

  00107	66 8b 85 96 fc
	ff ff		 mov	 ax, WORD PTR _kWaterMapHeader$2[ebp+2]
  0010e	c7 85 a0 fc ff
	ff 80 00 00 00	 mov	 DWORD PTR tv448[ebp], 128 ; 00000080H
  00118	66 39 85 a0 fc
	ff ff		 cmp	 WORD PTR tv448[ebp], ax
  0011f	74 1e		 je	 SHORT $LN8@LoadWaterM

; 252  : 		{
; 253  : 			TraceError("CTerrainImpl::LoadWaterMap - kWaterMapHeader(%s).m_width(%d)!=WATERMAP_XSIZE(%d)", c_szFileName, kWaterMapHeader.m_wWidth, WATERMAP_XSIZE);

  00121	68 80 00 00 00	 push	 128			; 00000080H
  00126	0f b7 c0	 movzx	 eax, ax
  00129	50		 push	 eax
  0012a	57		 push	 edi
  0012b	68 00 00 00 00	 push	 OFFSET ??_C@_0FB@JFMCAAJF@CTerrainImpl?3?3LoadWaterMap?5?9?5kW@

; 287  : 		{
; 288  : 			TraceError("CTerrainImpl::LoadWaterMap - %s FILE DATA SIZE(rest %d != need %d) ERROR", c_szFileName, dwFileRestSize, dwFileNeedSize);

  00130	e8 00 00 00 00	 call	 ?TraceError@@YAXPBDZZ	; TraceError
  00135	83 c4 10	 add	 esp, 16			; 00000010H
  00138	32 db		 xor	 bl, bl
  0013a	e9 12 01 00 00	 jmp	 $LN22@LoadWaterM
$LN8@LoadWaterM:

; 254  : 			return false;
; 255  : 		}
; 256  : 
; 257  : 		if (WATERMAP_YSIZE != kWaterMapHeader.m_wHeight)

  0013f	b8 80 00 00 00	 mov	 eax, 128		; 00000080H
  00144	66 3b c2	 cmp	 ax, dx
  00147	74 1a		 je	 SHORT $LN9@LoadWaterM

; 258  : 		{
; 259  : 			TraceError("CTerrainImpl::LoadWaterMap - kWaterMapHeader(%s).m_height(%d)!=WATERMAP_YSIZE(%d)", c_szFileName, kWaterMapHeader.m_wHeight, WATERMAP_YSIZE);

  00149	50		 push	 eax
  0014a	0f b7 c2	 movzx	 eax, dx
  0014d	50		 push	 eax
  0014e	57		 push	 edi
  0014f	68 00 00 00 00	 push	 OFFSET ??_C@_0FC@EFCAKCOC@CTerrainImpl?3?3LoadWaterMap?5?9?5kW@

; 287  : 		{
; 288  : 			TraceError("CTerrainImpl::LoadWaterMap - %s FILE DATA SIZE(rest %d != need %d) ERROR", c_szFileName, dwFileRestSize, dwFileNeedSize);

  00154	e8 00 00 00 00	 call	 ?TraceError@@YAXPBDZZ	; TraceError
  00159	83 c4 10	 add	 esp, 16			; 00000010H
  0015c	32 db		 xor	 bl, bl
  0015e	e9 ee 00 00 00	 jmp	 $LN22@LoadWaterM
$LN9@LoadWaterM:

; 260  : 			return false;
; 261  : 		}
; 262  : 
; 263  : 		m_byNumWater = kWaterMapHeader.m_byLayerCount;

  00163	8a 85 ab fc ff
	ff		 mov	 al, BYTE PTR _kWaterMapHeader$4$[ebp]

; 264  : 
; 265  : 		DWORD dwFileRestSize = dwFileSize - sizeof(kWaterMapHeader);

  00169	8d 53 f9	 lea	 edx, DWORD PTR [ebx-7]
  0016c	88 86 40 a1 04
	00		 mov	 BYTE PTR [esi+303424], al

; 266  : 		DWORD dwFileNeedSize = sizeof(m_abyWaterMap) + sizeof(long) * m_byNumWater;

  00172	0f b6 c0	 movzx	 eax, al
  00175	8d 1c 85 00 40
	00 00		 lea	 ebx, DWORD PTR [eax*4+16384]

; 267  : 		DWORD dwFileNeedSize2 = sizeof(m_abyWaterMap) + sizeof(WORD) * m_byNumWater;

  0017c	8d 04 45 00 40
	00 00		 lea	 eax, DWORD PTR [eax*2+16384]

; 268  : 		if (dwFileRestSize == dwFileNeedSize2)

  00183	3b d0		 cmp	 edx, eax
  00185	0f 85 f1 00 00
	00		 jne	 $LN10@LoadWaterM

; 269  : 		{
; 270  : 			WORD wWaterHeight[MAX_WATER_NUM + 1];
; 271  : 
; 272  : 			BYTE * abSrcWaterData = abFileData + sizeof(kWaterMapHeader);
; 273  : 			memcpy(m_abyWaterMap, abSrcWaterData, sizeof(m_abyWaterMap));

  0018b	8d 41 07	 lea	 eax, DWORD PTR [ecx+7]
  0018e	68 00 40 00 00	 push	 16384			; 00004000H
  00193	50		 push	 eax
  00194	8d 86 1a 8e 02
	00		 lea	 eax, DWORD PTR [esi+167450]
  0019a	50		 push	 eax
  0019b	e8 00 00 00 00	 call	 _memcpy

; 274  : 
; 275  : 			BYTE * abSrcWaterHeight = abSrcWaterData + sizeof(m_abyWaterMap);
; 276  : 
; 277  : 			m_byNumWater = MIN(MAX_WATER_NUM, m_byNumWater);

  001a0	0f b6 86 40 a1
	04 00		 movzx	 eax, BYTE PTR [esi+303424]
  001a7	50		 push	 eax
  001a8	68 ff 00 00 00	 push	 255			; 000000ffH
  001ad	e8 00 00 00 00	 call	 ?MIN@@YAHHH@Z		; MIN
  001b2	8a d8		 mov	 bl, al
  001b4	83 c4 14	 add	 esp, 20			; 00000014H
  001b7	88 9e 40 a1 04
	00		 mov	 BYTE PTR [esi+303424], bl

; 278  : 			if (m_byNumWater)

  001bd	84 db		 test	 bl, bl
  001bf	74 49		 je	 SHORT $LN29@LoadWaterM

; 279  : 			{
; 280  : 				memcpy(wWaterHeight, abSrcWaterHeight, sizeof(WORD) * m_byNumWater);

  001c1	0f b6 cb	 movzx	 ecx, bl
  001c4	8d 85 f0 fd ff
	ff		 lea	 eax, DWORD PTR _wWaterHeight$3[ebp]
  001ca	03 c9		 add	 ecx, ecx
  001cc	51		 push	 ecx
  001cd	8b 8d a4 fc ff
	ff		 mov	 ecx, DWORD PTR _abFileData$1$[ebp]
  001d3	81 c1 07 40 00
	00		 add	 ecx, 16391		; 00004007H
  001d9	51		 push	 ecx
  001da	50		 push	 eax
  001db	e8 00 00 00 00	 call	 _memcpy
  001e0	83 c4 0c	 add	 esp, 12			; 0000000cH

; 281  : 
; 282  : 				for (int i = 0; i < m_byNumWater; ++i)

  001e3	33 c9		 xor	 ecx, ecx
  001e5	84 db		 test	 bl, bl
  001e7	74 21		 je	 SHORT $LN29@LoadWaterM

; 279  : 			{
; 280  : 				memcpy(wWaterHeight, abSrcWaterHeight, sizeof(WORD) * m_byNumWater);

  001e9	8d 96 44 a1 04
	00		 lea	 edx, DWORD PTR [esi+303428]
  001ef	90		 npad	 1
$LL4@LoadWaterM:

; 283  : 					m_lWaterHeight[i] = wWaterHeight[i];

  001f0	0f b7 84 4d f0
	fd ff ff	 movzx	 eax, WORD PTR _wWaterHeight$3[ebp+ecx*2]
  001f8	8d 52 04	 lea	 edx, DWORD PTR [edx+4]
  001fb	89 42 fc	 mov	 DWORD PTR [edx-4], eax
  001fe	41		 inc	 ecx
  001ff	0f b6 86 40 a1
	04 00		 movzx	 eax, BYTE PTR [esi+303424]
  00206	3b c8		 cmp	 ecx, eax
  00208	7c e6		 jl	 SHORT $LL4@LoadWaterM
$LN29@LoadWaterM:

; 289  : 			return false;
; 290  : 		}
; 291  : 
; 292  : 		BYTE * abSrcWaterData = abFileData + sizeof(kWaterMapHeader);

  0020a	8b 8d a4 fc ff
	ff		 mov	 ecx, DWORD PTR _abFileData$1$[ebp]
$LN27@LoadWaterM:
  00210	8d 79 07	 lea	 edi, DWORD PTR [ecx+7]

; 293  : 		memcpy(m_abyWaterMap, abSrcWaterData, sizeof(m_abyWaterMap));

  00213	68 00 40 00 00	 push	 16384			; 00004000H
  00218	8d 86 1a 8e 02
	00		 lea	 eax, DWORD PTR [esi+167450]
  0021e	57		 push	 edi
  0021f	50		 push	 eax
  00220	e8 00 00 00 00	 call	 _memcpy

; 294  : 
; 295  : 		BYTE * abSrcWaterHeight = abSrcWaterData + sizeof(m_abyWaterMap);
; 296  : 
; 297  : 		if (m_byNumWater)

  00225	8a 86 40 a1 04
	00		 mov	 al, BYTE PTR [esi+303424]
  0022b	83 c4 0c	 add	 esp, 12			; 0000000cH
  0022e	84 c0		 test	 al, al
  00230	74 1d		 je	 SHORT $LN14@LoadWaterM

; 298  : 			memcpy(m_lWaterHeight, abSrcWaterHeight, sizeof(long) * m_byNumWater);

  00232	0f b6 c0	 movzx	 eax, al
  00235	c1 e0 02	 shl	 eax, 2
  00238	50		 push	 eax
  00239	8d 87 00 40 00
	00		 lea	 eax, DWORD PTR [edi+16384]
  0023f	50		 push	 eax
  00240	8d 86 44 a1 04
	00		 lea	 eax, DWORD PTR [esi+303428]
  00246	50		 push	 eax
  00247	e8 00 00 00 00	 call	 _memcpy
  0024c	83 c4 0c	 add	 esp, 12			; 0000000cH
$LN14@LoadWaterM:

; 299  : 	}
; 300  : 
; 301  : 	return true;

  0024f	b3 01		 mov	 bl, 1
$LN22@LoadWaterM:
  00251	8d 8d ac fc ff
	ff		 lea	 ecx, DWORD PTR _kMappedFile$[ebp]
  00257	e8 00 00 00 00	 call	 ??1CMappedFile@@UAE@XZ	; CMappedFile::~CMappedFile
  0025c	8a c3		 mov	 al, bl

; 302  : }

  0025e	8b 4d f4	 mov	 ecx, DWORD PTR __$EHRec$[ebp]
  00261	64 89 0d 00 00
	00 00		 mov	 DWORD PTR fs:0, ecx
  00268	59		 pop	 ecx
  00269	5f		 pop	 edi
  0026a	5e		 pop	 esi
  0026b	5b		 pop	 ebx
  0026c	8b 4d f0	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0026f	33 cd		 xor	 ecx, ebp
  00271	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00276	8b e5		 mov	 esp, ebp
  00278	5d		 pop	 ebp
  00279	c2 04 00	 ret	 4
$LN10@LoadWaterM:

; 284  : 			}
; 285  : 		}
; 286  : 		else if (dwFileRestSize != dwFileNeedSize)

  0027c	3b d3		 cmp	 edx, ebx
  0027e	74 90		 je	 SHORT $LN27@LoadWaterM

; 287  : 		{
; 288  : 			TraceError("CTerrainImpl::LoadWaterMap - %s FILE DATA SIZE(rest %d != need %d) ERROR", c_szFileName, dwFileRestSize, dwFileNeedSize);

  00280	53		 push	 ebx
  00281	52		 push	 edx
  00282	57		 push	 edi
  00283	68 00 00 00 00	 push	 OFFSET ??_C@_0EJ@JKEHKGG@CTerrainImpl?3?3LoadWaterMap?5?9?5?$CFs@
  00288	e8 00 00 00 00	 call	 ?TraceError@@YAXPBDZZ	; TraceError
  0028d	83 c4 10	 add	 esp, 16			; 00000010H
  00290	32 db		 xor	 bl, bl
  00292	eb bd		 jmp	 SHORT $LN22@LoadWaterM
_TEXT	ENDS
;	COMDAT text$x
text$x	SEGMENT
__unwindfunclet$?LoadWaterMapFile@CTerrainImpl@@QAE_NPBD@Z$0:
  00000	8d 8d ac fc ff
	ff		 lea	 ecx, DWORD PTR _kMappedFile$[ebp]
  00006	e9 00 00 00 00	 jmp	 ??1CMappedFile@@UAE@XZ	; CMappedFile::~CMappedFile
  0000b	cc		 int	 3
  0000c	cc		 int	 3
  0000d	cc		 int	 3
  0000e	cc		 int	 3
  0000f	cc		 int	 3
__ehhandler$?LoadWaterMapFile@CTerrainImpl@@QAE_NPBD@Z:
  00010	90		 npad	 1
  00011	90		 npad	 1
  00012	8b 54 24 08	 mov	 edx, DWORD PTR [esp+8]
  00016	8d 42 0c	 lea	 eax, DWORD PTR [edx+12]
  00019	8b 8a 90 fc ff
	ff		 mov	 ecx, DWORD PTR [edx-880]
  0001f	33 c8		 xor	 ecx, eax
  00021	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00026	8b 4a fc	 mov	 ecx, DWORD PTR [edx-4]
  00029	33 c8		 xor	 ecx, eax
  0002b	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00030	b8 00 00 00 00	 mov	 eax, OFFSET __ehfuncinfo$?LoadWaterMapFile@CTerrainImpl@@QAE_NPBD@Z
  00035	e9 00 00 00 00	 jmp	 ___CxxFrameHandler3
text$x	ENDS
?LoadWaterMapFile@CTerrainImpl@@QAE_NPBD@Z ENDP		; CTerrainImpl::LoadWaterMapFile
; Function compile flags: /Ogtp
; File C:\DS Project\DS Files\Source\ClientSource\Client\PRTerrainLib\Terrain.cpp
;	COMDAT ?LoadWaterMap@CTerrainImpl@@QAE_NPBD@Z
_TEXT	SEGMENT
_c_szFileName$ = 8					; size = 4
?LoadWaterMap@CTerrainImpl@@QAE_NPBD@Z PROC		; CTerrainImpl::LoadWaterMap, COMDAT
; _this$ = ecx

; 188  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	53		 push	 ebx
  00004	56		 push	 esi
  00005	57		 push	 edi
  00006	8b f1		 mov	 esi, ecx

; 189  : 	DWORD dwStart = ELTimer_GetMSec();

  00008	e8 00 00 00 00	 call	 ?ELTimer_GetMSec@@YAKXZ	; ELTimer_GetMSec

; 190  : 
; 191  : 	if (!LoadWaterMapFile(c_szFileName))

  0000d	8b 7d 08	 mov	 edi, DWORD PTR _c_szFileName$[ebp]
  00010	8b ce		 mov	 ecx, esi
  00012	57		 push	 edi
  00013	8b d8		 mov	 ebx, eax
  00015	e8 00 00 00 00	 call	 ?LoadWaterMapFile@CTerrainImpl@@QAE_NPBD@Z ; CTerrainImpl::LoadWaterMapFile
  0001a	84 c0		 test	 al, al
  0001c	75 47		 jne	 SHORT $LN2@LoadWaterM

; 192  : 	{
; 193  : 		memset(m_abyWaterMap, 0xFF, sizeof(m_abyWaterMap));

  0001e	68 00 40 00 00	 push	 16384			; 00004000H
  00023	8d 86 1a 8e 02
	00		 lea	 eax, DWORD PTR [esi+167450]
  00029	68 ff 00 00 00	 push	 255			; 000000ffH
  0002e	50		 push	 eax
  0002f	e8 00 00 00 00	 call	 _memset

; 194  : 
; 195  : 		m_byNumWater = 0;
; 196  : 		memset(m_lWaterHeight, -1, sizeof(m_lWaterHeight));

  00034	68 00 04 00 00	 push	 1024			; 00000400H
  00039	8d 86 44 a1 04
	00		 lea	 eax, DWORD PTR [esi+303428]
  0003f	c6 86 40 a1 04
	00 00		 mov	 BYTE PTR [esi+303424], 0
  00046	6a ff		 push	 -1
  00048	50		 push	 eax
  00049	e8 00 00 00 00	 call	 _memset

; 197  : 
; 198  : 		TraceError("CMapOutdoor::LoadWaterMap LoadWaterMapFile(%s) Failed", c_szFileName);

  0004e	57		 push	 edi
  0004f	68 00 00 00 00	 push	 OFFSET ??_C@_0DG@MJOJCCLB@CMapOutdoor?3?3LoadWaterMap?5LoadW@
  00054	e8 00 00 00 00	 call	 ?TraceError@@YAXPBDZZ	; TraceError
  00059	83 c4 20	 add	 esp, 32			; 00000020H

; 199  : 
; 200  : 		return false;

  0005c	32 c0		 xor	 al, al
  0005e	5f		 pop	 edi

; 205  : }

  0005f	5e		 pop	 esi
  00060	5b		 pop	 ebx
  00061	5d		 pop	 ebp
  00062	c2 04 00	 ret	 4
$LN2@LoadWaterM:

; 201  : 	}
; 202  : 
; 203  : 	Tracef("LoadWaterMapFile %s %d\n", c_szFileName, ELTimer_GetMSec() - dwStart);

  00065	e8 00 00 00 00	 call	 ?ELTimer_GetMSec@@YAKXZ	; ELTimer_GetMSec
  0006a	2b c3		 sub	 eax, ebx
  0006c	50		 push	 eax
  0006d	57		 push	 edi
  0006e	68 00 00 00 00	 push	 OFFSET ??_C@_0BI@LPNELCOB@LoadWaterMapFile?5?$CFs?5?$CFd?6@
  00073	e8 00 00 00 00	 call	 ?Tracef@@YAXPBDZZ	; Tracef
  00078	83 c4 0c	 add	 esp, 12			; 0000000cH

; 204  : 	return true;

  0007b	b0 01		 mov	 al, 1
  0007d	5f		 pop	 edi

; 205  : }

  0007e	5e		 pop	 esi
  0007f	5b		 pop	 ebx
  00080	5d		 pop	 ebp
  00081	c2 04 00	 ret	 4
?LoadWaterMap@CTerrainImpl@@QAE_NPBD@Z ENDP		; CTerrainImpl::LoadWaterMap
_TEXT	ENDS
; Function compile flags: /Ogtp
; File C:\DS Project\DS Files\Source\ClientSource\Client\PRTerrainLib\Terrain.cpp
;	COMDAT ??1CTerrainImpl@@UAE@XZ
_TEXT	SEGMENT
__$EHRec$ = -12						; size = 12
??1CTerrainImpl@@UAE@XZ PROC				; CTerrainImpl::~CTerrainImpl, COMDAT
; _this$ = ecx

; 36   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	6a ff		 push	 -1
  00005	68 00 00 00 00	 push	 __ehhandler$??1CTerrainImpl@@UAE@XZ
  0000a	64 a1 00 00 00
	00		 mov	 eax, DWORD PTR fs:0
  00010	50		 push	 eax
  00011	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  00016	33 c5		 xor	 eax, ebp
  00018	50		 push	 eax
  00019	8d 45 f4	 lea	 eax, DWORD PTR __$EHRec$[ebp]
  0001c	64 a3 00 00 00
	00		 mov	 DWORD PTR fs:0, eax
  00022	c7 01 00 00 00
	00		 mov	 DWORD PTR [ecx], OFFSET ??_7CTerrainImpl@@6B@

; 37   : 	Clear();

  00028	e8 00 00 00 00	 call	 ?Clear@CTerrainImpl@@MAEXXZ ; CTerrainImpl::Clear

; 38   : }

  0002d	8b 4d f4	 mov	 ecx, DWORD PTR __$EHRec$[ebp]
  00030	64 89 0d 00 00
	00 00		 mov	 DWORD PTR fs:0, ecx
  00037	59		 pop	 ecx
  00038	8b e5		 mov	 esp, ebp
  0003a	5d		 pop	 ebp
  0003b	c3		 ret	 0
  0003c	cc		 int	 3
  0003d	cc		 int	 3
  0003e	cc		 int	 3
  0003f	cc		 int	 3
  00040	cc		 int	 3
_TEXT	ENDS
;	COMDAT text$x
text$x	SEGMENT
__ehhandler$??1CTerrainImpl@@UAE@XZ:
  00000	90		 npad	 1
  00001	90		 npad	 1
  00002	8b 54 24 08	 mov	 edx, DWORD PTR [esp+8]
  00006	8d 42 0c	 lea	 eax, DWORD PTR [edx+12]
  00009	8b 4a fc	 mov	 ecx, DWORD PTR [edx-4]
  0000c	33 c8		 xor	 ecx, eax
  0000e	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00013	b8 00 00 00 00	 mov	 eax, OFFSET __ehfuncinfo$??1CTerrainImpl@@UAE@XZ
  00018	e9 00 00 00 00	 jmp	 ___CxxFrameHandler3
text$x	ENDS
??1CTerrainImpl@@UAE@XZ ENDP				; CTerrainImpl::~CTerrainImpl
; Function compile flags: /Ogtp
; File C:\DS Project\DS Files\Source\ClientSource\Client\PRTerrainLib\Terrain.cpp
;	COMDAT ??0CTerrainImpl@@QAE@XZ
_TEXT	SEGMENT
??0CTerrainImpl@@QAE@XZ PROC				; CTerrainImpl::CTerrainImpl, COMDAT
; _this$ = ecx

; 31   : {

  00000	56		 push	 esi
  00001	8b f1		 mov	 esi, ecx
  00003	c7 06 00 00 00
	00		 mov	 DWORD PTR [esi], OFFSET ??_7CTerrainImpl@@6B@

; 32   : 	Initialize();

  00009	e8 00 00 00 00	 call	 ?Initialize@CTerrainImpl@@IAEXXZ ; CTerrainImpl::Initialize

; 33   : }

  0000e	8b c6		 mov	 eax, esi
  00010	5e		 pop	 esi
  00011	c3		 ret	 0
??0CTerrainImpl@@QAE@XZ ENDP				; CTerrainImpl::CTerrainImpl
_TEXT	ENDS
; Function compile flags: /Ogtp
; File C:\DS Project\DS Files\Source\ClientSource\Client\PRTerrainLib\Terrain.cpp
;	COMDAT ?GetTextureSet@CTerrainImpl@@SAPAVCTextureSet@@XZ
_TEXT	SEGMENT
?GetTextureSet@CTerrainImpl@@SAPAVCTextureSet@@XZ PROC	; CTerrainImpl::GetTextureSet, COMDAT

; 24   : 	if (!ms_pTextureSet)

  00000	a1 00 00 00 00	 mov	 eax, DWORD PTR ?ms_pTextureSet@CTerrainImpl@@1PAVCTextureSet@@A ; CTerrainImpl::ms_pTextureSet
  00005	85 c0		 test	 eax, eax
  00007	75 0e		 jne	 SHORT $LN2@GetTexture

; 25   : 		SetTextureSet(NULL);

  00009	50		 push	 eax
  0000a	e8 00 00 00 00	 call	 ?SetTextureSet@CTerrainImpl@@SAXPAVCTextureSet@@@Z ; CTerrainImpl::SetTextureSet

; 26   : 
; 27   : 	return ms_pTextureSet;

  0000f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?ms_pTextureSet@CTerrainImpl@@1PAVCTextureSet@@A ; CTerrainImpl::ms_pTextureSet
  00014	83 c4 04	 add	 esp, 4
$LN2@GetTexture:

; 28   : }

  00017	c3		 ret	 0
?GetTextureSet@CTerrainImpl@@SAPAVCTextureSet@@XZ ENDP	; CTerrainImpl::GetTextureSet
_TEXT	ENDS
; Function compile flags: /Ogtp
; File C:\DS Project\DS Files\Source\ClientSource\Client\PRTerrainLib\Terrain.cpp
;	COMDAT ?SetTextureSet@CTerrainImpl@@SAXPAVCTextureSet@@@Z
_TEXT	SEGMENT
__$EHRec$ = -12						; size = 12
_pTextureSet$ = 8					; size = 4
?SetTextureSet@CTerrainImpl@@SAXPAVCTextureSet@@@Z PROC	; CTerrainImpl::SetTextureSet, COMDAT

; 13   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	6a ff		 push	 -1
  00005	68 00 00 00 00	 push	 __ehhandler$?SetTextureSet@CTerrainImpl@@SAXPAVCTextureSet@@@Z
  0000a	64 a1 00 00 00
	00		 mov	 eax, DWORD PTR fs:0
  00010	50		 push	 eax
  00011	56		 push	 esi
  00012	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  00017	33 c5		 xor	 eax, ebp
  00019	50		 push	 eax
  0001a	8d 45 f4	 lea	 eax, DWORD PTR __$EHRec$[ebp]
  0001d	64 a3 00 00 00
	00		 mov	 DWORD PTR fs:0, eax

; 14   : 	static CTextureSet s_EmptyTextureSet;

  00023	64 a1 00 00 00
	00		 mov	 eax, DWORD PTR fs:__tls_array
  00029	be 00 00 00 00	 mov	 esi, OFFSET ?s_EmptyTextureSet@?1??SetTextureSet@CTerrainImpl@@SAXPAVCTextureSet@@@Z@4V3@A
  0002e	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR __tls_index
  00034	8b 0c 88	 mov	 ecx, DWORD PTR [eax+ecx*4]
  00037	a1 00 00 00 00	 mov	 eax, DWORD PTR ?$TSS0@?1??SetTextureSet@CTerrainImpl@@SAXPAVCTextureSet@@@Z@4HA
  0003c	3b 81 00 00 00
	00		 cmp	 eax, DWORD PTR __Init_thread_epoch[ecx]
  00042	7f 1e		 jg	 SHORT $LN9@SetTexture
$LN2@SetTexture:

; 15   : 
; 16   : 	if (!pTextureSet)
; 17   : 		ms_pTextureSet = &s_EmptyTextureSet;
; 18   : 	else
; 19   : 		ms_pTextureSet = pTextureSet;
; 20   : }

  00044	8b 45 08	 mov	 eax, DWORD PTR _pTextureSet$[ebp]
  00047	85 c0		 test	 eax, eax
  00049	0f 45 f0	 cmovne	 esi, eax
  0004c	89 35 00 00 00
	00		 mov	 DWORD PTR ?ms_pTextureSet@CTerrainImpl@@1PAVCTextureSet@@A, esi ; CTerrainImpl::ms_pTextureSet
  00052	8b 4d f4	 mov	 ecx, DWORD PTR __$EHRec$[ebp]
  00055	64 89 0d 00 00
	00 00		 mov	 DWORD PTR fs:0, ecx
  0005c	59		 pop	 ecx
  0005d	5e		 pop	 esi
  0005e	8b e5		 mov	 esp, ebp
  00060	5d		 pop	 ebp
  00061	c3		 ret	 0
$LN9@SetTexture:

; 14   : 	static CTextureSet s_EmptyTextureSet;

  00062	68 00 00 00 00	 push	 OFFSET ?$TSS0@?1??SetTextureSet@CTerrainImpl@@SAXPAVCTextureSet@@@Z@4HA
  00067	e8 00 00 00 00	 call	 __Init_thread_header
  0006c	83 c4 04	 add	 esp, 4
  0006f	83 3d 00 00 00
	00 ff		 cmp	 DWORD PTR ?$TSS0@?1??SetTextureSet@CTerrainImpl@@SAXPAVCTextureSet@@@Z@4HA, -1
  00076	75 cc		 jne	 SHORT $LN2@SetTexture
  00078	8b ce		 mov	 ecx, esi
  0007a	c7 45 fc 00 00
	00 00		 mov	 DWORD PTR __$EHRec$[ebp+8], 0
  00081	e8 00 00 00 00	 call	 ??0CTextureSet@@QAE@XZ	; CTextureSet::CTextureSet
  00086	68 00 00 00 00	 push	 OFFSET ??__Fs_EmptyTextureSet@?1??SetTextureSet@CTerrainImpl@@SAXPAVCTextureSet@@@Z@YAXXZ ; `CTerrainImpl::SetTextureSet'::`2'::`dynamic atexit destructor for 's_EmptyTextureSet''
  0008b	e8 00 00 00 00	 call	 _atexit
  00090	68 00 00 00 00	 push	 OFFSET ?$TSS0@?1??SetTextureSet@CTerrainImpl@@SAXPAVCTextureSet@@@Z@4HA
  00095	e8 00 00 00 00	 call	 __Init_thread_footer
  0009a	83 c4 08	 add	 esp, 8
  0009d	eb a5		 jmp	 SHORT $LN2@SetTexture
_TEXT	ENDS
;	COMDAT text$x
text$x	SEGMENT
__unwindfunclet$?SetTextureSet@CTerrainImpl@@SAXPAVCTextureSet@@@Z$0:
  00000	68 00 00 00 00	 push	 OFFSET ?$TSS0@?1??SetTextureSet@CTerrainImpl@@SAXPAVCTextureSet@@@Z@4HA
  00005	e8 00 00 00 00	 call	 __Init_thread_abort
  0000a	59		 pop	 ecx
  0000b	c3		 ret	 0
  0000c	cc		 int	 3
  0000d	cc		 int	 3
  0000e	cc		 int	 3
  0000f	cc		 int	 3
  00010	cc		 int	 3
__ehhandler$?SetTextureSet@CTerrainImpl@@SAXPAVCTextureSet@@@Z:
  00011	90		 npad	 1
  00012	90		 npad	 1
  00013	8b 54 24 08	 mov	 edx, DWORD PTR [esp+8]
  00017	8d 42 0c	 lea	 eax, DWORD PTR [edx+12]
  0001a	8b 4a f8	 mov	 ecx, DWORD PTR [edx-8]
  0001d	33 c8		 xor	 ecx, eax
  0001f	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00024	b8 00 00 00 00	 mov	 eax, OFFSET __ehfuncinfo$?SetTextureSet@CTerrainImpl@@SAXPAVCTextureSet@@@Z
  00029	e9 00 00 00 00	 jmp	 ___CxxFrameHandler3
text$x	ENDS
?SetTextureSet@CTerrainImpl@@SAXPAVCTextureSet@@@Z ENDP	; CTerrainImpl::SetTextureSet
END
